//A5, Copyright (c) 2011, Jeff dePascale & Brian Sutliffe. http://www.jeffdepascale.com(function(f){var d=null,c=null,b=function(m,j,o){var r,p,n,k;if(!m){return null}o=o||false;if(typeof m==="object"){return m}r=m.split(".");k=f;if(r.length===1&&j&&j[m]){return j[m]}for(p=0,n=r.length;p<n;p++){k=k[r[p]];if(k===undefined){if(c){try{var s=c(m,j);if(s){return s}}catch(q){return null}}else{return null}}}if(o||k.namespace!==undefined){return k}return null},h=function(k,p,o){var r=typeof p==="boolean",n=r?p:false,q,j=(r?o:p)||{},q=k.split("."),s=q.pop(),m;if(!k.match(/^[A-Za-z0-9.]*$/)){return a5.ThrowError(100,null,{namespace:k})}m=q.length?e(q):f;if(m[s]!==undefined){return m[s]}return m[s]=n?new j():j},e=function(n){var m=f,k,j;for(k=0,j=n.length;k<j;k++){if(!m[n[k]]){m[n[k]]={}}m=m[n[k]]}return m},g=function(){d={};for(var j in f){d[j]=""}},a=function(j){if(!d){a5.ThrowError(101)}else{var m=[],k;for(k in f){if(d[k]===undefined){m.push(k)}}if(j===true){g()}return m}};f.a5={version:function(){return"0.5.{BUILD_NUMBER}"},buildDate:function(){return"{BUILD_DATE}"},GetNamespace:b,SetNamespace:h,TrackGlobalStrays:g,GetGlobalStrays:a,_a5_destroyedObj:{},_a5_destroyedObjFunc:function(){var j=arguments.callee.caller,k="Destroyed method called from";if(j._a5_methodName!==undefined){throw k+" method '"+j.getName()+"' in class '"+j.getClass().className()+"'"}else{throw k+" function '"+j.toString()+"'"}},_a5_classCreateHandler:function(){return classCreateHandler},CreateGlobals:function(){f.Create=a5.Create;f.Package=a5.Package;f.GetNamespace=a5.GetNamespace;f.SetNamespace=a5.SetNamespace;f.ThrowError=a5.ThrowError},RegisterNamespaceResolver:function(j){c=j}}})(this);a5.SetNamespace("a5.core.reflection",true,function(){var a={getName:function(){return this._a5_methodName},getClass:function(){return this._a5_ownerClass},getClassInstance:function(){return this._a5_ownerInstance},getAttributes:function(){return this._a5_attributes?this._a5_attributes:null}},b=function(c,e,f,d){d=d||e[f];d._a5_ownerInstance=e;d._a5_ownerClass=c;d._a5_methodName=f;d.getName=a.getName;d.getClass=a.getClass;d.getClassInstance=a.getClassInstance;d.getAttributes=a.getAttributes};return{setReflection:b}});a5.SetNamespace("a5.core.attributes",true,function(){var c=function(f,h){var p=Array.prototype.slice.call(h),m,z,y,x,w,q,n={},d=false;if(!p.length){return a5.ThrowError(305)}m=typeof p[p.length-1]==="function"?p.pop():null;if(m!==null&&typeof m!=="function"){return a5.ThrowError(300)}if(!p.length){return a5.ThrowError(301)}for(z=0,w=p.length;z<w;z++){var o=p[z];if(Object.prototype.toString.call(o)!=="[object Array]"){return a5.ThrowError(302)}for(y=0,x=o.length;y<x;y++){var u=o[y],q=typeof u;if(y==0){var A=false,v=null;if(q!=="string"){if(q==="function"){v=u}else{A=true}}else{var g=a5.GetNamespace(u,f.imports());if(!g){g=a5.GetNamespace(u+"Attribute",f.imports())}if(g){v=o[y]=g}else{A=true}}if(!A&&(!v.isA5||!v.doesExtend(a5.Attribute))){A=true}else{if(v.doesExtend(a5.AspectAttribute)){d=true}}if(A){return a5.ThrowError(303)}}else{if(q!=="object"||Object.prototype.toString.call(u)==="[object Array]"){return a5.ThrowError(304)}}}}for(z=0,w=p.length;z<w;z++){var e=p[z],s=[];for(var y=1,x=e.length;y<x;y++){s.push(e[y])}p[z]=[e[0],s];n[e[0].className()]=s}if(!d){if(!m){m=function(){}}m._a5_attributes=n;return m}n.wrappedMethod=m;var r=function(){var D,k,B,L=[],H=this,D,F=0;if(m){for(var k in r){m[k]=r[k]}}B=r.caller;do{if(B.getClassInstance!==undefined){D=B}else{B=B.caller}}while(B!==null&&!D);for(var E=0,C=p.length;E<C;E++){var K=p[E][0],J=K.instance(true),I=p[E][1];L.push({cls:J,props:I})}var G=function(O,N,M){t(F,O,N,M)},t=function(N,S,U,O){if(S){if(Object.prototype.toString.call(S)!=="[object Array]"){S=[S]}}else{S=[]}if(!O){O=S}if(N>=L.length){if(U){return S[0]}else{return j(S,O)}}var R,U=U||false,Q=false,P=false,T=function(V){G.call(this,V||S,U,O)};var M=a5.Create(a5.AspectCallArguments,[L[N].props,S,H,r,T,D,O]);R=L[N].cls.around(M);if(R===a5.AspectAttribute.NOT_IMPLEMENTED){R=L[N].cls[(U?"after":"before")](M)}else{Q=true}if(R!==null&&R!==undefined){switch(R){case a5.AspectAttribute.NOT_IMPLEMENTED:case a5.Attribute.SUCCESS:R=S;break;case a5.Attribute.ASYNC:P=true;break;case a5.Attribute.RETURN_NULL:R=null;break;case a5.Attribute.FAILURE:return}}else{return a5.ThrowError(308,null,{prop:k,method:Q?"around":(U?"after":"before")})}F=N+1;if(!P){return t(F,R,U,S,O)}},j=function(N,M){F=0;var O=m?m.apply(H,N):undefined;if(O!==undefined){O=[O]}else{O=N}return t(0,O,true,M)};return t(F,Array.prototype.slice.call(arguments))};r._a5_attributes=n;return r},b=function(){for(i=0,l=a5.Attribute._extenderRef.length;i<l;i++){a5.Create(a5.Attribute._extenderRef[i])}},a=function(n,k){var m=k.split("|");for(var h=0,f=m.length;h<f;h++){var d=m[h],e=d.charAt(0)==="*",o=d.charAt(d.length-1)==="*",j=n.indexOf(d),g=j!==-1;if(g){return true}if(e&&n.indexOf(d.substr(1))===0){return true}if(o&&n.indexOf(d.substr(0,d.length-1))>-1){return true}}return false};applyClassAttribs=function(x,f){var h=x.getMethods(),v=Array.prototype.slice;for(var s=0,m=h.length;s<m;s++){var w=h[s],d=x[w],g=[];for(var q=0,n=f.length;q<n;q++){var u=v.call(f[q]);if(u.length>1){var r=u[u.length-1],e=false,p=true,o=r.include,t=r.exclude;if(o!==undefined){e=true;if(typeof o==="object"){p=w.match(o).length>0}else{p=a(w,o)}}if(t!==undefined){e=true;if(typeof t==="object"){p=w.match(t)}else{p=a(w,t)}}if(e){u.pop()}if(p){g.push(u)}}else{g.push(u)}}if(g.length){g.push(d);x[w]=a5.core.attributes.createAttribute(x,g);a5.core.reflection.setReflection(x.constructor,x,w,x[w])}}};return{createAttribute:c,applyClassAttribs:applyClassAttribs}});a5.SetNamespace("a5.core.classBuilder",true,function(){var m=[],q=false,f=null,e=[],k=[],a,h=function(s,r){var t,u;if(typeof s==="string"){t=a5.GetNamespace(s);if(t===null){return a5.ThrowError(207,null,{className:s})}}else{t=s}if(typeof t!=="function"){return a5.ThrowError(207,null,{className:s})}if(t.isInterface()){return a5.ThrowError(208,null,{nm:t.namespace()})}try{u=new t()}catch(v){return a5.ThrowError(209,null,{nm:typeof s==="string"?s:(s.namespace?s.namespace():""),errorStr:v})}if(t._a5_clsDef){p(t._a5_clsDef,u,u,t.imports(),t)}u._a5_initialize(r);return u},p=function(r,u,w,s,t,v){if(v){u.Properties=function(x){w.constructor._a5_protoProps=x};u.PrivateProperties=function(x){w.constructor._a5_protoPrivateProps=x;return function(y){return y._a5_privatePropsRef[w.namespace()]}}}u.Attributes=function(){return a5.core.attributes.createAttribute.call(w,u,arguments)};w.Override={};w.Final={};r.call(u,w,s,t);a5.core.mixins.prepareMixins(w);n(w);for(a in w){if(a!=="Attributes"&&({}).hasOwnProperty.call(w,a)&&typeof w[a]==="function"&&(t._a5_namespace==="a5.Object"||a5.core.classProxyObj.instance[a]===undefined)){if(a===w.className()){w.constructor._a5_instanceConst=w[a];a5.core.reflection.setReflection(t,w,a,w.constructor._a5_instanceConst);delete w[a]}else{a5.core.reflection.setReflection(t,w,a)}}}delete w.Final;delete w.Override;delete u.Attributes;if(v){delete u.Properties;delete u.PrivateProperties}},n=function(t){var u=t.superclass(),r=t.constructor._a5_mixedMethods;if(!u){u={}}for(a in t){if(t.hasOwnProperty(a)&&typeof t[a]==="function"){if(a!=="Final"&&a!=="Override"&&a!=="constructor"&&a!=="prototype"&&a!=="dealloc"&&a!=="_a5_initialized"){if(u[a]&&u[a].toString().indexOf("[native code]")===-1){if(u[a].Final==true){return a5.ThrowError(201,null,{prop:a,namespace:t.namespace()})}return a5.ThrowError(200,null,{prop:a,namespace:t.namespace()})}else{var s=r[a];if(r[a]!==undefined&&s!==t[a]){return a5.ThrowError(220,null,{prop:a,namespace:t.namespace()})}}}}}for(a in t.Override){if(u[a]===undefined&&r[a]===undefined){return a5.ThrowError(202,null,{prop:a,namespace:t.namespace()})}if(u[a]&&u[a].Final===true||r[a]&&r[a].Final===true){return a5.ThrowError(203,null,{prop:a,namespace:t.namespace()})}t[a]=t.Override[a]}for(a in t.Final){t[a]=t.Final[a];t[a].Final=true}},j=function(v){var O,B,r,w,u,E,y,s,C=null,x=false,M=false,z=false,I=false,H=false,D=function(){var R=c(O,v),T={pkg:v,imports:O,clsName:B,cls:r,base:w,attribs:C,type:u,proto:E,implement:y,mixins:s,staticMethods:x,isInterface:z,isMixin:M,enumDeclaration:I,isProto:H},S=a5.core.verifiers.validateClassDependencies(w,R,s,y,z,M);if(S===true){d(T)}else{m.push({pkg:T,reason:S.reason,reasonNM:S.reasonNM})}D=A=N=K=P=t=J=G=Q=L=F=null},A=function(){O=Array.prototype.slice.call(arguments);return{Prototype:G,Static:P,Mixin:Q,Mix:L,Extends:N,Implements:K,Interface:t,Class:J}},N=function(R){w=R;return{Prototype:G,Static:P,Import:A,Mix:L,Implements:K,Interface:t,Class:J}},L=function(){s=Array.prototype.slice.call(arguments);return{Prototype:G,Static:P,Extends:N,Implements:K,Interface:t,Class:J}},K=function(R){y=Array.prototype.slice.call(arguments);return{Prototype:G,Static:P,Mix:L,Import:A,Extends:N,Class:J}},P=function(R,S){if(typeof R==="string"){B=R;x=S;D()}else{x=R;return{Prototype:G,Implements:K,Mix:L,Mixin:Q,Import:A,Extends:N,Class:J}}},t=function(S,R){B=S;r=R;z=true;D()},Q=function(){M=true;var S=Array.prototype.slice.call(arguments);B=S[0];for(var T=1,R=S.length;T<R;T++){switch(typeof S[T]){case"string":u=S[T];break;case"object":if(Object.prototype.toString.call(S[T])==="[object Array]"){if(!C){C=[]}C.push(S[T])}break;case"function":r=S[T];break}}D()},F=function(R,S){B=R;I=S;D()},J=function(){var S=Array.prototype.slice.call(arguments);B=S[0];for(var T=1,R=S.length;T<R;T++){switch(typeof S[T]){case"string":u=S[T];break;case"object":if(Object.prototype.toString.call(S[T])==="[object Array]"){if(!C){C=[]}C.push(S[T])}break;case"function":r=S[T];break}}D()},G=function(){H=true;var S=Array.prototype.slice.call(arguments);B=S[0];for(var T=1,R=S.length;T<R;T++){switch(typeof S[T]){case"string":u=S[T];break;case"object":if(Object.prototype.toString.call(S[T])==="[object Array]"){if(!C){C=[]}C.push(S[T])}break;case"function":E=S[T];break}}D()};a5.SetNamespace(v);return{Enum:F,Static:P,Import:A,Extends:N,Mixin:Q,Mix:L,Implements:K,Class:J,Prototype:G,Interface:t}},o=function(C,x,F,t,A,J,M,r,E){if(A){if(x&&!x.isInterface()){return a5.ThrowError('Interface "'+C+'" cannot extend "'+x.namespace()+'", base class is not an interface.')}x=null}var s=function(){},y=J===false||false,N=false,B=false,I=null,H=C.lastIndexOf("."),u=H>-1?C.substring(0,H):"",D=H>-1?C.substring(H+1):C,w,z,v,O,L,G;if(!x||x===undefined){x=(C=="a5.Object"?s:a5.Object)}z=function(){};if(t){w=t.split(/[ |]/);for(L=0,G=w.length;L<G;L++){if(w[L]=="final"){y=true}else{if(w[L]=="singleton"){N=true}else{if(w[L]=="abstract"){B=true}}}}}if(a5.core.verifiers.checkNamespaceValid(C)){if(!x.isFinal||(x.isFinal()!=true)){if(x===Error){var K={};K.prototype=new x();z.prototype=K;K=null}else{z.prototype=new x()}I=x}else{return a5.ThrowError("Cannot extend "+x.namespace()+", class marked as final.")}}else{return a5.ThrowError("Cannot create new class in namespace "+C+", definition already exists.")}v=z.prototype;O=v.constructor=z;if(x.prototype.constructor._extenderRef){x.prototype.constructor._extenderRef.push(z)}O._a5_superclass=I;O._a5_pkg=u;O._a5_clsDef=F;O._a5_clsName=D;O._a5_namespace=C;O._a5_imports=M;O._a5_isFinal=y;O._a5_isAbstract=B;O._a5_isSingleton=N;O._a5_isInterface=A;O._a5_isPrototype=J||false;O._a5_attribs=E;O._mixinRef=x.prototype.constructor._mixinRef?x.prototype.constructor._mixinRef.slice(0):[];O._implementsRef=x.prototype.constructor._implementsRef?x.prototype.constructor._implementsRef.slice(0):[];O._a5_mixedMethods={};O._a5_instance=null;O._instanceCount=0;O._extenderRef=[];v._a5_initialized=false;for(a in a5.core.classProxyObj.construct){O[a]=a5.core.classProxyObj.construct[a]}if(x.namespace===undefined){for(a in a5.core.classProxyObj.instance){v[a]=a5.core.classProxyObj.instance[a]}}if(r){a5.core.mixins.applyMixins(v,r,M)}return a5.SetNamespace(C,z)},g=function(){var r=false,v,t;for(v=0;v<m.length;v++){var w=m[v].pkg,s=c(w.imports,w.pkg),u=a5.core.verifiers.validateClassDependencies(w.base,s,w.mixins,w.implement);if(u===true){d(w,true);m.splice(v,1);v--;r=true}else{m[v].reason=u.reason;m[v].reasonNM=u.reasonNM}}if(r){g()}},b=function(t){var s=t.obj,r=t.pkgObj;p(r.proto,s,s.prototype,s.imports(),s,true)},d=function(y,u){var r=function(){return c(y.imports,y.pkg)},s=(typeof y.base==="function")?y.base:a5.GetNamespace(y.base,r()),v=o(y.pkg+"."+y.clsName,s,y.cls,y.type,y.isInterface,y.isProto,r,y.mixins,y.attribs),z=u||false,C=true,w,t;if(y.staticMethods){y.staticMethods(v,r())}if(y.proto&&q){e.push({obj:v,pkgObj:y});if(y.implement){k.push({pkgObj:y,obj:v})}}else{if(y.proto){b({obj:v,pkgObj:y})}if(y.implement){C=a5.core.verifiers.validateImplementation(y,v)}}if(!C){return}if(y.enumDeclaration){var x=0,A=[];y.enumDeclaration({startIndex:function(D){x=D},addValue:function(D){A.push(D)}});for(w=0,t=A.length;w<t;w++){v[A[w]]=x++}v.addValue=function(D){if(v[D]===undefined){v[D]=x++}};v.getValue=function(D){for(a in v){if(v[a]===D){return a}}return null}}if(y.isInterface){v.interfaceVals={};if(y.base!==null&&y.base!==undefined){var B=a5.GetNamespace(y.base,v.imports());if(B.isInterface()){for(a in B.interfaceVals){if(v.interfaceVals[a]===undefined){v.interfaceVals[a]=B.interfaceVals[a]}}}else{a5.ThrowError(204,null,{objNM:v.namespace(),clsNM:B.namespace()})}}y.cls.call(v.interfaceVals,v.interfaceVals)}if(y.isMixin){v._mixinDef={Properties:function(D){v.prototype.constructor._a5_mixinProps=D},MustExtend:function(){v.prototype.constructor._a5_mixinMustExtend=arguments},MustMix:function(){v.prototype.constructor._a5_mixinMustMix=arguments}};y.cls.call(v._mixinDef,v._mixinDef,v.imports(),v);if(typeof v._mixinDef[v.className()]==="function"){v._a5_instanceConst=v._mixinDef[v.className()];delete v._mixinDef[v.className()]}else{a5.ThrowError(205,null,{nm:v.namespace()})}delete v._mixinDef.Properties;delete v._mixinDef.Contract;delete v._mixinDef.MustExtend;delete v._mixinDef.MustMix}if(!z){g()}},c=function(t,s,r){return(function(B,D){var y=function(){if(v.length){var G={},I=c(v,null,true),F=I.retObj,H=I.rebuildArray;for(a in y){G[a]=y[a]}for(a in F){if(G[a]===undefined){y[a]=G[a]=F[a]}}v=H;return G}else{return y}},u=r||false,v=[],A,x,C=function(F){var G;for(a in F){G=F[a];if((typeof G==="function"||typeof G==="object")&&y[a]===undefined){y[a]=G}}};if(D){C(a5.GetNamespace(D,null,true))}if(B){var E,D,w;for(A=0,x=B.length;A<x;A++){E=B[A],isWC=false,dotIndex=E.lastIndexOf(".");if(E.charAt(E.length-1)=="*"){isWC=true}if(isWC){D=a5.GetNamespace(E.substr(0,E.length-2),null,true);if(D){C(D)}v.push(E)}else{w=dotIndex>-1?E.substr(dotIndex+1):E;var z=a5.GetNamespace(E,null,true);if(z){if(y[w]===undefined){y[w]=z}}else{v.push(E)}}}}if(u){return{retObj:y,rebuildArray:v}}return y})(t,s)};a5.Create=h;a5.Package=j;a5._a5_processImports=c;a5._a5_verifyPackageQueueEmpty=function(){if(m.length){var t="",s,r;for(s=0,r=m.length;s<r;s++){t+='"'+m[s].pkg.pkg+"."+m[s].pkg.clsName+'", '+m[s].reason+' class missing: "'+m[s].reasonNM+'"'+(m.length>1&&s<m.length-1?", \n":"")}a5.ThrowError(206,null,{classPlural:m.length==1?"class":"classes",clsString:t})}};a5._a5_delayProtoCreation=function(r){q=r};a5._a5_createQueuedPrototypes=function(){for(var s=0,r=e.length;s<r;s++){b(e[s])}e=[];for(s=0,r=k.length;s<r;s++){a5.core.verifiers.validateImplementation(k[s].pkgObj,k[s].obj)}k=[]};a5.RegisterClassCreateHandler=function(r){f=r}});a5.SetNamespace("a5.core.classProxyObj",{construct:{classPackage:function(a){return a?a5.GetNamespace(this._a5_pkg,null,true):this._a5_pkg},className:function(){return this._a5_clsName},namespace:function(){return this._a5_namespace},imports:function(){return this._a5_imports()},doesImplement:function(a){return a5.core.verifiers.checkImplements(this,a)},doesExtend:function(a){return a5.core.verifiers.checkExtends(this,a)},doesMix:function(a){return a5.core.verifiers.checkMixes(this,a)},getAttributes:function(){return this._a5_attributes},instance:function(b,a){if(b===true){return this._a5_instance||a5.Create(this,a)}else{return this._a5_instance}},superclass:function(c,a){if(c!==undefined){if(typeof c==="object"&&c.isA5===true){if(typeof a!=="object"){a=[]}if(!this._a5_superclass.className){return a5.ThrowError(210)}var b=this._a5_superclass.prototype.constructor._a5_instanceConst;if(b){b.apply(c,a)}else{a5.ThrowError(211,null,{nm:this._a5_superclass.className()})}}else{a5.ThrowError(212,null,{nm:this.namespace()})}}else{return this._a5_superclass.prototype}},instanceCount:function(){return this._instanceCount},isInterface:function(){return this._a5_isInterface},isFinal:function(){return this._a5_isFinal},isSingleton:function(){return this._a5_isSingleton},isAbstract:function(){return this._a5_isAbstract},isPrototype:function(){return this._a5_isPrototype},isA5ClassDef:function(){return true},isA5:true},instance:{isA5:true,isA5ClassDef:function(){return false},getStatic:function(){return this.constructor},superclass:function(b,a){return this.constructor.superclass(b,a)},mixins:function(a){if(a!==undefined){return GetNamespace(a,this.imports())}else{return this.constructor._a5_mixedMethods}},mix:function(a){a5.core.mixins.applyMixins(this,a,this.imports(),this)},getAttributes:function(){return this.constructor.getAttributes()},getAttributeValue:function(a){return this.constructor.getAttributeValue(a)},getMethods:function(b,c){var a=[];for(var d in this){if((b||({}).hasOwnProperty.call(this,d))&&typeof(this[d])==="function"&&a5.core.classProxyObj.instance[d]===undefined&&d.substr(0,4)!=="_a5_"&&(c||d.substr(0,1)!=="_")){a.push(d)}}return a},getProperties:function(b,d){var a=[],c=function(j,k){var f=j;while(f!==null){var h=f.constructor;if(h._a5_protoProps!==undefined){var g={};h._a5_protoProps.call(g);if(g[k]!==undefined){return true}}f=h.superclass&&h.superclass().constructor.namespace?h.superclass():null}return false};for(var e in this){if((b||!c(this,e))&&typeof(this[e])!=="function"&&a5.core.classProxyObj.instance[e]===undefined&&e.substr(0,4)!=="_a5_"&&(d||e.substr(0,1)!=="_")){a.push(e)}}return a},classPackage:function(a){return this.constructor.classPackage(a)},className:function(){return this.constructor.className()},getClass:function(){return this.constructor},namespace:function(){return this.constructor.namespace()},doesImplement:function(a){return this.constructor.doesImplement(a)},doesExtend:function(a){return this.constructor.doesExtend(a)},doesMix:function(a){return this.constructor.doesMix(a)},imports:function(){return this.constructor.imports()},dealloc:function(){},instanceCount:function(){return this.constructor.instanceCount()},isInterface:function(){return this.constructor.isInterface()},isFinal:function(){return this.constructor.isFinal()},isSingleton:function(){return this.constructor.isSingleton()},isAbstract:function(){return this.constructor.isAbstract()},isPrototype:function(){return this.constructor.isAbstract()},instanceUID:function(){return this._a5_instanceUID},destroy:function(){if(this._a5_initialized===true){if((this.namespace()==="a5.cl.CL"||this.classPackage().indexOf("a5.cl.core")!==-1)&&!this.classPackage()==="a5.cl.core.viewDef"){a5.ThrowError(215,null,{nm:this.namespace()});return}this._a5_initialized=false;var e=this,g,c,a,h,d,b;while(e!==null){var f=e.constructor;a=f._mixinRef;if(a&&a.length){for(d=0,b=a.length;d<b;d++){if(a[d]._mixinDef.dealloc!=undefined){a[d]._mixinDef.dealloc.call(this)}}}if(f.namespace){c=f.superclass?f.superclass():null;if(c&&c.dealloc!==e.dealloc){e.dealloc.call(this)}e=c}else{e=null}}if(this.constructor._a5_instance===this){this.constructor._a5_instance=null}for(h in this){if(typeof this[h]=="function"){this[h]=a5._a5_destroyedObjFunc}else{this[h]=null;delete this[h]}}if(this.__proto__){this.__proto__=a5._a5_destroyedObj}}},_a5_initialize:function(g){if(!this._a5_initialized){if(this.constructor.isAbstract()&&this._a5_initialize.caller.caller!==Extend){return a5.ThrowError(216,null,{nm:this.constructor.namespace()})}this._a5_initialized=true;if(this.constructor.isSingleton()&&this.constructor._a5_instance!==null){return a5.ThrowError(217,null,{nm:this.constructor.namespace()})}this._a5_instanceUID=this.namespace().replace(/\./g,"_")+"__"+this.constructor.instanceCount();if(this.instanceCount()===0){this.constructor._a5_instance=this}this.constructor._instanceCount++;var j=this,a=this,c=g||[],k=[],e,d,b,f;this._a5_privatePropsRef={};if(typeof this.constructor._a5_instanceConst!=="function"){return a5.ThrowError(218,null,{clsName:this.className()})}while(a!==null){var h=a.constructor;if(h._a5_attribs){a5.core.attributes.applyClassAttribs(this,h._a5_attribs)}if(h._a5_protoPrivateProps!==undefined){this._a5_privatePropsRef[a.namespace()]={};h._a5_protoPrivateProps.call(this._a5_privatePropsRef[a.namespace()])}if(h._a5_protoProps!==undefined){k.unshift(h._a5_protoProps)}a=h.superclass&&h.superclass().constructor.namespace?h.superclass():null}a5.core.mixins.initializeMixins(this);for(d=0,b=k.length;d<b;d++){k[d].call(this)}this.constructor._a5_instanceConst.apply(this,c);a5.core.mixins.mixinsReady(this);return true}else{return null}},create:a5.Create,throwError:function(){return a5.ThrowError.apply(this,arguments)},assert:function(b,a){if(b!==true){throw this.create(a5.AssertException,[a])}}}});a5.SetNamespace("a5.core.verifiers",{namespaceArray:[],validateImplementation:function(k,d){var f,c,a,g,q,m,j,b=function(r,e){for(var s in r){if(r[s]!==e[s]){return false}}return true};for(f=0,c=k.implement.length;f<c;f++){g=k.implement[f];try{q=new d;q.Override={};q.Final={};q.Attributes=function(){var s=Array.prototype.slice.call(arguments);var u=s.pop();for(var t=0,r=s.length;t<r;t++){var e=s[t][0];if(e==="Contract"||e==="ContractAttribute"||e===a5.ContractAttribute){u.attributes=s[t]}}return u};m=a5.GetNamespace(g,d.imports());if(d._a5_clsDef){d._a5_clsDef.call(q,q,d.imports(),d)}}catch(h){throw h;return false}if(!m.isInterface()){return a5.ThrowError(213,null,{implNM:m.namespace(),objNM:d.namespace()})}for(a in m.interfaceVals){j=q[a]!==undefined;var p=m.interfaceVals[a],n=q[a];if(j&&typeof p==="object"&&n.attributes&&(n.attributes[0]==="Contract"||n.attributes[0]==="ContractAttribute"||n.attributes[0]===a5.ContractAttribute)){var o=true;for(var f=0,c=p.length;f<c;f++){o=o&&n.attributes.length>=(f+1)?b(p[f],n.attributes[f+1]):false}if(!o){return a5.ThrowError(601,null,{intNM:m.namespace(),implNM:d.namespace(),method:a})}}else{if(!j||(j&&typeof m.interfaceVals[a]!==typeof q[a])){return a5.ThrowError(214,null,{implNM:m.namespace(),objNM:d.namespace()})}}}d._implementsRef.push(m);q.destroy()}return true},checkNamespaceValid:function(c){for(var b=0,a=this.namespaceArray.length;b<a;b++){if(this.namespaceArray[b]==c){return false}}this.namespaceArray.push(c);return true},checkImplements:function(b,g){if(typeof g==="string"){g=a5.GetNamespace(g)}var f=b._implementsRef,e,d,c,a;while(f){for(e=0,a=f.length;e<a;e++){if(f[e]===g){return true}}f=b.superclass()?b.superclass().getStatic()._implementsRef:null}return false},checkExtends:function(a,d){var c=a._a5_superclass&&a._a5_superclass.prototype.className?a._a5_superclass:null;if(!c){return false}var b=(typeof d==="string")?a5.GetNamespace(d):d;if(!b){return false}while(c){if(c===b){return true}c=c._a5_superclass&&c._a5_superclass.prototype.className?c._a5_superclass:null}return false},checkMixes:function(b,d){if(typeof d==="string"){d=a5.GetNamespace(d)}if(!d){return false}for(var c=0,a=b._mixinRef.length;c<a;c++){if(b._mixinRef[c]===d){return true}}return false},validateClassDependencies:function(c,o,k,b,d,p){var n,h,j,g=null,a,e,q,f;if(c!==undefined){if(typeof c==="function"){g=c}else{g=a5.GetNamespace(c,o)}}n=true;if(c!==undefined&&!g){n=false;h="base";j=c}if(n&&k!==undefined){for(a in k){e=k[a];if(typeof e==="string"){q=a5.GetNamespace(e,o)}if(typeof q!=="function"){n=false;h="mixin";j=e}}}if(n&&b!==undefined){for(a in b){f=b[a];if(typeof f==="string"){q=a5.GetNamespace(f,o)}if(typeof q!=="function"){n=false;h="interface";j=f}}}return n?true:{reason:h,reasonNM:j}}});a5.SetNamespace("a5.core.mixins",{prepareMixins:function(f){var e=f,a=f.constructor._mixinRef,d,c,g,b;if(a.length){for(d=a.length-1,c=-1;d>c;d--){if(a[d]._a5_mixinMustExtend!==undefined){for(g in a[d]._a5_mixinMustExtend){b=a[d]._a5_mixinMustExtend[g];if(!f.doesExtend(a5.GetNamespace(b,f.imports()))){return a5.ThrowError(400,null,{mixinNM:a[d].namespace(),instNM:f.namespace(),clsNM:b.namespace()})}}}}}},initializeMixins:function(f){var e=f,a=f.constructor._mixinRef,d,c,g,b;if(a.length){for(d=a.length-1,c=-1;d>c;d--){if(a[d]._a5_mixinProps!==undefined){a[d]._a5_mixinProps.call(e)}}for(d=0,c=a.length;d<c;d++){a[d]._a5_instanceConst.call(e)}}},mixinsReady:function(e){var a=e.constructor._mixinRef,d,c,f,b;if(a.length){for(d=a.length-1,c=-1;d>c;d--){if(a[d]._a5_mixinMustMix!==undefined){for(f in a[d]._a5_mixinMustMix){b=a[d]._a5_mixinMustMix[f];if(!inst.doesMix(a5.GetNamespace(b))){return a5.ThrowError(401,null,{nm:a[d].namespace(),cls:b})}}}if(typeof a[d]._mixinDef.mixinReady==="function"){a[d]._mixinDef.mixinReady.call(e)}}}},applyMixins:function(n,m,b,h){var c={},m=typeof m==="string"?[m]:m,o=[],g,f,e,d,p;for(g=0,d=m.length;g<d;g++){p=a5.GetNamespace(m[g],typeof b==="function"?b():b);if(!p){return a5.ThrowError(404,null,{mixin:m[g]})}o.push(p);for(f=0,e=n.constructor._mixinRef.length;f<e;f++){if(n.constructor._mixinRef[f]===p){return a5.ThrowError(402,null,{nm:p.namespace()})}}for(var a in p._mixinDef){if(a!=="dealloc"&&a!=="Properties"&&a!=="mixinReady"&&a!=="MustExtend"&&a!=="Contract"){if(c[a]===undefined){if(h===undefined){n.constructor._a5_mixedMethods[a]=p._mixinDef[a]}n[a]=p._mixinDef[a];c[a]="mixed"}else{return a5.ThrowError(403,null,{method:a})}}}if(h){a5.core.mixins.initializeMixins(h,o,h)}else{n.constructor._mixinRef.push(p)}}}});a5.SetNamespace("a5.core.errorHandling",true,function(){var b=null;this.ThrowError=function(c,f,e){var d=typeof c,g;if(d==="string"){g=c}else{if(d==="number"){if(a5.GetNamespace("a5.ErrorDefinitions",null,true)){var g=a5.ErrorDefinitions[c];if(!g){g="Invalid error id "+c+" thrown: error not defined."}}else{g="Error id "+c+" thrown. Include a5.ErrorDefinitions for verbose information."}c=a5.Create(f||a5.Error,[g,a5.Error.FORCE_CAST_ERROR])}}if(g){c=a5.Create(f||a5.Error,[(e?a(g,e):g),a5.Error.FORCE_CAST_ERROR])}b=c;throw c};this._a5_getThrownError=function(){var c=b;b=null;return c};var a=function(d,c){for(var e in c){d=d.replace(new RegExp("{"+e+"}","g"),c[e])}return d}});a5.ThrowError=a5.core.errorHandling.ThrowError;a5._a5_getThrownError=a5.core.errorHandling._a5_getThrownError;a5.Package("a5").Prototype("Object",function(b,a){b.Object=function(){}});a5.Package("a5").Prototype("Attribute","singleton",function(c,a,b){c.Attribute=function(){}});a5.Package("a5").Extends("Attribute").Prototype("AspectAttribute",function(c,b,a){a.RETURN_NULL="_a5_aspectReturnsNull";a.SUCCESS="_a5_aspectSuccess";a.ASYNC="_a5_aspectAsync";a.FAILURE="_a5_aspectFailure";a.NOT_IMPLEMENTED="_a5_notImplemented";c.AspectAttribute=function(){c.superclass(this)};c.before=function(g,d,e,j,h,f){return a.NOT_IMPLEMENTED};c.after=function(h,e,f,k,j,g,d){return a.NOT_IMPLEMENTED};c.around=function(){return a.NOT_IMPLEMENTED}});a5.Package("a5").Class("AspectCallArguments",function(j,h,f){var a,d,c,g,k,e,b;j.AspectCallArguments=function(q,n,o,s,r,p,m){a=q;d=n;c=o;g=s;k=r;e=p;b=m};j.rules=function(){return a};j.args=function(){return d};j.scope=function(){return c};j.method=function(){return g};j.callback=function(){return k};j.callOriginator=function(){return e};j.beforeArgs=function(){return b}});a5.Package("a5").Extends("AspectAttribute").Class("ContractAttribute",function(b,a,e){b.ContractAttribute=function(){b.superclass(this)};b.Override.before=function(h){var j=null,k=false,g=function(m){m.message='Contract type failure on method "'+h.method().getName()+'" '+m.message;return m};if(h.rules().length>1){for(i=0,l=h.rules().length;i<l;i++){j=c(h.rules()[i],h.args());if(j instanceof a5.ContractException){b.throwError(g(j));return a5.AspectAttribute.FAILURE}if(j!==false){k=true;j.overloadID=i;break}}}else{k=true;j=c(h.rules()[0],h.args(),true);if(j instanceof a5.ContractException){b.throwError(g(j));return a5.AspectAttribute.FAILURE}}if(!k||j===false){b.throwError(g(b.create(a5.ContractException,["no matching overload found"])));return a5.AspectAttribute.FAILURE}else{return j}};var c=function(n,h){var m={},k=0,g,o,j;for(o in n){j=n[o];g=f((k<h.length?h[k]:undefined),j,k);if(g instanceof a5.ContractException){return g}m[o]=g;k++}if(h.length>k){return false}if(h.length===0){if(k===0){return m}return false}return m},f=function(h,n,o){var m="type",j=false,p=null,k,g;if(n.indexOf("=")!=-1){k=n.split("=");n=k[0];j=true;p=k[1]}else{if(j){return b.create(a5.ContractException,["for argument "+o+", required values cannot be defined after optional values"])}}if(n.indexOf(".")!==-1){m="class"}if(n==="array"){m="array"}if(n==="object"){m="object"}if(m!=="class"){n=n.toLowerCase()}if(h===undefined){if(j){h=d(n,m,p,o)}else{return b.create(a5.ContractException,["for argument "+o+', missing required argument of type "'+n+'"'])}}if(h!==undefined&&h!==null){switch(m){case"class":g=a5.GetNamespace(n);if(g.isInterface()){if(!(h.doesImplement(g))){return b.create(a5.ContractException,["for argument "+o+", must implement interface "+n])}}else{if(!(h instanceof g)){return b.create(a5.ContractException,["for argument "+o+", must be an instance of type "+n])}}break;case"type":if(h!==null&&typeof h!==n){return b.create(a5.ContractException,["for argument "+o+", must be of type "+n])}break;case"array":if(Object.prototype.toString.call(h)!=="[object Array]"){return b.create(a5.ContractException,["for argument "+o+", must be an array"])}break;case"object":if(h._a5_initialized!==undefined||typeof h!=="object"||h instanceof Array){return b.create(a5.ContractException,["for argument "+o+", must be a generic object"])}break}}return h},d=function(h,g,o,j){var n,m=false;if(h==="string"){var k=o.charAt(0);if(k===o.charAt(o.length-1)){if(k==='"'||k==="'"){n=o.substr(1,o.length-2)}else{m=true}}else{m=true}}else{if(h==="number"){if(!isNaN(o)){n=parseInt(o)}else{m=true}}else{if(g==="class"){if(o==="null"){n=null}else{m=true}}else{if(h==="boolean"||h==="array"||h==="function"||h==="object"){switch(o){case"{}":if(h==="object"){n={}}else{m=true}break;case"[]":if(h==="array"){n=[]}else{m=true}break;case"null":n=null;break;case"true":if(h==="boolean"){n=true}else{m=true}break;case"false":if(h==="boolean"){n=false}else{m=true}break;default:m=true}}else{m=true}}}}if(m){return b.create(a5.ContractException,["for argument "+j+', invalid default value for data type "'+h+'"'])}else{return n}}});a5.Package("a5").Extends("AspectAttribute").Class("PropertyMutatorAttribute",function(a){a.PropertyMutatorAttribute=function(){a.superclass(this)};a.Override.before=function(d){if(d.args().length){var b=d.rules()[0].validate,c=false;if(b){if(b.indexOf(".")!==-1){c=true;var b=a5.GetNamespace(b);if(!b){return a5.AspectAttribute.FAILURE}}var f=c?(d.args()[0] instanceof b):(typeof d.args()[0]===b);if(!f){return a5.AspectAttribute.FAILURE}}d.scope()[d.rules()[0].property]=d.args()[0];return a5.AspectAttribute.SUCCESS}var e=d.scope()[d.rules()[0].property]||null;return e===null||e===undefined?a5.AspectAttribute.RETURN_NULL:e};a.Override.after=function(b){if(b.beforeArgs().length){return b.scope()}else{return a5.AspectAttribute.SUCCESS}}});a5.Package("a5").Static(function(a){a.DESTROYED="Destroyed"}).Prototype("Event",function(a){this.Properties(function(){this._a5_type=null;this._a5_data=null;this._a5_target=null;this._a5_currentTarget=null;this._a5_phase=1;this._a5_bubbles=false;this._a5_canceled=false;this._a5_cancelPending=false;this._a5_shouldRetain=false});a.Event=function(c,b,d){this._a5_type=c;this._a5_data=d||null;this._a5_bubbles=b!==false};a.cancel=function(b){if(b===true){this._a5_cancelPending=true}else{this._a5_canceled=true}};a.target=function(){return this._a5_target};a.currentTarget=function(){return this._a5_currentTarget};a.type=function(){return this._a5_type};a.data=function(){return this._a5_data};a.phase=function(){return this._a5_phase};a.bubbles=function(){return this._a5_bubbles};a.shouldRetain=function(b){if(typeof b==="boolean"){this._a5_shouldRetain=b;return this}return this._a5_shouldRetain};a.dealloc=function(){this._a5_target=this._a5_currentTarget=null}});a5.Package("a5").Static("EventPhase",function(a){a.CAPTURING=1;a.AT_TARGET=2;a.BUBBLING=3});a5.Package("a5").Extends(Error).Prototype("Error",function(b,a,c){c.FORCE_CAST_ERROR="_a5_forceCastError";this.Properties(function(){this.stack=[];this.message="";this._a5_isWindowError=false;this.name=this.type=this.className()});b.Error=function(k,f){if(f===false){this._a5_isWindowError=true}if(typeof k==="string"){this.message=k}else{f=k}if(f instanceof c){if(f.stack){this.stack=f.stack.split("\n")}this.line=f.lineNumber;this.url=f.fileName;if(f.message&&this.message===""){this.message=f.message}}else{if(f!==false){try{__undefined__()}catch(m){if(m.stack){var d=m.stack.indexOf("@http")!==-1;this.stack=m.stack.split("\n");this.stack=this.stack.splice(4);if(d){for(var h=0;h<this.stack.length;h++){this.stack[h]=this.stack[h].substr(this.stack[h].indexOf("@http"))}}}else{var j=[];try{var h=0,g=this.init.caller.caller.caller;do{for(h=0,l=j.length;h<l;h++){if(j[h]===g){g=null}}if(g){if(g.toString().indexOf(c.FORCE_CAST_ERROR)===-1){this.stack.push(g.toString().replace(/;/g,";<br/>").replace(/{/g,"{<br/>").replace(/}/g,"}<br/>")+"<br/><br/>")}j.push(g);g=g.caller;h++}}while(g&&h<=50)}catch(m){}}}}}};b.isWindowError=function(){return this._a5_isWindowError};b.Override.toString=function(){return this.type+": "+this.message}});a5.Package("a5").Extends("Error").Prototype("AssertException",function(a){a.AssertException=function(){a.superclass(this,arguments);this.type="AssertException"}});a5.Package("a5").Extends("Error").Prototype("ContractException",function(a){a.ContractException=function(){a.superclass(this,arguments);this.type="ContractException"}});a5.Package("a5").Static(function(a){a.ADD="eventDispatcherAdd";a.REMOVE="eventDispatcherRemove"}).Prototype("EventDispatcher","abstract",function(c,a,b){this.Properties(function(){this._a5_autoPurge=false;this._a5_listeners={}});c.EventDispatcher=function(){};c.autoPurge=function(d){if(typeof d==="boolean"){this._a5_autoPurge=d;return this}return this._a5_autoPurge};c.addEventListener=function(f,g,d,e){this._a5_addEventListener(f,g,d,e)};c.addOneTimeEventListener=function(f,g,d,e){this._a5_addEventListener(f,g,d,e,true)};c.hasEventListener=function(o,d){var n=o.split("|"),p=this.cl(),k,g,f,h,e;for(k=0,g=n.length;k<g;k++){f=this._a5_getListenerArray(n[k]);if(f){for(h=0,e=f.length;h<e;h++){if(f[h].type==n[k]&&(typeof d==="function"?(f[h].method==d):true)){return true}}}}return false};c.removeEventListener=function(r,d,f,s,n){var q=r.split("|"),e=true,p,k,h,o,g;s=s||null;n=n||false;f=f===true;for(p=0,k=q.length;p<k;p++){h=this._a5_getListenerArray(q[p]);if(h){for(o=0,g=h.length;o<g;o++){if(h[o].method===d&&h[o].type===q[p]&&h[o].useCapture===f&&h[o].isOneTime===n){h.splice(o,1);g=h.length}}this.eListenersChange({type:q.length>1?q:q[0],method:d,useCapture:f,changeType:b.REMOVE})}}};c.removeAllListeners=function(){if(this._a5_listeners){this._a5_listeners={}}};c.getTotalListeners=function(e){if(typeof e==="string"){var d=this._a5_getListenerArray(e);if(d){return d.length}else{return 0}}else{var f=0;for(var g in this._a5_listeners){f+=this._a5_listeners[g].length}return f}};c.dispatchEvent=function(f,g,d){var h=this._a5_createEvent(f,g,d);h._a5_phase=a5.EventPhase.AT_TARGET;this._a5_dispatchEvent(h);if(!h.shouldRetain()){h.destroy()}h=null};c.eListenersChange=function(d){};c._a5_addEventListener=function(r,d,s,t,u){var v=t||null,q=r.split("|"),n=u||false,f=s===true,e=true,p,k,h,o,g;if(q.length!=0&&d!=undefined){for(p=0,k=q.length;p<k;p++){h=this._a5_getListenerArray(q[p],true);for(o=0,g=h.length;o<g;o++){if(h[o].method===d&&h[o].type===q[p]&&h[o].useCapture===f&&h[o].scope===v&&h[o].isOneTime===n){e=false;break}}if(e){h.push({type:q[p],method:d,scope:v,useCapture:f===true,isOneTime:n})}}this.eListenersChange({type:q.length>1?q:q[0],method:d,changeType:b.ADD})}else{throw"invalid listener: type- "+r+", method- "+d}};c._a5_createEvent=function(f,g,d){var h=(typeof f==="string")?a5.Create(a5.Event,[f,d]):f;if(h instanceof a5.Event||h.doesExtend&&h.doesExtend(a5.Error)){h._a5_target=this;if(g){h._a5_data=g}return h}throw"Invalid event type."};c._a5_dispatchEvent=function(j){j._a5_currentTarget=this;if(this._a5_listeners){var k=this._a5_getListenerArray(j.type()),g,d,f,h;if(k){for(g=0,d=k.length;g<d;g++){f=k?k[g]:null;if(j._a5_canceled||!f){return}h=(j.phase()===a5.EventPhase.CAPTURING&&f.useCapture)||(j.phase()!==a5.EventPhase.CAPTURING&&!f.useCapture),validListener=typeof f.method==="function"&&(f.scope&&f.scope.namespace?f.scope._a5_initialized:true);if(h&&validListener){f.method.call(f.scope,j)}if(f.isOneTime===true||(!validListener&&this._a5_autoPurge)){k.splice(g,1);g--;d--}}}}};c._a5_getListenerArray=function(e,d){if(this._a5_listeners[e]===undefined){if(d===true){this._a5_listeners[e]=[];return this._a5_listeners[e]}return null}return this._a5_listeners[e]};c.dealloc=function(){this.dispatchEvent(a5.Create(a5.Event,[a5.Event.DESTROYED]));this.removeAllListeners();this._a5_listeners=null}});a5.SetNamespace("a5.ErrorDefinitions",{100:'invalid namespace "{namespace}", namespaces must contain only letters, numbers, or periods.',101:"TrackWindowStrays must be called prior to GetWindowStrays.",200:'Invalid attempt to define new method "{prop}" in class "{namespace}", without calling override, method exists in superclass.',201:'Invalid attempt to override method "{prop}" in class "{namespace}", method marked as Final in superclass.',202:'Invalid attempt to override method "{prop}" in class "{namespace}", method not defined in superclass.',203:'Invalid attempt to override method "{prop}" in class "{namespace}", method marked as Final in superclass.',204:'Interface "{objNM}" cannot extend the non interface class "{clsNM}"',205:'Mixin "{nm}" doesn not specify a constructor.',206:"Class definitions not found for the following expected {classPlural}: \n {clsString}",207:"Error creating new class instance: cannot find object {className}.",208:"Cannot instantiate class {nm} , interfaces must be associated by the Implements directive.",209:"Error creating class instance {nm} ({errorStr})",210:"Superclass called on an object without a superclass.",211:'Constructor not defined on class "{nm}"',212:'invalid scope argument passed to superclass constructor on class "{nm}".',213:'Cannot implement "{implNM}" on class "{objNM}", class is not an interface.',214:'Invalid implementation of interface "{implNM}" , on class "{objNM}".',215:'Destroy called on core object "{nm}"',216:'Cannot directly instantiate class "{nm}", class marked as abstract.',217:'Cannot create new instance of class "{nm}", class marked as singleton already exists.',218:'Constructor not defined on class "{clsName}"',219:'Class "{currClass}" requires "{checkedClass}"',220:'Invalid attempt to define new method "{prop}" in class "{namespace}", without calling override, method exists in mixin.',300:'Invalid attribute definition: "Attributes" call must take a function as its last parameter.',301:"Invalid attribute definition: No attributes were defined.",302:"Attribute error: Attributes call accepts only arrays as attribute annotations.",303:"Attribute error: First parameter must be a reference to a class that extends a5.Attribute.",304:"Attribute error: invalid parameter specified for Attribute, params must be key/value pair objects.",305:"Attribute error: no parameters passed to Attribute call.",308:'Error processing attribute "{prop}", "{method}" must return a value.',400:'Mixin "{mixinNM}" requires mixing object "{instNM}" to extend class "{clsNM}" .',401:'Mixin "{nm}" requires owner class to mix "{cls}".',402:'Mixin "{nm}" already mixed into ancestor chain.',403:'Invalid mixin: Method "{method}" defined by more than one specified mixin.',404:'Invalid mixin: Mixin "{mixin}" does not exist.',601:"Invalid implementation of Contract on interace {intNM} in class {implNM} for method {method}."})(function(window,undefined){a5.SetNamespace("a5.cl",true,function(){var initializer=null,createCalled=false,createCallbacks=[];var instance=function(){return a5.cl.CL.instance()},CreateApplication=function(props,callback){if(!createCalled){createCalled=true;if(a5.cl.CLMain._extenderRef.length===0){var str="A5 CL requires a class that extends a5.cl.CLMain.";a5.cl.core.Utils.generateSystemHTMLTemplate(500,str,true);throw str}else{if(typeof props==="function"){callback=props;props=undefined}if(props===undefined){props={}}if(callback&&typeof callback==="function"){CreateCallback(callback)}var initializeComplete=function(){a5.Create(a5.cl.CL,[props,initializer]);var inst=a5.cl.instance();for(var i=0,l=createCallbacks.length;i<l;i++){createCallbacks[i](inst)}createCallbacks=null;if(initializer!==null){initializer.applicationInitialized(inst)}inst._cl_launch()};if(initializer!==null){initializer.initialize(initializeComplete)}else{initializeComplete()}return function(){return a5.cl.CL.instance()}}}else{throw"Error: a5.cl.CreateApplication can only be called once."}},RegisterInitializer=function(_initializer){if(initializer==null){initializer=_initializer}else{throw"initializer error"}},CreateCallback=function(callback){createCallbacks.push(callback)};return{instance:instance,CreateApplication:CreateApplication,RegisterInitializer:RegisterInitializer,CreateCallback:CreateCallback}});a5.Package("a5.cl").Extends("a5.EventDispatcher").Prototype("CLBase",function(proto){this.Properties(function(){this._cl_mvcName=null});proto.CLBase=function(){proto.superclass(this)};proto.cl=function(){return a5.cl.instance()};proto.getClassInstance=function(type,className){return this.cl()._core().instantiator().getClassInstance(type,className)};proto.log=function(value){var plgn=this.plugins().getRegisteredProcess("logger");if(plgn){return plgn.log.apply(this,arguments)}else{if("console" in window){console.log.apply(console,arguments)}}};proto.warn=function(value){var plgn=this.plugins().getRegisteredProcess("logger");if(plgn){return plgn.warn.apply(this,arguments)}else{if("console" in window){console.warn.apply(console,arguments)}}};proto.Override.throwError=function(error){proto.superclass().throwError(error,a5.cl.CLError)};proto.config=function(){return this.cl().config()};proto.plugins=function(){return this.cl().plugins()};proto.appParams=function(){return this.cl().appParams()}});a5.Package("a5.cl").Extends("a5.cl.CLBase").Prototype("CLInitializer",function(cls,im){cls.CLInitializer=function(){cls.superclass(this);a5.cl.RegisterInitializer(this)};cls.initialize=function(callback){throw"Classes extending CLInitializer must override initialize method without calling super."};cls.load=function(arr,complete,progress){return false};cls.applicationInitialized=function(inst){}});a5.Package("a5.cl").Extends("a5.Error").Prototype("CLError",function(proto,im){proto.CLError=function(){proto.superclass(this,arguments);this.type="CLError"}});a5.Package("a5.cl").Enum("CLLaunchState",function(cls){cls.addValue("APPLICATION_INITIALIZING");cls.addValue("DEPENDENCIES_LOADING");cls.addValue("DEPENDENCIES_LOADED");cls.addValue("AUTO_INSTANTIATION_COMPLETE");cls.addValue("PLUGINS_LOADED");cls.addValue("LAUNCH_INTERCEPTED");cls.addValue("APPLICATION_WILL_LAUNCH");cls.addValue("APPLICATION_LAUNCHED")});a5.Package("a5.cl").Extends("a5.Event").Static(function(CLEvent){CLEvent.ONLINE_STATUS_CHANGE="onlineStatusChange";CLEvent.ERROR_THROWN="errorThrown";CLEvent.APPLICATION_INITIALIZING="applicationInitializing";CLEvent.DEPENDENCIES_LOADING="dependenciesLoading";CLEvent.DEPENDENCIES_LOADED="dependenciesLoaded";CLEvent.AUTO_INSTANTIATION_COMPLETE="autoInstantiationComplete";CLEvent.PLUGINS_LOADED="pluginsLoaded";CLEvent.APPLICATION_PREPARED="applicationPrepared";CLEvent.LAUNCH_INTERCEPTED="launchIntercepted";CLEvent.APPLICATION_WILL_LAUNCH="applicationWillLaunch";CLEvent.APPLICATION_LAUNCHED="applicationLaunched";CLEvent.APPLICATION_WILL_CLOSE="applicationWillClose";CLEvent.APPLICATION_CLOSED="applicationClosed";CLEvent.WINDOW_RESIZED="windowResized";CLEvent.APPLICATION_WILL_RELAUNCH="applicationWillRelaunch";CLEvent.GLOBAL_UPDATE_TIMER_TICK="globalUpdateTimerTick";CLEvent.ASYNC_START="asyncStart";CLEvent.ASYNC_COMPLETE="asyncComplete";CLEvent.ORIENTATION_CHANGED="orientationChanged";CLEvent.CLIENT_ENVIRONMENT_UPDATED="clientEnvironmentUpdated";CLEvent.APPLICATION_ERROR="applicationError"}).Prototype("CLEvent",function(proto,im){proto.CLEvent=function(){proto.superclass(this,arguments)}});a5.Package("a5.cl.interfaces").Interface("IHTMLTemplate",function(cls){cls.populateTemplate=function(){}});a5.Package("a5.cl.interfaces").Interface("ILogger",function(cls){cls.log=function(){}});a5.Package("a5.cl.interfaces").Interface("IServiceURLRewriter",function(cls){cls.rewrite=function(){}});a5.Package("a5.cl.interfaces").Interface("ILaunchInterceptor",function(cls){cls.interceptLaunch=function(){}});a5.Package("a5.cl.interfaces").Interface("IDataCacheProvider",function(IDataCacheProvider){IDataCacheProvider.isAvailable=function(){};IDataCacheProvider.cacheExists=function(){};IDataCacheProvider.storeValue=function(){};IDataCacheProvider.getValue=function(){};IDataCacheProvider.clearValue=function(){};IDataCacheProvider.clearScopeValues=function(){}});a5.Package("a5.cl.interfaces").Interface("IBindableReceiver",function(cls){cls.receiveBindData=function(){}});a5.Package("a5.cl.core").Extends("a5.cl.CLBase").Class("PluginManager","singleton final",function(self){var plugins=[],addOns=[],processes={animation:null,htmlTemplate:null,serviceURLRewriter:null,logger:null,dataCacheProvider:null,launchInterceptor:null,presentationLayer:null};this.PluginManager=function(){self.superclass(this);self.plugins()["getRegisteredProcess"]=this.getRegisteredProcess};this.instantiatePlugins=function(){var classes=[],i,l,plugin,pi,cfg,obj;for(i=0,l=a5.cl.CLPlugin._extenderRef.length;i<l;i++){if(a5.cl.CLPlugin._extenderRef[i]!==a5.cl.CLAddon){classes.push(a5.cl.CLPlugin._extenderRef[i])}}for(i=0,l=a5.cl.CLAddon._extenderRef.length;i<l;i++){addOns.push(a5.cl.CLAddon._extenderRef[i]);classes.push(a5.cl.CLAddon._extenderRef[i])}for(i=0,l=classes.length;i<l;i++){plugin=classes[i];if(!plugin.isAbstract()){pi=plugin.instance(true);cfg=pi._cl_sourceConfig();obj=a5.cl.core.Utils.mergeObject(cfg||{},pi.configDefaults());pi._cl_isFinal=pi._cl_isSingleton=true;if(!a5.cl.core.Utils.testVersion(pi.requiredVersion())){throw'Error - plugin "'+plugin.className()+'" requires at least CL version '+pi.requiredVersion();return}if(pi.maxVerifiedVersion()&&!self.config().allowUntestedPlugins&&!a5.cl.core.Utils.testVersion(pi.maxVerifiedVersion(),true)){throw"Error - untested version";return}pi._cl_pluginConfig=obj;if(pi instanceof a5.cl.CLAddon){if(a5.cl.CLBase.prototype[plugin.className()]===undefined){a5.cl.CLBase.prototype[plugin.className()]=function(){var p=pi;return function(){return p}}()}}else{if(self.plugins()[plugin.className()]==undefined){self.plugins()[plugin.className()]=function(){var p=pi;return function(){return p}}()}}plugins.push(pi)}}for(var i=0,l=plugins.length;i<l;i++){var checkResult=checkRequires(plugins[i]);if(checkResult){throw'Error: plugin "'+plugins[i].className()+'" requires plugin "'+checkResult;return}plugins[i].initializePlugin()}a5.cl.PluginConfig=function(){self.throwError(self.create(a5.cl.CLError,["Invalid call to MVC pluginConfig method: method must be called prior to plugin load."]))}};this.defineRegisterableProcess=function(process){processes[process]=null};this.registerForProcess=function(type,instance){var val=processes[type];if(val===null){processes[type]=instance}else{if(val===undefined){self.redirect(500,"Error registering process for type '"+type+"', type does not exist.")}else{self.warn("Multiple plugins trying to register for process '"+type+"'.")}}};this.getRegisteredProcess=function(type){return processes[type]};this.processAddons=function(callback){var count=0,processAddon=function(){if(count>=addOns.length){callback();return}else{var addOn=addOns[count].instance(),isAsync=addOn.initializeAddOn()===true;count++;if(isAsync){addOn.addOneTimeEventListener(a5.cl.CLAddon.INITIALIZE_COMPLETE,processAddon)}else{processAddon()}}};processAddon()};var checkRequires=function(plugin){var r=plugin._cl_requires;for(var i=0,l=r.length;i<l;i++){if(!a5.GetNamespace(r[i],null,true)){return r[i]}}return false}});a5.Package("a5.cl.core").Import("a5.cl.CLEvent").Extends("a5.cl.CLBase").Class("Instantiator","singleton final",function(self,im){var applicationPackage,_applicationPackageInstance,namespaceArray=[["services",[a5.cl.CLService,a5.cl.CLSocket,a5.cl.CLAjax]]];this.Instantiator=function($applicationPackage){self.superclass(this);applicationPackage=$applicationPackage;_applicationPackageInstance=a5.SetNamespace(applicationPackage)};this.applicationPackage=function(returnString){if(returnString){return applicationPackage}else{return _applicationPackageInstance}};this.registerAutoInstantiate=function(name,clsArray){namespaceArray.push([name,clsArray])};this.Override.getClassInstance=function(type,className,instantiate){var instance=null,namespace=null;if(className.indexOf(".")!==-1){namespace=a5.GetNamespace(className)}else{namespace=getClassNamespace(type,className)}if(namespace){instance=namespace.instance(!!instantiate)}return instance};this.createClassInstance=function(clsName,type){var cls=getClassNamespace(type,clsName),instance,clsPath=null;if(cls){var clsInstance;clsInstance=(cls._a5_instance===null)?this.create(cls):cls.instance();clsInstance._cl_setMVCName(clsName);return clsInstance}else{return null}};this.instantiateConfiguration=function(){var retObj=a5.cl.CLMain._cl_storedCfgs.config;var plgnArray=a5.cl.CLMain._cl_storedCfgs.pluginConfigs;for(var i=0;i<plgnArray.length;i++){var obj={};var split=plgnArray[i].nm.split("."),lastObj=obj;for(var j=0;j<split.length;j++){lastObj=lastObj[split[j]]=j==split.length-1?plgnArray[i].obj:{}}retObj.plugins=a5.cl.core.Utils.mergeObject(retObj.plugins,obj)}return retObj};this.beginInstantiation=function(){for(var i=0,l=namespaceArray.length;i<l;i++){var liveNamespace=a5.GetNamespace(applicationPackage+"."+namespaceArray[i][0],null,true);if(liveNamespace&&typeof liveNamespace=="object"){for(var prop in liveNamespace){if(typeof liveNamespace[prop]==="function"){var instance=self.create(liveNamespace[prop]);liveNamespace[prop]._cl_isFinal=true;if(namespaceArray[i][0]==="domains"){instance._name=prop;liveNamespace[prop]._a5_isSingleton=true}else{instance._name=prop.substr(0,prop.toLowerCase().indexOf(namespaceArray[i][0].substr(0,namespaceArray[i][0].length-1)))}var isValid=false;for(var j=0,m=namespaceArray[i][1].length;j<m;j++){if(instance instanceof namespaceArray[i][1][j]){isValid=true}}if(!isValid){self.redirect(500,"Error instantiating "+namespaceArray[i][0]+" class "+instance.namespace()+", must extend "+namespaceArray[i][1].namespace())}}}}}self.cl().dispatchEvent(im.CLEvent.AUTO_INSTANTIATION_COMPLETE)};this.createConfig=function(userConfig){return userConfig?a5.cl.core.Utils.mergeObject(userConfig,a5.cl.CLConfig):a5.cl.CLConfig};var getClassNamespace=function(type,clsName){return a5.GetNamespace(applicationPackage+"."+type.toLowerCase()+"s."+clsName+(type=="domain"?"":(type.substr(0,1).toUpperCase()+type.substr(1))))}});a5.SetNamespace("a5.cl.CLConfig",{allowUntestedPlugins:false,applicationBuild:null,appName:"",applicationPackage:"",applicationViewPath:"views/",breakOnDestroyedMethods:false,cacheBreak:false,cacheEnabled:true,cacheTypes:[],clientEnvironment:null,clientEnvironments:{},clientEnvironmentOverrides:false,defaultRenderTarget:null,dependencies:[],environment:"DEVELOPMENT",environments:{},faviconPath:"",forceIE7:true,globalUpdateTimerInterval:10,hashDelimiter:"#!",mobileWidthThreshold:768,persistORMData:false,plugins:{},requestDefaultContentType:"application/json",requestDefaultMethod:"POST",rootController:null,rootViewDef:null,rootWindow:null,schemaBuild:0,silentIncludes:false,staggerDependencies:true,titleDelimiter:": ",trapErrors:false,viewDependencies:[],workersPath:null,workersIncludes:[],xhrDependencies:false});a5.Package("a5.cl.core").Static("Utils",function(Utils){Utils.trim=function(str){if(!str){return str}return str.replace(/(^\s+)|(\s+$)/g,"").replace(/\s{2,}/," ")};Utils.mergeObject=function(mergeObj,sourceObj,$setSourceObj){var setSourceObj=$setSourceObj||false,retObj,prop;if(mergeObj==null){return sourceObj}if(sourceObj==null){return mergeObj}function recursiveMerge(sourceObj,mergeObj){for(prop in mergeObj){if(prop!=="prototype"&&prop!=="constructor"){if(sourceObj[prop]!==undefined&&sourceObj[prop]!==null&&sourceObj[prop]!==sourceObj){if(typeof sourceObj[prop]==="object"){if(Object.prototype.toString.call(sourceObj[prop])==="[object Array]"){if(Object.prototype.toString.call(mergeObj[prop])==="[object Array]"){sourceObj[prop]=sourceObj[prop].concat(mergeObj[prop])}}else{sourceObj[prop]=recursiveMerge(sourceObj[prop],mergeObj[prop])}}else{sourceObj[prop]=mergeObj[prop]}}else{sourceObj[prop]=mergeObj[prop]}}}return sourceObj}retObj=recursiveMerge(sourceObj,mergeObj);if(setSourceObj){sourceObj=retObj}return retObj};Utils.deepClone=function(obj){if(typeof obj!=="object"||obj==null){return obj}var c=Utils.isArray(obj)?[]:{};for(var i in obj){var value=obj[i];if(typeof value=="object"){if(Utils.isArray(value)){c[i]=[];for(var j=0,l=value.length;j<l;j++){if(typeof value[j]!="object"){c[i].push(value[j])}else{c[i].push(Utils.deepClone(value[j]))}}}else{c[i]=Utils.deepClone(value)}}else{c[i]=value}}return c};Utils.initialCap=function(str){return str.substr(0,1).toUpperCase()+str.substr(1)};Utils.validateHexColor=function(color){return/^#(([a-fA-F0-9]){3}){1,2}$/.test(color)};Utils.expandHexColor=function(color){if(a5.cl.core.Utils.validateHexColor(color)){if(color.length===4){return"#"+color.substr(1,1)+color.substr(1,1)+color.substr(2,1)+color.substr(2,1)+color.substr(3,1)+color.substr(3,1)}else{return color}}else{return"#000000"}};Utils.arrayIndexOf=function(array,value){for(var x=0,y=array.length;x<y;x++){if(array[x]===value){return x}}return -1};Utils.arrayContains=function(array,value){return Utils.arrayIndexOf(array,value)!==-1};Utils.isArray=function(array){return Object.prototype.toString.call(array)==="[object Array]"};Utils.testVersion=function(val,isMax){var parseVersionString=function(val){val=val.split(".");return{major:parseInt(val[0])||0,minor:parseInt(val[1])||0,build:parseInt(val[2])||0}};isMax=isMax||false;var versionVal=parseVersionString(a5.version()),testVal=parseVersionString(String(val));if(versionVal.major!==testVal.major){return isMax?(versionVal.major<testVal.major):(versionVal.major>testVal.major)}else{if(versionVal.minor!==testVal.minor){return isMax?(versionVal.minor<testVal.minor):(versionVal.minor>testVal.minor)}else{if(versionVal.build!==testVal.build){return isMax?(versionVal.build<testVal.build):(versionVal.build>testVal.build)}else{return true}}}};Utils.viewInStack=function(view){var appView=a5.cl.mvc.core.AppViewContainer.instance();while(view){if(view===appView){return true}view=view.parentView()}return false}});a5.Package("a5.cl.core").Import("a5.cl.CLEvent").Extends("a5.cl.CLBase").Class("RequestManager","final",function(self,im){var defaultContentType,defaultMethod,reqArray,asyncRunning=false,reqCount;this.RequestManager=function(){self.superclass(this,arguments);reqArray=[];reqCount=0;defaultContentType=self.config().requestDefaultContentType;defaultMethod=self.config().requestDefaultMethod};this.asyncRunning=function(){return asyncRunning};this.processItem=function(props,reqID){var req;try{var reqComplete=function($req){if(getPropsForID(reqID)){var req=this;if(req.readyState==4){var response,retData,status=req.status;if(status!==500){if(props.isJson){response=req.responseText;if(a5.cl.core.Utils.trim(response)!==""){try{response=a5.cl.core.JSON.parse(response);retData=(props.dataProp&&props.dataProp!==undefined)?response[props.dataProp]:response}catch(e){status=500;retData="Error parsing JSON response from url: "+props.url+"\nresponse: "+response}}}else{if(props.isXML&&req.responseXML){response=req.responseXML}else{response=req.responseText}}if(retData===undefined){retData=response}}if(status==200||(status==0)){self.success(reqID,retData)}else{self.onError(reqID,status,retData||req.responseText)}self.reqComplete(reqID)}}},updateProgress=function(e){self.updateProgress(reqID,e)},onError=function(e){self.onError(reqID,req.status,e)},createAppend=function(data,isGet){var retString=isGet?"?":"";for(var prop in data){retString+=prop+"="+data[prop]+"&"}return retString.substr(0,retString.length-1)},contentType=null;req=XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("MSXML2.XMLHTTP.3.0");if(req!==undefined){var method=props.method||defaultMethod,data=props.data||null,urlAppend=method=="GET"?createAppend(props.data,true):"";if(data){if(props.formData===true){contentType="multipart/form-data";var fd=new FormData();for(var prop in data){fd.append(prop,data[prop])}data=fd}else{if(props.isJson){data=a5.cl.core.JSON.stringify(data)}else{contentType="application/x-www-form-urlencoded";data=createAppend(data,false)}}}if(contentType===null){contentType=defaultContentType}if(props.contentType){contentType=props.contentType}props.isJson=props.isJson!==undefined?props.isJson:(contentType&&contentType.toLowerCase().indexOf("json")!=-1?true:false);props.isXML=(!props.isJson&&contentType.toLowerCase().indexOf("xml"))!=-1?true:false;props.charSet=props.charSet||null;if(req.addEventListener!=undefined){req.addEventListener("progress",updateProgress,false)}if(XMLHttpRequest){req.onerror=onError}req.onreadystatechange=reqComplete;req.open(method,props.url+urlAppend,true);if(props.formData!==true){req.setRequestHeader("Content-type",contentType)}if(props.charSet){req.setRequestHeader("charset",props.charSet)}req.send(data)}else{if(props.error){props.error("client does not support XMLHTTPRequests")}}}catch(e){req=null;self.throwError(e)}};this.abortRequest=function(id){for(var i=0;i<reqArray.length;i++){if(reqArray[i].id===id){reqArray[i].abort();reqArray.splice(i,1);return}}self.redirect(500,"Cannot abort request; invalid identifier sent to abortRequest method.")};this.makeRequest=function(props){if((reqArray.length===0||isSilent())&&props.silent!==true){asyncRunning=true;self.cl().dispatchEvent(im.CLEvent.ASYNC_START)}var reqID=reqCount++;props.url=a5.cl.core.Utils.makeAbsolutePath(props.url);var obj={props:props,id:reqID,abort:function(){self.abortRequest(this.id)}};reqArray.push(obj);self.processItem(props,reqID);return obj};this.success=function(id,data){var props=getPropsForID(id);if(props.success){props.success.call(self,data)}};this.reqComplete=function(id){unqueueItem(id);if(reqArray.length===0||checkSilentReq()){asyncRunning=false;self.cl().dispatchEvent(im.CLEvent.ASYNC_COMPLETE)}};this.updateProgress=function(id,e){var props=getPropsForID(id);if(props.progress){props.progress.call(self,e)}};this.onError=function(id,status,errorObj){if(status!=200&&status!=0){var props=getPropsForID(id);if(props&&props.error){props.error.call(self,status,errorObj)}else{this.throwError(errorObj)}}};var checkSilentReq=function(){for(var i=0,l=reqArray.length;i<l;i++){if(reqArray[i].props.silent!==true){return false}}return true};var getPropsForID=function(id){for(var i=0,l=reqArray.length;i<l;i++){if(reqArray[i].id==id){return reqArray[i].props}}};var unqueueItem=function(value){var isNumber=typeof value=="number";for(var i=0,l=reqArray.length;i<l;i++){if((isNumber&&reqArray[i].id==value)||reqArray[i]==value){reqArray.splice(i,1);return}}};var isSilent=function(){for(var i=0,l=reqArray.length;i<l;i++){if(reqArray[i].props.silent===true){return true}}return false}});a5.cl.core.JSON=function(){var self=this;var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;var init=function(){if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}};var stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){a5.cl.instance().redirect(500,"JSON stringify error.")}return str("",{"":value})};var parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}a5.cl.instance().redirect(500,new SyntaxError("JSON.parse"))};var f=function(n){return n<10?"0"+n:n};function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}init();return{stringify:stringify,parse:parse}}();a5.Package("a5.cl.core").Static(function(DataCache){DataCache.enabled=function(){return DataCache.instance().enabled()};DataCache.cacheExists=function(){return DataCache.instance().cacheExists()};DataCache.isAvailable=function(){return DataCache.instance().isAvailable()};DataCache.storeValue=function(key,value){return DataCache.instance().storeValue(key,value)};DataCache.getValue=function(key){return DataCache.instance().getValue(key)};DataCache.clearValue=function(key){return DataCache.instance().clearValue(key)};DataCache.clearScopeValues=function(scope,exceptions){return DataCache.instance().clearScopeValues(scope,exceptions)};DataCache.validateCacheKeyPrefix=function(key){return DataCache.instance().validateCacheKeyPrefix(key)};DataCache.removeCacheKeyPrefix=function(key){return DataCache.instance().removeCacheKeyPrefix(key)}}).Extends("a5.cl.CLBase").Class("DataCache","singleton final",function(self,im){var _enabled,cacheKeys,provider;this.DataCache=function(){self.superclass(this);_enabled=a5.cl.instance().config().cacheEnabled;cacheKeys=[]};this.enabled=function(){return _enabled};this.isAvailable=function(){getCacheProvider().isAvailable()};this.cacheExists=function(){return getCacheProvider().cacheExists()};this.storeValue=function(key,value){if(self.isAvailable()&&checkCacheKey(key)){return getCacheProvider().storeValue(key)}else{return false}};this.getValue=function(key){if(self.isAvailable()&&checkCacheKey(key)){return getCacheProvider().getValue(key)}};this.clearValue=function(key){if(self.isAvailable()&&checkCacheKey(key)){return getCacheProvider().clearValue(key)}};this.clearScopeValues=function(scope,$exceptions){return getCacheProvider().clearScopeValues(scope,$exceptions)};this.validateCacheKeyPrefix=function(key){for(var i=0,l=cacheKeys.length;i<l;i++){if(cacheKeys[i]==key){return false}}cacheKeys.push(key);return true};this.removeCacheKeyPrefix=function(key){for(var i=0,l=cacheKeys.length;i<l;i++){if(cacheKeys[i]==key){cacheKeys.splice(i,1);return}}};var checkCacheKey=function(key){var isInCache=false;for(var i=0,l=cacheKeys.length;i<l;i++){if(key.substr(cacheKeys[i])!=-1){isInCache=true;break}}return isInCache};var getCacheProvider=function(){if(!provider){provider=self.plugins().getRegisteredProcess("dataCacheProvider")}return provider}});a5.Package("a5.cl.core").Import("a5.cl.CLEvent").Extends("a5.cl.CLBase").Class("GlobalUpdateTimer","singleton final",function(self,im){var timer,clInstance,interval,evtInstance=a5.Create(im.CLEvent,[im.CLEvent.GLOBAL_UPDATE_TIMER_TICK]);this.GlobalUpdateTimer=function(){self.superclass(this);interval=self.config().globalUpdateTimerInterval;clInstance=self.cl();evtInstance.shouldRetain(true)};this.startTimer=function(){if(!timer){timer=setInterval(update,interval)}};this.stopTimer=function(){this._cl_killTimer()};var update=function(){clInstance.dispatchEvent(evtInstance)};this._cl_killTimer=function(){if(timer){clearInterval(timer);timer=null}}});a5.Package("a5.cl.core").Import("a5.cl.CLEvent","a5.cl.CLLaunchState").Extends("a5.cl.CLBase").Class("Core","singleton final",function(self,im){var _cache,_requestManager,_globalUpdateTimer,_instantiator,_pluginManager,_launchState;this.Core=function($applicationPackage){self.superclass(this);_instantiator=self.create(a5.cl.core.Instantiator,[$applicationPackage])};this.instantiator=function(){return _instantiator};this.cache=function(){return _cache};this.requestManager=function(){return _requestManager};this.pluginManager=function(){return _pluginManager};this.globalUpdateTimer=function(){return _globalUpdateTimer};this.launchState=function(){return _launchState};this.relaunch=function(){self.cl().dispatchEvent(im.CLEvent.APPLICATION_WILL_RELAUNCH);window.location.reload()};this.initializeCore=function($environment,$clientEnvironment){updateLaunchStatus("APPLICATION_INITIALIZING");_globalUpdateTimer=self.create(a5.cl.core.GlobalUpdateTimer);_requestManager=self.create(a5.cl.core.RequestManager);_pluginManager=self.create(a5.cl.core.PluginManager);_cache=self.create(a5.cl.core.DataCache);var loadPaths=self.config().dependencies;if(loadPaths.length){if(self.cl().initializer()){var implemented=self.cl().initializer().load(loadPaths,dependenciesLoaded,function(e){updateLaunchStatus("DEPENDENCIES_LOADING",e)});if(implemented==false){dependenciesLoaded()}}else{dependenciesLoaded()}}else{dependenciesLoaded()}};var dependenciesLoaded=function(){updateLaunchStatus("DEPENDENCIES_LOADED");_pluginManager.instantiatePlugins();updateLaunchStatus("PLUGINS_LOADED");updateLaunchStatus("APPLICATION_PREPARED");_instantiator.beginInstantiation();var plgn=_pluginManager.getRegisteredProcess("launchInterceptor");if(plgn){var intercept=plgn.interceptLaunch(launchApplication);if(intercept){updateLaunchStatus("LAUNCH_INTERCEPTED",{interceptor:plgn})}else{launchApplication()}}else{launchApplication()}};var launchApplication=function(){_pluginManager.processAddons(addOnsLoaded)};var addOnsLoaded=function(){updateLaunchStatus("APPLICATION_WILL_LAUNCH");updateLaunchStatus("APPLICATION_LAUNCHED")};var updateLaunchStatus=function(type,e){_launchState=im.CLLaunchState[type];self.cl().dispatchEvent(im.CLEvent[type],e)}});a5.Package("a5.cl.mixins").Import("a5.cl.core.DataCache").Mixin("DataStore",function(proto,im,DataStore){this.Properties(function(){this._cl_cacheKeyValidated=false;this._cl_prefix=null;this._cl_validatedPrefix=null});proto.DataStore=function(){};proto.cacheExists=function(){return im.DataCache.cacheExists()};proto.storeValue=function(key,value){if(im.DataCache.isAvailable()&&value!==undefined){return im.DataCache.storeValue(this._cl_createCacheKey(key),value)}else{return false}};proto.keyPrefix=function(value){if(typeof value==="string"){this._cl_prefix=value;return this}return this._cl_prefix};proto.getValue=function(key){if(im.DataCache.isAvailable()){return im.DataCache.getValue(this._cl_createCacheKey(key))}else{return false}};proto.clearValue=function(key){if(im.DataCache.isAvailable()){return im.DataCache.clearValue(this._cl_createCacheKey(key))}else{return false}};proto.clearScopeValues=function(exceptions){if(im.DataCache.isAvailable()){im.DataCache.clearScopeValues(this.instanceUID(),exceptions)}else{return false}};proto._cl_createCacheKey=function(key){if(!this._cl_cacheKeyValidated||!this._cl_validatedPrefix){var prefix=(this._cl_prefix||(this.id?this.id():false)||this.instanceUID());this._cl_cacheKeyValidated=im.DataCache.validateCacheKeyPrefix(prefix);if(!this._cl_cacheKeyValidated){a5.ThrowError("Error: Duplicate cache key prefix: "+prefix);return}this._cl_validatedPrefix=prefix}return this._cl_validatedPrefix+"_"+key};proto.dealloc=function(){im.DataCache.removeCacheKeyPrefix(this._cl_validatedPrefix)}});a5.Package("a5.cl.mixins").Mixin("BindableSource",function(mixin,im){this.Properties(function(){this._cl_receivers=null;this._cl_bindParamType=null;this._cl_bindParamRequired=false;this._cl_bindParamCallback=null});mixin.BindableSource=function(){this._cl_receivers=[]};mixin.bindParamProps=function(type,required,callback){this._cl_bindParamType=type;if(required!==undefined){this._cl_bindParamRequired=required}if(callback!==undefined){this._cl_bindParamCallback=callback}return this};mixin.bindParamType=function(){return this._cl_bindParamType};mixin.bindParamRequired=function(){return this._cl_bindParamRequired};mixin.notifyReceivers=function(data,params){for(var i=0,l=this._cl_receivers.length;i<l;i++){var r=this._cl_receivers[i];if(params===undefined||params===r.params){if(this._cl_bindParamRequired||(!data&&this._cl_bindParamCallback!==null)){data=this._cl_bindParamCallback.call(this,r.params)}if(data!==null&&data!==undefined){r.receiver.receiveBindData.call(r.scope||r.receiver,this._cl_modifyBindData(data,r.mapping))}}}};mixin._cl_attachReceiver=function(receiver,params,mapping,scope){this._cl_receivers.push({receiver:receiver,params:params,mapping:mapping,scope:scope});this.notifyReceivers()};mixin._cl_detachReceiver=function(receiver){for(var i=0,l=this._cl_receivers.length;i<l;i++){var r=this._cl_receivers[i];if(r.receiver===receiver){this._cl_receivers.splice(i,1);break}}};mixin._cl_modifyBindData=function(dataSource,mapping){var data,isQuery=false;if(dataSource instanceof a5.cl.CLQueryResult){isQuery=true}if(isQuery){data=dataSource._cl_data}else{data=dataSource}if(mapping){var dataSet=[],skipProps={};for(var i=0,l=data.length;i<l;i++){var dataRow={};for(var prop in mapping){dataRow[prop]=data[i][mapping[prop]];skipProps[mapping[prop]]=prop}for(var prop in data[i]){if(skipProps[prop]===undefined){dataRow[prop]=data[i][prop]}}dataSet.push(dataRow)}if(isQuery){dataSource._cl_data=dataSet;return dataSource}else{return dataSet}}else{return dataSource}}});a5.Package("a5.cl.mixins").Mixin("Binder",function(mixin,im){this.Properties(function(){this._cl_bindingsConnected=true;this._cl_bindings=[]});mixin.Binder=function(){this._cl_bindings=[]};mixin.setBindingEnabled=function(value){if(value!==this._cl_bindingsConnected){for(var i=0,l=this._cl_bindings.length;i<l;i++){var b=this._cl_bindings[i];if(b.persist!==true){if(value){b.source._cl_attachReceiver(b.receiver,b.params,b.mapping,b.scope)}else{b.source._cl_detachReceiver(b.receiver)}}}this._cl_bindingsConnected=value}};mixin.bindingsConnected=function(){return this._cl_bindingsConnected};mixin.bind=function(source,receiver,params,mapping,scope,persist){if(!this._cl_checkBindExists(source,receiver,params)){if(source.isA5ClassDef()){source=source.instance()}if(!source.doesMix("a5.cl.mixins.BindableSource")){return this.throwError('source "'+source.className()+'" of bind call must mix a5.cl.mixins.BindableSource.')}if(receiver.isA5ClassDef()){receiver=receiver.instance()}if(!receiver.doesImplement("a5.cl.interfaces.IBindableReceiver")){return this.throwError('receiver "'+receiver.className()+'" of call bind must implement a5.cl.interfaces.IBindableReceiver.')}var hasParams=params!==undefined&&params!==null,isNM=false,pType=null;if(source.bindParamRequired()||params){var isValid=true;if(!hasParams){isValid=false}else{if(source.bindParamType()!==null){pType=source.bindParamType();if(typeof pType==="string"&&pType.indexOf(".")!==-1){pType=a5.GetNamespace(pType)}if(pType.namespace){isNM=true;var nmObj=pType.namespace();if(!(params instanceof pType)){isValid=false}}else{if(typeof params!==source.bindParamType()){isValid=false}}}}if(!isValid){this.throwError('params required for binding source "'+source.namespace()+'"'+(pType!==null?' must be of type "'+(isNM?pType.namespace():pType)+'"':""));return}}this._cl_bindings.push({source:source,scope:scope,receiver:receiver,mapping:mapping,params:params,persist:persist});if(this.bindingsConnected()){source._cl_attachReceiver(receiver,params,mapping,scope)}}};mixin.unbind=function(source,receiver){var found=false;for(var i=0,l=this._cl_bindings.length;i<l;i++){var obj=this._cl_bindings[i];if(obj.source===source&&obj.receiver===receiver){this._cl_bindings.splice(i,1);found=true;break}}if(found){source._cl_detachReceiver(receiver)}else{this.throwError('cannot unbind source "'+source.namespace()+'" on controller "'+this.namespace()+'", binding does not exist.')}};mixin._cl_checkBindExists=function(source,receiver,params){for(var i=0,l=this._cl_bindings.length;i<l;i++){var b=this._cl_bindings[i];if(b.source===source&&b.receiver===receiver&&b.params===params){return true}}return false}});a5.Package("a5.cl").Extends("CLBase").Prototype("CLService","abstract",function(proto,im){this.Properties(function(){this._cl_url=null;this._cl_isJson=true});proto.CLService=function(url){proto.superclass(this);this._cl_url=url};proto.url=function(){var plgn=this.plugins().getRegisteredProcess("serviceURLRewriter");if(plgn){return plgn.rewrite(this._cl_url)}return this._cl_url};proto.isJson=function(value){if(value!==undefined){this._cl_isJson=value}return this._cl_isJson}});a5.Package("a5.cl").Extends("a5.Attribute").Class("SerializableAttribute","abstract",function(cls){cls.SerializableAttribute=function(){}});a5.Package("a5.cl").Import("a5.cl.core.JSON").Extends("CLService").Static(function(CLSocket){CLSocket.supportsSockets=function(){return"WebSocket" in window?true:false}}).Prototype("CLSocket","abstract",function(proto,im,CLSocket){this.Properties(function(){this._cl_socket=null;this._cl_socketOnMessage=null});proto.CLSocket=function(url){proto.superclass(this,[url]);if(CLSocket.supportsSockets()){this._cl_socket=new WebSocket(url);var self=this;this._cl_socketOnMessage=function(e){var data=self.isJson()?im.JSON.parse(e.data):e.data;self.dataReceived(data)}}};proto.send=function(m,callback){if(CLSocket.supportsSockets()){var self=this;self._cl_socket.onmessage=self._cl_socketOnMessage;var sendMsg=function(){self._cl_socket.onopen=null;if(callback){self._cl_socket.onmessage=function(e){var data=self.isJson()?a5.cl.core.JSON.parse(e.data):e.data;callback(data);self._cl_socket.onmessage=self._cl_socketOnMessage}}self._cl_socket.send(m);return null};switch(this._cl_socket.readyState){case 0:this._cl_socket.onopen=sendMsg;break;case 1:sendMsg();break;case 2:this._cl_socket.onopen=sendMsg;this._cl_socket.connect();break}}else{throw"Error sending data to socket "+this.mvcName()+", Web Sockets are not supported in this browser."}};proto.dataReceived=function(data){};proto.close=function(){if(this._cl_socket){this._cl_socket.close()}};proto.dealloc=function(){if(this._cl_socket&&this._cl_socket.readyState===2){this.close()}}});a5.Package("a5.cl").Extends("CLService").Mix("a5.cl.mixins.BindableSource").Prototype("CLAjax","abstract",function(proto,im){this.Properties(function(){this._cl_ajaxStruct=null;this._cl_silent=false});proto.CLAjax=function(url,props){proto.superclass(this,[url]);this._cl_ajaxStruct=props};proto.call=function(m,data,callback,props){var callObj=this._cl_ajaxStruct?a5.cl.core.Utils.deepClone(this._cl_ajaxStruct):{};if(props){for(var prop in callObj){if(props[prop]==undefined){props[prop]=callObj[prop]}}}else{props=callObj}if(data){if(data.isA5Class){props.data=a5.Attribute.processInstance(data)}props.data=data}props.isJson=this.isJson();props.success=callback;if(this._cl_silent){props.silent=true}if(m){if(this.url().indexOf("?")==-1&&m.charAt(0)!=="/"){m="/"+m}}else{m=""}props.url=this.url()+m;return a5.cl.core.RequestManager.instance().makeRequest(props)};proto.abort=function(id){return a5.cl.core.RequestManager.instance().abort(id)};proto.silent=function(value){if(typeof value==="boolean"){this._cl_silent=value;return this}return this._cl_silent}});a5.Package("a5.cl").Extends("a5.AspectAttribute").Static(function(AjaxCallAttribute){AjaxCallAttribute.CANCEL_CYCLE="ajaxCallAttributeCancelCycle"}).Class("AjaxCallAttribute",function(cls,im,AjaxCallAttribute){var cycledCalls={},data={};cls.AjaxCallAttribute=function(){cls.superclass(this)};cls.Override.before=function(aspectArgs){var data=null,args=aspectArgs.args()?Array.prototype.slice.call(aspectArgs.args()):[];argsCallback=null,rules=aspectArgs.rules().length?aspectArgs.rules()[0]:{},propObj=null;if(rules.takesData===true&&args.length){data=args.shift()}if(rules.props){propObj=rules.props}if(rules.hasErrorCallback){if(!propObj){propObj={}}propObj.error=args.pop()}if(rules.hasCallback===true&&args.length&&typeof args[0]==="function"){argsCallback=args.shift()}var executeCall=function(){if(rules.cacheResponse&&getData(aspectArgs.method())){setTimeout(function(){args.unshift(getData(aspectArgs.method()));if(argsCallback){argsCallback(args)}aspectArgs.callback()(args)},0)}else{aspectArgs.scope().call(aspectArgs.method().getName(),data,function(response){if(rules.cacheResponse){storeData(aspectArgs.method(),response)}args.unshift(response);if(argsCallback){argsCallback(args)}aspectArgs.callback()(args)},propObj)}};if(args[0]===AjaxCallAttribute.CANCEL_CYCLE){if(aspectArgs.method()._cl_cycleID){clearInterval(aspectArgs.method()._cl_cycleID);delete aspectArgs.method()._cl_cycleID}return a5.Attribute.ASYNC}if(rules.cycle){if(!aspectArgs.method()._cl_cycleID){aspectArgs.method()._cl_cycleID=setInterval(function(){aspectArgs.method().apply(aspectArgs.scope(),args)},rules.cycle);executeCall()}else{executeCall()}}else{executeCall()}return a5.Attribute.ASYNC};var getData=function(method){return data[method.getClassInstance().instanceUID()+"_"+method.getName()]};var storeData=function(method,value){data[method.getClassInstance().instanceUID()+"_"+method.getName()]=value}});a5.Package("a5.cl").Extends("a5.AspectAttribute").Class("BoundAjaxReturnAttribute",function(cls){cls.BoundAjaxReturnAttribute=function(){cls.superclass(this)};cls.Override.before=function(aspectArgs){if(aspectArgs.rules().length&&aspectArgs.rules()[0].receiverMethod!==undefined){aspectArgs.rules()[0].receiverMethod.call(null,aspectArgs.args()[0])}else{aspectArgs.scope().notifyReceivers(aspectArgs.args()[0],aspectArgs.method().getName())}return a5.AspectAttribute.SUCCESS}});a5.Package("a5.cl").Extends("CLBase").Prototype("CLPlugin","abstract",function(proto,im){this.Properties(function(){this._cl_pluginConfig=null;this._cl_configDefaults={};this._cl_requiredVersion="0";this._cl_maxVerifiedVersion=null;this._cl_requires=[]});proto.CLPlugin=function(){proto.superclass(this)};proto.pluginConfig=function(){return this._cl_pluginConfig};proto.requires=function(val){this._cl_requires.push(val)};proto.requiredVersion=function(value){if(value!==undefined){this._cl_requiredVersion=value}return this._cl_requiredVersion};proto.maxVerifiedVersion=function(value){if(value!==undefined){this._cl_maxVerifiedVersion=value}return this._cl_maxVerifiedVersion};proto.configDefaults=function(value){if(value!==undefined){this._cl_configDefaults=value}return this._cl_configDefaults};proto.initializePlugin=function(){};proto.registerForProcess=function(type){this.cl()._core().pluginManager().registerForProcess(type,this)};proto._cl_sourceConfig=function(){var cfg=a5.cl.CLMain._cl_storedCfgs.pluginConfigs;var pkg=this.classPackage();if(String(pkg[pkg.length-1]).toLowerCase()!=this.className().toLowerCase()){pkg=pkg+"."+this.constructor.className()}for(var prop in cfg){var pluginCfg=cfg[prop];if(pluginCfg.nm&&(pluginCfg.nm===pkg||pluginCfg.nm===this.constructor.className())){return pluginCfg.obj}}return{}}});a5.Package("a5.cl").Extends("CLPlugin").Prototype("CLAddon","abstract",function(proto,im,CLAddon){CLAddon.INITIALIZE_COMPLETE="clAddonInitializeComplete";proto.CLAddon=function(){proto.superclass(this)};proto.getCreateParams=function(){return a5.cl.instance()._cl_createParams()};proto.initializeAddOn=function(){return false};proto.createMainConfigMethod=function(type){a5.cl.CLMain.prototype["set"+type.substr(0,1).toUpperCase()+type.substr(1)]=function(){a5.cl.CLMain._cl_storedCfgs[type]=Array.prototype.slice.call(arguments)}};proto.getMainConfigProps=function(type){return a5.cl.CLMain._cl_storedCfgs[type]};proto.registerAutoInstantiate=function(){a5.cl.core.Instantiator.instance().registerAutoInstantiate.apply(null,arguments)};proto.defineRegisterableProcess=function(process){this.cl()._core().pluginManager().defineRegisterableProcess(process)}});a5.Package("a5.cl").Extends("CLBase").Mix("a5.cl.mixins.Binder").Class("CL","singleton",function(self,im){var _params,_config,_initializer,_main,core;this._cl_plugins={};this.CL=function(params,initializer){self.superclass(this);_params={};if(a5.cl.CLMain._extenderRef.length){_main=self.create(a5.cl.CLMain._extenderRef[0],[params])}_params.applicationPackage=_main.classPackage();_initializer=initializer;core=self.create(a5.cl.core.Core,[_params.applicationPackage]);_config=a5.cl.core.Utils.mergeObject(core.instantiator().instantiateConfiguration(),_params);_config=core.instantiator().createConfig(_config);if(_config.breakOnDestroyedMethods==true){a5._a5_destroyedObjFunc=function(){}}};this._cl_launch=function(){core.initializeCore((_params.environment||null),(_params.clientEnvironment||null))};this.initializer=function(){return _initializer};this.launchState=function(){return core.launchState()};this.applicationPackage=function(){return core.instantiator().applicationPackage.apply(this,arguments)};this.Override.appParams=function(){return a5.cl.CLMain._cl_storedCfgs.appParams};this.Override.config=function(){return _config};this.Override.plugins=function(){return this._cl_plugins};this.relaunch=function(){core.relaunch()};this._core=function(){return core};this.asyncRunning=function(){return core.requestManager().asyncRunning()};this._cl_createParams=function(){return _params};this.Override.eListenersChange=function(e){var ev=a5.cl.CLEvent.GLOBAL_UPDATE_TIMER_TICK;if(e.type===ev){if(this.getTotalListeners(ev)>0){core.globalUpdateTimer().startTimer()}else{core.globalUpdateTimer().stopTimer()}}}});a5.Package("a5.cl").Extends("CLBase").Static(function(CLMain){CLMain._cl_storedCfgs={config:[],appParams:{},pluginConfigs:[]}}).Prototype("CLMain","abstract",function(proto,im,CLMain){proto.CLMain=function(){proto.superclass(this);if(CLMain._extenderRef.length>1){return proto.throwError(proto.create(a5.cl.CLError,['Invalid class "'+this.namespace()+'", a5.cl.CLMain must only be extended by one subclass.']))}if(this.getStatic().instanceCount()>1){return proto.throwError(proto.create(a5.cl.CLError,['Invalid duplicate instance of a5.cl.CLMain subclass "'+this.getStatic().namespace()+'"']))}proto.cl().addOneTimeEventListener(im.CLEvent.APPLICATION_WILL_RELAUNCH,this.applicationWillRelaunch);proto.cl().addEventListener(im.CLEvent.ONLINE_STATUS_CHANGE,this.onlineStatusChanged);proto.cl().addOneTimeEventListener(im.CLEvent.APPLICATION_CLOSED,this.applicationClosed);proto.cl().addOneTimeEventListener(im.CLEvent.DEPENDENCIES_LOADED,this.dependenciesLoaded);proto.cl().addOneTimeEventListener(im.CLEvent.PLUGINS_LOADED,this.pluginsLoaded);proto.cl().addOneTimeEventListener(im.CLEvent.AUTO_INSTANTIATION_COMPLETE,this.autoInstantiationComplete);proto.cl().addOneTimeEventListener(im.CLEvent.APPLICATION_WILL_LAUNCH,this.applicationWillLaunch);proto.cl().addOneTimeEventListener(im.CLEvent.APPLICATION_LAUNCHED,this.applicationLaunched)};proto.setAppParams=function(obj){CLMain._cl_storedCfgs.appParams=obj};proto.setConfig=function(obj){CLMain._cl_storedCfgs.config=obj};proto.setPluginConfig=function(namespace,obj){CLMain._cl_storedCfgs.pluginConfigs.push({nm:namespace,obj:obj})};proto.dependenciesLoaded=function(){};proto.pluginsLoaded=function(){};proto.onlineStatusChanged=function(isOnline){};proto.autoInstantiationComplete=function(){};proto.applicationWillLaunch=function(){};proto.applicationLaunched=function(){};proto.applicationWillClose=function(){};proto.applicationClosed=function(){};proto.applicationWillRelaunch=function(){}})})(this);