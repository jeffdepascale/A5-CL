(function(b){var g=null,k=null,n=(function(){return !this})(),a=function(t,r,q,u){var p=this,q=q||0,s=this.isA5,o=setTimeout(function(){if(!s||p._a5_initialized){var v=t.apply(p,r||[]);if(u){u.call(p,v)}}},q);return{cancel:function(){clearTimeout(o)}}},c=function(s,v,q,u,p,r){var x=this,w=this.isA5,o=0,u=u||0,t=setInterval(function(){if(!w||x._a5_initialized){var y=s.apply(x,v||[]);if(p){p.call(x,y)}o++;if(o==u){clearInterval(t);if(r){r.call(x,y)}}}},q);return{cancel:function(){clearInterval(t)}}},f=function(q,o,s){var v,t,r,p;if(!q){return null}s=s||false;if(typeof q==="object"){return q}v=q.split(".");p=b;if(v.length===1&&o&&o[q]){return o[q]}for(t=0,r=v.length;t<r;t++){p=p[v[t]];if(p===undefined){if(k){try{var w=k(q,o);if(w){return w}}catch(u){return null}}else{return null}}}if(s||p.namespace!==undefined){return p}return null},e=function(p,t,s){var v=typeof t==="boolean",r=v?t:false,u,o=(v?s:t)||{},u=p.split("."),w=u.pop(),q;if(!p.match(/^[A-Za-z0-9.]*$/)){return a5.ThrowError(100,null,{namespace:p})}q=u.length?d(u):b;if(q[w]!==undefined){return q[w]}return q[w]=r?new o():o},d=function(r){var q=b,p,o;for(p=0,o=r.length;p<o;p++){if(!q[r[p]]){q[r[p]]={}}q=q[r[p]]}return q},h=function(){g={};for(var o in b){g[o]=""}},j=function(o){if(!g){a5.ThrowError(101)}else{var q=[],p;for(p in b){if(g[p]===undefined){q.push(p)}}if(o===true){h()}return q}};b.a5={Version:function(){return"0.5.{BUILD_NUMBER}"},GetNamespace:f,SetNamespace:e,ES5:n,Async:a,Cycle:c,TrackGlobalStrays:h,GetGlobalStrays:j,RegisterNamespaceResolver:function(o){k=o},CreateGlobals:function(){b.Create=a5.Create;b.Async=a5.Async;b.Cycle=a5.Cycle;b.Package=a5.Package;b.GetNamespace=a5.GetNamespace;b.SetNamespace=a5.SetNamespace}};a5.SetNamespace("a5.core.reflection",true,function(){var o={getName:function(){return this._a5_methodName},getClass:function(){return this._a5_ownerClass},getClassInstance:function(){return this._a5_ownerInstance},getAttributes:function(){return this._a5_attributes?this._a5_attributes:null}},p=function(q,s,t,r){r=r||s[t];r._a5_ownerInstance=s;r._a5_ownerClass=q;r._a5_methodName=t;r.getName=o.getName;r.getClass=o.getClass;r.getClassInstance=o.getClassInstance;r.getAttributes=o.getAttributes};return{setReflection:p}});a5.SetNamespace("a5.core.attributes",true,function(){var r=function(v,x){var B=Array.prototype.slice.call(x),y,K,J,I,H,C,z={},s=false;if(!B.length){return a5.ThrowError(305)}y=typeof B[B.length-1]==="function"?B.pop():null;if(y!==null&&typeof y!=="function"){return a5.ThrowError(300)}if(!B.length){return a5.ThrowError(301)}for(K=0,H=B.length;K<H;K++){var A=B[K];if(Object.prototype.toString.call(A)!=="[object Array]"){return a5.ThrowError(302)}for(J=0,I=A.length;J<I;J++){var F=A[J],C=typeof F;if(J==0){var L=false,G=null;if(C!=="string"){if(C==="function"){G=F}else{L=true}}else{var w=a5.GetNamespace(F,v.imports());if(!w){w=a5.GetNamespace(F+"Attribute",v.imports())}if(w){G=A[J]=w}else{L=true}}if(!L&&(!G.isA5||!G.doesExtend(a5.Attribute))){L=true}else{if(!L&&G.doesExtend(a5.AspectAttribute)){s=true}}if(L){return a5.ThrowError(303)}}else{if(C!=="object"||Object.prototype.toString.call(F)==="[object Array]"){return a5.ThrowError(304)}}}}for(K=0,H=B.length;K<H;K++){var u=B[K],E=[];for(var J=1,I=u.length;J<I;J++){E.push(u[J])}B[K]=[u[0],E];z[u[0].className()]=E}if(!s){if(!y){y=function(){}}y._a5_attributes=z;return y}z.wrappedMethod=y;var D=function(){var M,W=[],S=this,Q=0;if(y){for(var M in D){y[M]=D[M]}}for(var P=0,O=B.length;P<O;P++){var V=B[P][0],U=V.instance(true),T=B[P][1];W.push({cls:U,props:T})}var R=function(Z,Y,X){N(Q,Z,Y,X)},N=function(Y,ad,af,Z){if(ad){if(Object.prototype.toString.call(ad)!=="[object Array]"){ad=[ad]}}else{ad=[]}if(!Z){Z=ad}if(Y>=W.length){if(af){return ad[0]}else{return t(ad,Z)}}var ac,af=af||false,ab=false,aa=false,ae=function(ag){R.call(this,ag||ad,af,Z)};var X=new a5.AspectCallArguments(W[Y].props,ad,S,D,ae,Z);ac=W[Y].cls.around(X);if(ac===a5.AspectAttribute.NOT_IMPLEMENTED){ac=W[Y].cls[(af?"after":"before")](X)}else{ab=true}if(ac!==null&&ac!==undefined){switch(ac){case a5.AspectAttribute.NOT_IMPLEMENTED:case a5.AspectAttribute.SUCCESS:ac=ad;break;case a5.AspectAttribute.ASYNC:aa=true;break;case a5.AspectAttribute.RETURN_NULL:ac=null;break;case a5.AspectAttribute.FAILURE:return}}else{return a5.ThrowError(308,null,{prop:M,method:ab?"around":(af?"after":"before")})}Q=Y+1;if(!aa){return N(Q,ac,af,ad,Z)}},t=function(Y,X){Q=0;var Z=y?y.apply(S,Y):undefined;if(Z!==undefined){Z=[Z]}else{Z=Y}return N(0,Z,true,X)};return N(Q,Array.prototype.slice.call(arguments))};D._a5_attributes=z;return D},q=function(){for(i=0,l=a5.Attribute._extenderRef.length;i<l;i++){new a5.Attribute._extenderRef[i]()}},o=function(A,y){var z=y.split("|");for(var w=0,u=z.length;w<u;w++){var s=z[w],t=s.charAt(0)==="*",B=s.charAt(s.length-1)==="*",x=A.indexOf(s),v=x!==-1;if(v){return true}if(t&&A.indexOf(s.substr(1))===0){return true}if(B&&A.indexOf(s.substr(0,s.length-1))>-1){return true}}return false},p=function(I,u){var w=I.getMethods(),G=Array.prototype.slice;for(var D=0,x=w.length;D<x;D++){var H=w[D],s=I[H],v=[];for(var B=0,y=u.length;B<y;B++){var F=G.call(u[B]);if(F.length>1){var C=F[F.length-1],t=false,A=true,z=C.include,E=C.exclude;if(z!==undefined){t=true;if(typeof z==="object"){A=H.match(z).length>0}else{A=o(H,z)}}if(E!==undefined){t=true;if(typeof E==="object"){A=H.match(E)}else{A=o(H,E)}}if(t){F.pop()}if(A){v.push(F)}}else{v.push(F)}}if(v.length){v.push(s);I[H]=a5.core.attributes.createAttribute(I,v);a5.core.reflection.setReflection(I.constructor,I,H,I[H])}}};return{createAttribute:r,applyClassAttribs:p}});a5.SetNamespace("a5.core.classBuilder",true,function(){var H=[],z=false,D=[],r=[],s,q="_a5_constructFromCreate",w="_a5_baseConstruct",p="_a5_interfaceTest",B={},G=function(J,I){var K,L;if(typeof J==="string"){K=a5.GetNamespace(J);if(K===null){return a5.ThrowError(207,null,{className:J})}}else{K=J}if(typeof K!=="function"){return a5.ThrowError(207,null,{className:J})}return new K(q,I)},u=function(K,N,O){var M,J,L=K.replace(/\./g,"_");if(B[L]){var I=B[L];for(var M=0,J=I.length;M<J;M++){if(!I[M][N]){I[M][N]=O}}}if(B[L+"_"+N]){var I=B[L+"_"+N];for(M=0,J=I.length;M<J;M++){if(!I[M][N]){I[M][N]=O}}delete B[L+"_"+N]}},E=function(I,L,N,J,K,M){if(M){L.Properties=function(O){N.constructor._a5_protoProps=O}}L.Attributes=function(){return a5.core.attributes.createAttribute.call(N,L,arguments)};N.Override={};N.Final={};I.call(L,N,J,K);a5.core.mixins.prepareMixins(N);y(N);delete L.Attributes;if(M){delete L.Properties}delete N.Final;delete N.Override;for(s in N){if(({}).hasOwnProperty.call(N,s)&&typeof N[s]==="function"&&(K._a5_namespace==="a5.Object"||a5.core.classProxyObj.instance[s]===undefined)){if(s===N.className()){N.constructor._a5_instanceConst=N[s];a5.core.reflection.setReflection(K,N,s,N.constructor._a5_instanceConst);delete N[s]}else{a5.core.reflection.setReflection(K,N,s)}}}},y=function(K){var L=K.superclass(),I=K.constructor._a5_mixedMethods;if(!L){L={}}for(s in K){if(K.hasOwnProperty(s)&&typeof K[s]==="function"){if(s!=="Final"&&s!=="Override"&&s!=="constructor"&&s!=="prototype"&&s!=="dealloc"&&s!=="_a5_initialized"){if(L[s]&&L[s].toString().indexOf("[native code]")===-1){if(L[s].Final==true){return a5.ThrowError(201,null,{prop:s,namespace:K.namespace()})}return a5.ThrowError(200,null,{prop:s,namespace:K.namespace()})}else{var J=I[s];if(I[s]!==undefined&&J!==K[s]){return a5.ThrowError(220,null,{prop:s,namespace:K.namespace()})}}}}}K.constructor._a5_superMethods={};for(s in K.Override){if(L[s]===undefined&&I[s]===undefined){return a5.ThrowError(202,null,{prop:s,namespace:K.namespace()})}if(L[s]&&L[s].Final!==undefined&&L[s].Final===true||I[s]&&I[s].Final!==undefined&&I[s].Final===true){return a5.ThrowError(203,null,{prop:s,namespace:K.namespace()})}K[s]=K.Override[s];K.constructor._a5_superMethods[s]=(function(M){return function(){var N=[].slice.call(arguments,1),O=this;return function(){return M.apply(O,N)}}})(L[s])}for(s in K.Final){K[s]=K.Final[s];K[s].Final=true}},F=function(M){var af,S,I,N,L,V,P,J,T=null,O=false,ad=false,Q=false,Z=false,Y=false,U=function(){var aj={pkg:M,imports:C(af,M),clsName:S,cls:I,base:N,attribs:T,type:L,proto:V,implement:P,mixins:J,staticMethods:O,isInterface:Q,isMixin:ad,enumDeclaration:Z,isProto:Y},ai=a5.core.verifiers.validateClassDependencies(N,aj.imports,J,P,Q,ad);if(ai===true){o(aj)}else{H.push({pkg:aj,reason:ai.reason,reasonNM:ai.reasonNM})}U=R=ae=ab=ag=K=aa=X=ah=ac=W=null},R=function(){af=Array.prototype.slice.call(arguments);return{Prototype:X,Static:ag,Mixin:ah,Mix:ac,Extends:ae,Implements:ab,Interface:K,Class:aa}},ae=function(ai){N=ai;return{Prototype:X,Static:ag,Import:R,Mix:ac,Implements:ab,Interface:K,Class:aa}},ac=function(){J=Array.prototype.slice.call(arguments);return{Prototype:X,Static:ag,Extends:ae,Implements:ab,Interface:K,Class:aa}},ab=function(ai){P=Array.prototype.slice.call(arguments);return{Prototype:X,Static:ag,Mix:ac,Import:R,Extends:ae,Class:aa}},ag=function(ai,aj){if(typeof ai==="string"){S=ai;O=aj;U()}else{O=ai;return{Prototype:X,Implements:ab,Mix:ac,Mixin:ah,Import:R,Extends:ae,Class:aa}}},K=function(aj,ai){S=aj;I=ai;Q=true;U()},ah=function(){ad=true;var aj=Array.prototype.slice.call(arguments);S=aj[0];for(var ak=1,ai=aj.length;ak<ai;ak++){switch(typeof aj[ak]){case"string":L=aj[ak];break;case"object":if(Object.prototype.toString.call(aj[ak])==="[object Array]"){if(!T){T=[]}T.push(aj[ak])}break;case"function":I=aj[ak];break}}U()},W=function(ai,aj){S=ai;Z=aj;U()},aa=function(){var aj=Array.prototype.slice.call(arguments);S=aj[0];for(var ak=1,ai=aj.length;ak<ai;ak++){switch(typeof aj[ak]){case"string":L=aj[ak];break;case"object":if(Object.prototype.toString.call(aj[ak])==="[object Array]"){if(!T){T=[]}T.push(aj[ak])}break;case"function":I=aj[ak];break}}U()},X=function(){Y=true;var aj=Array.prototype.slice.call(arguments);S=aj[0];for(var ak=1,ai=aj.length;ak<ai;ak++){switch(typeof aj[ak]){case"string":L=aj[ak];break;case"object":if(Object.prototype.toString.call(aj[ak])==="[object Array]"){if(!T){T=[]}T.push(aj[ak])}break;case"function":V=aj[ak];break}}U()};a5.SetNamespace(M);return{Enum:W,Static:ag,Import:R,Extends:ae,Mixin:ah,Mix:ac,Implements:ab,Class:aa,Prototype:X,Interface:K}},A=function(P,J){if(!this._a5_initialized){if(this.constructor.isInterface()){return a5.ThrowError(208,null,{nm:ref.namespace()})}if(this.constructor.isAbstract()){return a5.ThrowError(216,null,{nm:this.constructor.namespace()})}if(this.constructor.isSingleton()&&this.constructor._a5_instance!==null){return a5.ThrowError(217,null,{nm:this.constructor.namespace()})}var R=this,I=this,L=P||[],S=[],N,M,K,O;this._a5_initialized=true;this._a5_instanceUID=this.namespace().replace(/\./g,"_")+"__"+this.constructor.instanceCount();if(this.instanceCount()===0){this.constructor._a5_instance=this}this.constructor._instanceCount++;var R=this,I=this,L=P||[],S=[],N,M,K,O;(function(T){T.Super=function(){if(!T.constructor._a5_superclass.className){return a5.ThrowError(210)}var V=T.constructor._a5_superclass.prototype.constructor._a5_instanceConst;if(V){V.apply(T,arguments)}else{a5.ThrowError(211,null,{nm:T.constructor._a5_superclass.className()})}};for(var U in T.constructor._a5_superMethods){T.Super[U]=T.constructor._a5_superMethods[U].call(T)}})(this);if(typeof this.constructor._a5_instanceConst!=="function"){return a5.ThrowError(218,null,{clsName:this.className()})}while(I!==null){var Q=I.constructor;if(Q._a5_attribs){a5.core.attributes.applyClassAttribs(this,Q._a5_attribs)}if(Q._a5_protoProps!==undefined){S.unshift(Q._a5_protoProps)}I=Q.superclass&&Q.superclass().constructor.namespace?Q.superclass():null}a5.core.mixins.initializeMixins(this);for(M=0,K=S.length;M<K;M++){S[M].call(this)}if(P==q){this.constructor._a5_instanceConst.apply(this,J||[])}else{this.constructor._a5_instanceConst.apply(this,arguments)}a5.core.mixins.mixinsReady(this)}},x=function(T,O,W,K,R,aa,ad,I,V){if(R){if(O&&!O.isInterface()){return a5.ThrowError('Interface "'+T+'" cannot extend "'+O.namespace()+'", base class is not an interface.')}O=null}var J=function(){},P=aa===false||false,ae=false,S=false,Z=null,Y=T.lastIndexOf("."),L=Y>-1?T.substring(0,Y):"",U=Y>-1?T.substring(Y+1):T,N,Q,M,af,ac,X;if(!O||O===undefined){O=(T=="a5.Object"?J:a5.Object)}Q=function(ah,ai){var ag=this;if(this.constructor._a5_clsDef){E(this.constructor._a5_clsDef,this,this,this.constructor.imports(),this.constructor)}if(ah!==p&&ah!==w){A.apply(this,arguments)}};if(K){N=K.split(/[ |]/);for(ac=0,X=N.length;ac<X;ac++){if(N[ac]=="final"){P=true}else{if(N[ac]=="singleton"){ae=true}else{if(N[ac]=="abstract"){S=true}}}}}if(a5.core.verifiers.checkNamespaceValid(T)){if(!O.isFinal||(O.isFinal()!=true)){if(O===Error){var ab={};ab.prototype=new O();Q.prototype=ab;ab=null}else{Q.prototype=new O(w)}Z=O}else{return a5.ThrowError("Cannot extend "+O.namespace()+", class marked as final.")}}else{return a5.ThrowError("Cannot create new class in namespace "+T+", definition already exists.")}M=Q.prototype;af=M.constructor=Q;if(O.prototype.constructor._extenderRef){O.prototype.constructor._extenderRef.push(Q)}af._a5_superclass=Z;af._a5_pkg=L;af._a5_clsDef=W;af._a5_clsName=U;af._a5_namespace=T;af._a5_imports=ad;af._a5_isFinal=P;af._a5_isAbstract=S;af._a5_isSingleton=ae;af._a5_isInterface=R;af._a5_isPrototype=aa||false;af._a5_attribs=V;af._mixinRef=O.prototype.constructor._mixinRef?O.prototype.constructor._mixinRef.slice(0):[];af._implementsRef=O.prototype.constructor._implementsRef?O.prototype.constructor._implementsRef.slice(0):[];af._a5_mixedMethods={};af._a5_instance=null;af._instanceCount=0;af._extenderRef=[];M._a5_initialized=false;for(s in a5.core.classProxyObj.construct){af[s]=a5.core.classProxyObj.construct[s]}if(O.namespace===undefined){for(s in a5.core.classProxyObj.instance){M[s]=a5.core.classProxyObj.instance[s]}}if(I){a5.core.mixins.applyMixins(M,I,ad)}return a5.SetNamespace(T,Q)},t=function(){var I=false,L,J;for(L=0;L<H.length;L++){var M=H[L].pkg,K=a5.core.verifiers.validateClassDependencies(M.base,M.imports,M.mixins,M.implement);if(K===true){o(M,true);H.splice(L,1);L--;I=true}else{H[L].reason=K.reason;H[L].reasonNM=K.reasonNM}}if(I){t()}},v=function(K){var J=K.obj,I=K.pkgObj;E(I.proto,J,J.prototype,J.imports(),J,true)},o=function(O,K){var I=(typeof O.base==="function")?O.base:a5.GetNamespace(O.base,O.imports),L=x(O.pkg+"."+O.clsName,I,O.cls,O.type,O.isInterface,O.isProto,O.imports,O.mixins,O.attribs),P=K||false,S=true,M,J;if(O.staticMethods){O.staticMethods(L,O.imports)}if(O.proto&&z){D.push({obj:L,pkgObj:O});if(O.implement){r.push({pkgObj:O,obj:L})}}else{if(O.proto){v({obj:L,pkgObj:O})}if(O.implement){S=a5.core.verifiers.validateImplementation(O,L)}}if(!S){return}if(O.enumDeclaration){var N=0,Q=[];O.enumDeclaration({startIndex:function(T){N=T},addValue:function(T){Q.push(T)}});for(M=0,J=Q.length;M<J;M++){L[Q[M]]=N++}L.addValue=function(T){if(L[T]===undefined){L[T]=N++}};L.getValue=function(T){for(s in L){if(L[s]===T){return s}}return null}}if(O.isInterface){L.interfaceVals={};if(O.base!==null&&O.base!==undefined){var R=a5.GetNamespace(O.base,O.imports);if(R.isInterface()){for(s in R.interfaceVals){if(L.interfaceVals[s]===undefined){L.interfaceVals[s]=R.interfaceVals[s]}}}else{a5.ThrowError(204,null,{objNM:L.namespace(),clsNM:R.namespace()})}}O.cls.call(L.interfaceVals,L.interfaceVals)}if(O.isMixin){L._mixinDef={Properties:function(T){L.prototype.constructor._a5_mixinProps=T},MustExtend:function(){L.prototype.constructor._a5_mixinMustExtend=arguments},MustMix:function(){L.prototype.constructor._a5_mixinMustMix=arguments}};O.cls.call(L._mixinDef,L._mixinDef,O.imports,L);if(typeof L._mixinDef[L.className()]==="function"){L._a5_instanceConst=L._mixinDef[L.className()];delete L._mixinDef[L.className()]}else{a5.ThrowError(205,null,{nm:L.namespace()})}delete L._mixinDef.Properties;delete L._mixinDef.Contract;delete L._mixinDef.MustExtend;delete L._mixinDef.MustMix}u(O.pkg,O.clsName,L);if(!P){t()}},C=function(R,S,U){var M={},Q,K,T,S,J,P,I,V,O;if(R==undefined){R=[]}R.push(S+".*");for(Q=0,K=R.length;Q<K;Q++){T=R[Q],P=false,I=T.lastIndexOf(".");V=T.substr(0,T.length-2);if(T.charAt(T.length-1)=="*"){P=true}if(P){V=T.substr(0,T.length-2);S=a5.GetNamespace(V,null,true);if(S){for(s in S){O=S[s];if((typeof O==="function"||typeof O==="object")&&M[s]===undefined){M[s]=O}}}var L=V.replace(/\./g,"_");if(!B[L]){B[L]=[]}B[L].push(M)}else{J=I>-1?T.substr(I+1):T;V=T.substr(0,I);var O=a5.GetNamespace(T,null,true);if(O){if(M[J]===undefined){M[J]=O}}else{var N=V.replace(/\./g,"_")+"_"+J;if(!B[N]){B[N]=[]}B[N].push(M)}}}return M};a5.Create=G;a5.Package=F;a5._a5_verifyPackageQueueEmpty=function(){if(H.length){var K="",J,I;for(J=0,I=H.length;J<I;J++){K+='"'+H[J].pkg.pkg+"."+H[J].pkg.clsName+'", '+H[J].reason+' class missing: "'+H[J].reasonNM+'"'+(H.length>1&&J<H.length-1?", \n":"")}a5.ThrowError(206,null,{classPlural:H.length==1?"class":"classes",clsString:K})}};a5._a5_delayProtoCreation=function(I){z=I};a5._a5_createQueuedPrototypes=function(){for(var J=0,I=D.length;J<I;J++){v(D[J])}D=[];for(J=0,I=r.length;J<I;J++){a5.core.verifiers.validateImplementation(r[J].pkgObj,r[J].obj)}r=[]};a5._a5_processImports=C});a5.SetNamespace("a5.core.classProxyObj",{construct:{classPackage:function(o){return o?a5.GetNamespace(this._a5_pkg,null,true):this._a5_pkg},className:function(){return this._a5_clsName},namespace:function(){return this._a5_namespace},imports:function(){return this._a5_imports},doesImplement:function(o){return a5.core.verifiers.checkImplements(this,o)},doesExtend:function(o){return a5.core.verifiers.checkExtends(this,o)},doesMix:function(o){return a5.core.verifiers.checkMixes(this,o)},getAttributes:function(){return this._a5_attributes},instance:function(p,o){if(p===true){return this._a5_instance||a5.Create(this,o)}else{return this._a5_instance}},superclass:function(q,o){if(q!==undefined){if(typeof q==="object"&&q.isA5===true){if(typeof o!=="object"){o=[]}if(!this._a5_superclass.className){return a5.ThrowError(210)}var p=this._a5_superclass.prototype.constructor._a5_instanceConst;if(p){p.apply(q,o)}else{a5.ThrowError(211,null,{nm:this._a5_superclass.className()})}}else{a5.ThrowError(212,null,{nm:this.namespace()})}}else{return this._a5_superclass.prototype}},instanceCount:function(){return this._instanceCount},isInterface:function(){return this._a5_isInterface},isFinal:function(){return this._a5_isFinal},isSingleton:function(){return this._a5_isSingleton},isAbstract:function(){return this._a5_isAbstract},isPrototype:function(){return this._a5_isPrototype},isA5ClassDef:function(){return true},isA5:true},instance:{isA5:true,isA5ClassDef:function(){return false},getStatic:function(){return this.constructor},superclass:function(p,o){return this.constructor.superclass(p,o)},async:function(p,o){return a5.Async.apply(this,arguments)},cycle:function(){return a5.Cycle.apply(this,arguments)},getAttributes:function(){return this.constructor.getAttributes()},getAttributeValue:function(o){return this.constructor.getAttributeValue(o)},getMethods:function(p,q){var o=[];for(var r in this){if((p||({}).hasOwnProperty.call(this,r))&&typeof(this[r])==="function"&&a5.core.classProxyObj.instance[r]===undefined&&r.substr(0,4)!=="_a5_"&&(q||r.substr(0,1)!=="_")){o.push(r)}}return o},getProperties:function(p,r){var o=[],q=function(w,x){var t=w;while(t!==null){var v=t.constructor;if(v._a5_protoProps!==undefined){var u={};v._a5_protoProps.call(u);if(u[x]!==undefined){return true}}t=v.superclass&&v.superclass().constructor.namespace?v.superclass():null}return false};for(var s in this){if((p||!q(this,s))&&typeof(this[s])!=="function"&&a5.core.classProxyObj.instance[s]===undefined&&s.substr(0,4)!=="_a5_"&&(r||s.substr(0,1)!=="_")){o.push(s)}}return o},classPackage:function(o){return this.constructor.classPackage(o)},className:function(){return this.constructor.className()},getClass:function(){return this.constructor},namespace:function(){return this.constructor.namespace()},doesImplement:function(o){return this.constructor.doesImplement(o)},doesExtend:function(o){return this.constructor.doesExtend(o)},doesMix:function(o){return this.constructor.doesMix(o)},imports:function(){return this.constructor.imports()},dealloc:function(){},instanceCount:function(){return this.constructor.instanceCount()},isInterface:function(){return this.constructor.isInterface()},isFinal:function(){return this.constructor.isFinal()},isSingleton:function(){return this.constructor.isSingleton()},isAbstract:function(){return this.constructor.isAbstract()},isPrototype:function(){return this.constructor.isAbstract()},instanceUID:function(){return this._a5_instanceUID},destroy:function(){if(this._a5_initialized===true){var s=this,u,q,o,v,r,p;while(s!==null){var t=s.constructor;o=t._mixinRef;if(o&&o.length){for(r=0,p=o.length;r<p;r++){if(o[r]._mixinDef.dealloc!=undefined){o[r]._mixinDef.dealloc.call(this)}}}if(t.namespace){q=t.superclass?t.superclass():null;if(q&&q.dealloc!==undefined&&q.dealloc!==s.dealloc){s.dealloc.call(this)}s=q}else{s=null}}if(this.constructor._a5_instance===this){this.constructor._a5_instance=null}for(v in this){if(typeof this[v]==="object"){this[v]=null}}this._a5_initialized=false}}}});a5.SetNamespace("a5.core.verifiers",{namespaceArray:[],validateImplementation:function(w,r){var s,q,o,t,B,x,v,p=function(D,C){for(var E in D){if(D[E]!==C[E]){return false}}return true};for(s=0,q=w.implement.length;s<q;s++){t=w.implement[s];try{B=new r("_a5_interfaceTest");B.Override={};B.Final={};B.Attributes=function(){var E=Array.prototype.slice.call(arguments);var G=E.pop();for(var F=0,D=E.length;F<D;F++){var C=E[F][0];if(C==="Contract"||C==="ContractAttribute"||C===a5.ContractAttribute){G.attributes=E[F]}}return G};x=a5.GetNamespace(t,r.imports());if(r._a5_clsDef){r._a5_clsDef.call(B,B,r.imports(),r)}}catch(u){throw u;return false}if(!x.isInterface()){return a5.ThrowError(213,null,{implNM:x.namespace(),objNM:r.namespace()})}for(o in x.interfaceVals){v=B[o]!==undefined;var A=x.interfaceVals[o],y=B[o];if(v&&typeof A==="object"&&y.attributes&&(y.attributes[0]==="Contract"||y.attributes[0]==="ContractAttribute"||y.attributes[0]===a5.ContractAttribute)){var z=true;for(var s=0,q=A.length;s<q;s++){z=z&&y.attributes.length>=(s+1)?p(A[s],y.attributes[s+1]):false}if(!z){return a5.ThrowError(601,null,{intNM:x.namespace(),implNM:r.namespace(),method:o})}}else{if(!v||(v&&typeof x.interfaceVals[o]!==typeof B[o])){return a5.ThrowError(214,null,{implNM:x.namespace(),objNM:r.namespace()})}}}r._implementsRef.push(x);B.destroy()}return true},checkNamespaceValid:function(q){for(var p=0,o=this.namespaceArray.length;p<o;p++){if(this.namespaceArray[p]==q){return false}}this.namespaceArray.push(q);return true},checkImplements:function(p,u){if(typeof u==="string"){u=a5.GetNamespace(u)}var t=p._implementsRef,s,r,q,o;while(t){for(s=0,o=t.length;s<o;s++){if(t[s]===u){return true}}t=p.superclass()?p.superclass().getStatic()._implementsRef:null}return false},checkExtends:function(o,r){var q=o._a5_superclass&&o._a5_superclass.prototype.className?o._a5_superclass:null;if(!q){return false}var p=(typeof r==="string")?a5.GetNamespace(r):r;if(!p){return false}while(q){if(q===p){return true}q=q._a5_superclass&&q._a5_superclass.prototype.className?q._a5_superclass:null}return false},checkMixes:function(p,r){if(typeof r==="string"){r=a5.GetNamespace(r)}if(!r){return false}for(var q=0,o=p._mixinRef.length;q<o;q++){if(p._mixinRef[q]===r){return true}}return false},validateClassDependencies:function(q,z,x,p,r,A){var y,v,w,u=null,o,s,B,t;if(q!==undefined){if(typeof q==="function"){u=q}else{u=a5.GetNamespace(q,z)}}y=true;if(q!==undefined&&!u){y=false;v="base";w=q}if(y&&x!==undefined){for(o in x){s=x[o];if(typeof s==="string"){B=a5.GetNamespace(s,z)}if(typeof B!=="function"){y=false;v="mixin";w=s}}}if(y&&p!==undefined){for(o in p){t=p[o];if(typeof t==="string"){B=a5.GetNamespace(t,z)}if(typeof B!=="function"){y=false;v="interface";w=t}}}return y?true:{reason:v,reasonNM:w}}});a5.SetNamespace("a5.core.mixins",{prepareMixins:function(t){var s=t,o=t.constructor._mixinRef,r,q,u,p;if(o.length){for(r=o.length-1,q=-1;r>q;r--){if(o[r]._a5_mixinMustExtend!==undefined){for(u in o[r]._a5_mixinMustExtend){p=o[r]._a5_mixinMustExtend[u];if(!t.doesExtend(a5.GetNamespace(p,t.imports()))){return a5.ThrowError(400,null,{mixinNM:o[r].namespace(),instNM:t.namespace(),clsNM:p.namespace()})}}}}}},initializeMixins:function(t){var s=t,o=t.constructor._mixinRef,r,q,u,p;if(o.length){for(r=o.length-1,q=-1;r>q;r--){if(o[r]._a5_mixinProps!==undefined){o[r]._a5_mixinProps.call(s)}}for(r=0,q=o.length;r<q;r++){o[r]._a5_instanceConst.call(s)}}},mixinsReady:function(s){var o=s.constructor._mixinRef,r,q,t,p;if(o.length){for(r=o.length-1,q=-1;r>q;r--){if(o[r]._a5_mixinMustMix!==undefined){for(t in o[r]._a5_mixinMustMix){p=o[r]._a5_mixinMustMix[t];if(!inst.doesMix(a5.GetNamespace(p))){return a5.ThrowError(401,null,{nm:o[r].namespace(),cls:p})}}}if(typeof o[r]._mixinDef.mixinReady==="function"){o[r]._mixinDef.mixinReady.call(s)}}}},applyMixins:function(x,w,p,v){var q={},w=typeof w==="string"?[w]:w,y=[],u,t,s,r,z;for(u=0,r=w.length;u<r;u++){z=a5.GetNamespace(w[u],typeof p==="function"?p():p);if(!z){return a5.ThrowError(404,null,{mixin:w[u]})}y.push(z);for(t=0,s=x.constructor._mixinRef.length;t<s;t++){if(x.constructor._mixinRef[t]===z){return a5.ThrowError(402,null,{nm:z.namespace()})}}for(var o in z._mixinDef){if(o!=="dealloc"&&o!=="Properties"&&o!=="mixinReady"&&o!=="MustExtend"&&o!=="Contract"){if(q[o]===undefined){if(v===undefined){x.constructor._a5_mixedMethods[o]=z._mixinDef[o]}x[o]=z._mixinDef[o];q[o]="mixed"}else{return a5.ThrowError(403,null,{method:o})}}}if(v){a5.core.mixins.initializeMixins(v,y,v)}else{x.constructor._mixinRef.push(z)}}}});a5.SetNamespace("a5.core.errorHandling",true,function(){var p=null;this.ThrowError=function(q,u,s){var r=typeof q,v;if(r==="string"){v=q}else{if(r==="number"){if(a5.GetNamespace("a5.ErrorDefinitions",null,true)){var v=a5.ErrorDefinitions[q];if(!v){v="Invalid error id "+q+" thrown: error not defined."}}else{v="Error id "+q+" thrown. Include a5.ErrorDefinitions for verbose information."}q=a5.Create(u||a5.Error,[v,a5.Error.FORCE_CAST_ERROR])}}if(v){q=a5.Create(u||a5.Error,[(s?o(v,s):v),a5.Error.FORCE_CAST_ERROR])}p=q;throw q};this._a5_getThrownError=function(){var q=p;p=null;return q};var o=function(r,q){for(var s in q){r=r.replace(new RegExp("{"+s+"}","g"),q[s])}return r}});a5.ThrowError=a5.core.errorHandling.ThrowError;a5._a5_getThrownError=a5.core.errorHandling._a5_getThrownError;a5.Package("a5").Prototype("Object",function(p,o){p.Object=function(){};p.mixins=function(q){if(q!==undefined){return a5.GetNamespace(q,this.imports())}else{return this.constructor._a5_mixedMethods}}});a5.Package("a5").Prototype("Attribute","singleton",function(q,o,p){q.Attribute=function(){}});a5.Package("a5").Extends("Attribute").Prototype("AspectAttribute",function(q,p,o){o.RETURN_NULL="_a5_aspectReturnsNull";o.SUCCESS="_a5_aspectSuccess";o.ASYNC="_a5_aspectAsync";o.FAILURE="_a5_aspectFailure";o.NOT_IMPLEMENTED="_a5_notImplemented";q.AspectAttribute=function(){q.superclass(this)};q.before=function(u,r,s,w,v,t){return o.NOT_IMPLEMENTED};q.after=function(v,s,t,x,w,u,r){return o.NOT_IMPLEMENTED};q.around=function(){return o.NOT_IMPLEMENTED}});a5.Package("a5").Class("AspectCallArguments",function(v,u,s){var o,r,q,t,w,p;v.AspectCallArguments=function(A,y,z,C,B,x){o=A;r=y;q=z;t=C;w=B;p=x};v.rules=function(){return o};v.args=function(){return r};v.scope=function(){return q};v.method=function(){return t};v.callback=function(){return w};v.beforeArgs=function(){return p}});a5.Package("a5").Extends("AspectAttribute").Class("ContractAttribute",function(p,o,s){p.ContractAttribute=function(){p.superclass(this)};p.Override.before=function(v){var w=null,x=false,u=function(y){y.message='Contract type failure on method "'+v.method().getName()+'" '+y.message;return y};if(v.rules().length>1){for(i=0,l=v.rules().length;i<l;i++){w=q(v.rules()[i],v.args());if(w instanceof a5.ContractException){p.throwError(u(w));return a5.AspectAttribute.FAILURE}if(w!==false){x=true;w.overloadID=i;break}}}else{x=true;w=q(v.rules()[0],v.args(),true);if(w instanceof a5.ContractException){p.throwError(u(w));return a5.AspectAttribute.FAILURE}}if(!x||w===false){p.throwError(u(new a5.ContractException("no matching overload found")));return a5.AspectAttribute.FAILURE}else{return w}};var q=function(z,v){var y={},x=0,u,A,w;for(A in z){w=z[A];u=t((x<v.length?v[x]:undefined),w,x);if(u instanceof a5.ContractException){return u}y[A]=u;x++}if(v.length>x){return false}if(v.length===0){if(x===0){return y}return false}return y},t=function(v,z,A){var y="type",w=false,B=null,x,u;if(z.indexOf("=")!=-1){x=z.split("=");z=x[0];w=true;B=x[1]}else{if(w){return new a5.ContractException("for argument "+A+", required values cannot be defined after optional values")}}if(z.indexOf(".")!==-1){y="class"}if(z==="array"){y="array"}if(z==="object"){y="object"}if(y!=="class"){z=z.toLowerCase()}if(v===undefined){if(w){v=r(z,y,B,A)}else{return new a5.ContractException("for argument "+A+', missing required argument of type "'+z+'"')}}if(v!==undefined&&v!==null){switch(y){case"class":u=a5.GetNamespace(z);if(u.isInterface()){if(!(v.doesImplement(u))){return new a5.ContractException("for argument "+A+", must implement interface "+z)}}else{if(!(v instanceof u)){return new a5.ContractException("for argument "+A+", must be an instance of type "+z)}}break;case"type":if(v!==null&&typeof v!==z){return new a5.ContractException("for argument "+A+", must be of type "+z)}break;case"array":if(Object.prototype.toString.call(v)!=="[object Array]"){return new a5.ContractException("for argument "+A+", must be an array")}break;case"object":if(v._a5_initialized!==undefined||typeof v!=="object"||v instanceof Array){return new a5.ContractException("for argument "+A+", must be a generic object")}break}}return v},r=function(v,u,A,w){var z,y=false;if(v==="string"){var x=A.charAt(0);if(x===A.charAt(A.length-1)){if(x==='"'||x==="'"){z=A.substr(1,A.length-2)}else{y=true}}else{y=true}}else{if(v==="number"){if(!isNaN(A)){z=parseInt(A)}else{y=true}}else{if(u==="class"){if(A==="null"){z=null}else{y=true}}else{if(v==="boolean"||v==="array"||v==="function"||v==="object"){switch(A){case"{}":if(v==="object"){z={}}else{y=true}break;case"[]":if(v==="array"){z=[]}else{y=true}break;case"null":z=null;break;case"true":if(v==="boolean"){z=true}else{y=true}break;case"false":if(v==="boolean"){z=false}else{y=true}break;default:y=true}}else{y=true}}}}if(y){return new a5.ContractException("for argument "+w+', invalid default value for data type "'+v+'"')}else{return z}}});a5.Package("a5").Extends("AspectAttribute").Class("PropertyMutatorAttribute",function(o){o.PropertyMutatorAttribute=function(){o.superclass(this)};o.Override.before=function(r){if(r.args().length){var p=r.rules()[0].validate,q=false;if(p){if(p.indexOf(".")!==-1){q=true;var p=a5.GetNamespace(p);if(!p){return a5.AspectAttribute.FAILURE}}var t=q?(r.args()[0] instanceof p):(typeof r.args()[0]===p);if(!t){return a5.AspectAttribute.FAILURE}}r.scope()[r.rules()[0].property]=r.args()[0];return a5.AspectAttribute.SUCCESS}var s=r.scope()[r.rules()[0].property]||null;return s===null||s===undefined?a5.AspectAttribute.RETURN_NULL:s};o.Override.after=function(p){if(p.beforeArgs().length){return p.scope()}else{return a5.AspectAttribute.SUCCESS}}});a5.Package("a5").Static(function(o){o.DESTROYED="Destroyed"}).Prototype("Event",function(o){this.Properties(function(){this._a5_type=null;this._a5_data=null;this._a5_target=null;this._a5_currentTarget=null;this._a5_phase=1;this._a5_bubbles=false;this._a5_canceled=false;this._a5_cancelPending=false;this._a5_shouldRetain=false});o.Event=function(q,p,r){this._a5_type=q;this._a5_data=r||null;this._a5_bubbles=p!==false};o.cancel=function(p){if(p===true){this._a5_cancelPending=true}else{this._a5_canceled=true}};o.target=function(){return this._a5_target};o.currentTarget=function(){return this._a5_currentTarget};o.type=function(){return this._a5_type};o.data=function(){return this._a5_data};o.phase=function(){return this._a5_phase};o.bubbles=function(){return this._a5_bubbles};o.shouldRetain=function(p){if(typeof p==="boolean"){this._a5_shouldRetain=p;return this}return this._a5_shouldRetain};o.dealloc=function(){this._a5_target=this._a5_currentTarget=null}});a5.Package("a5").Static("EventPhase",function(o){o.CAPTURING=1;o.AT_TARGET=2;o.BUBBLING=3});a5.Package("a5").Extends(Error).Prototype("Error",function(p,o,q){q.FORCE_CAST_ERROR="_a5_forceCastError";this.Properties(function(){this.stack=[];this.message="";this.name=this.type=this.className()});p.Error=function(s,r){if(typeof s==="string"){this.message=s}else{r=s}if(r instanceof q){if(r.stack){this.stack=r.stack.split("\n")}this.line=r.lineNumber;this.url=r.fileName;if(r.message&&this.message===""){this.message=r.message}}};p.Override.toString=function(){return this.type+": "+this.message}});a5.Package("a5").Extends("Error").Prototype("AssertException",function(o){o.AssertException=function(){o.superclass(this,arguments);this.type="AssertException"}});a5.Package("a5").Extends("Error").Prototype("ContractException",function(o){o.ContractException=function(){o.superclass(this,arguments);this.type="ContractException"}});a5.Package("a5").Static(function(o){o.ADD="eventDispatcherAdd";o.REMOVE="eventDispatcherRemove"}).Prototype("EventDispatcher","abstract",function(q,o,p){this.Properties(function(){this._a5_autoPurge=false;this._a5_listeners={}});q.EventDispatcher=function(){};q.autoPurge=function(r){if(typeof r==="boolean"){this._a5_autoPurge=r;return this}return this._a5_autoPurge};q.addEventListener=function(t,u,r,s){this._a5_addEventListener(t,u,r,s)};q.addOneTimeEventListener=function(t,u,r,s){this._a5_addEventListener(t,u,r,s,true)};q.hasEventListener=function(y,r){var x=y.split("|"),z=this.cl(),w,u,t,v,s;for(w=0,u=x.length;w<u;w++){t=this._a5_getListenerArray(x[w]);if(t){for(v=0,s=t.length;v<s;v++){if(t[v].type==x[w]&&(typeof r==="function"?(t[v].method==r):true)){return true}}}}return false};q.removeEventListener=function(B,r,t,C,x){var A=B.split("|"),s=true,z,w,v,y,u;C=C||null;x=x||false;t=t===true;for(z=0,w=A.length;z<w;z++){v=this._a5_getListenerArray(A[z]);if(v){for(y=0,u=v.length;y<u;y++){if(v[y].method===r&&v[y].type===A[z]&&v[y].useCapture===t&&v[y].isOneTime===x){v.splice(y,1);u=v.length}}this.eListenersChange({type:A.length>1?A:A[0],method:r,useCapture:t,changeType:p.REMOVE})}}};q.removeAllListeners=function(){if(this._a5_listeners){this._a5_listeners={}}};q.getTotalListeners=function(s){if(typeof s==="string"){var r=this._a5_getListenerArray(s);if(r){return r.length}else{return 0}}else{var t=0;for(var u in this._a5_listeners){t+=this._a5_listeners[u].length}return t}};q.dispatchEvent=function(t,u,r,s){var v=this._a5_createEvent(t,u,r);v._a5_phase=a5.EventPhase.AT_TARGET;if(s===false){this.async(this._a5_dispatchEvent,[v])}else{this._a5_dispatchEvent(v)}if(!v.shouldRetain()){v.destroy()}v=null};q.eListenersChange=function(r){};q._a5_addEventListener=function(B,r,C,D,E){var F=D||null,A=B.split("|"),x=E||false,t=C===true,s=true,z,w,v,y,u;if(A.length!=0&&r!=undefined){for(z=0,w=A.length;z<w;z++){v=this._a5_getListenerArray(A[z],true);for(y=0,u=v.length;y<u;y++){if(v[y].method===r&&v[y].type===A[z]&&v[y].useCapture===t&&v[y].scope===F&&v[y].isOneTime===x){s=false;break}}if(s){v.push({type:A[z],method:r,scope:F,useCapture:t===true,isOneTime:x})}}this.eListenersChange({type:A.length>1?A:A[0],method:r,changeType:p.ADD})}else{throw"invalid listener: type- "+B+", method- "+r}};q._a5_createEvent=function(s,t,r){var u=(typeof s==="string")?new a5.Event(s,r):s;if(u instanceof a5.Event||u.doesExtend&&u.doesExtend(a5.Error)){u._a5_target=this;if(t){u._a5_data=t}return u}throw"Invalid event type."};q._a5_dispatchEvent=function(w){w._a5_currentTarget=this;if(this._a5_listeners){var x=this._a5_getListenerArray(w.type()),t,r,s,v,u;if(x){for(t=0,r=x.length;t<r;t++){s=x?x[t]:null;if(w._a5_canceled||!s){return}v=(w.phase()===a5.EventPhase.CAPTURING&&s.useCapture)||(w.phase()!==a5.EventPhase.CAPTURING&&!s.useCapture),u=typeof s.method==="function"&&(s.scope&&s.scope.namespace?s.scope._a5_initialized:true);if(v&&u&&(s.scope==null||s.scope._a5_initialized)){s.method.call(s.scope,w)}if(s.isOneTime===true||(!u&&this._a5_autoPurge)){x.splice(t,1);t--;r--}}}}};q._a5_getListenerArray=function(s,r){if(this._a5_listeners[s]===undefined){if(r===true){this._a5_listeners[s]=[];return this._a5_listeners[s]}return null}return this._a5_listeners[s]};q.dealloc=function(){this.dispatchEvent(new a5.Event(a5.Event.DESTROYED));this.removeAllListeners();this._a5_listeners=null}});a5.SetNamespace("a5.ErrorDefinitions",{100:'invalid namespace "{namespace}", namespaces must contain only letters, numbers, or periods.',101:"TrackWindowStrays must be called prior to GetWindowStrays.",200:'Invalid attempt to define new method "{prop}" in class "{namespace}", without calling override, method exists in superclass.',201:'Invalid attempt to override method "{prop}" in class "{namespace}", method marked as Final in superclass.',202:'Invalid attempt to override method "{prop}" in class "{namespace}", method not defined in superclass.',203:'Invalid attempt to override method "{prop}" in class "{namespace}", method marked as Final in superclass.',204:'Interface "{objNM}" cannot extend the non interface class "{clsNM}"',205:'Mixin "{nm}" doesn not specify a constructor.',206:"Class definitions not found for the following expected {classPlural}: \n {clsString}",207:"Error creating new class instance: cannot find object {className}.",208:"Cannot instantiate class {nm} , interfaces must be associated by the Implements directive.",209:"Error creating class instance {nm} ({errorStr})",210:"Superclass called on an object without a superclass.",211:'Constructor not defined on class "{nm}"',212:'invalid scope argument passed to superclass constructor on class "{nm}".',213:'Cannot implement "{implNM}" on class "{objNM}", class is not an interface.',214:'Invalid implementation of interface "{implNM}" , on class "{objNM}".',215:'Destroy called on core object "{nm}"',216:'Cannot directly instantiate class "{nm}", class marked as abstract.',217:'Cannot create new instance of class "{nm}", class marked as singleton already exists.',218:'Constructor not defined on class "{clsName}"',219:'Class "{currClass}" requires "{checkedClass}"',220:'Invalid attempt to define new method "{prop}" in class "{namespace}", without calling override, method exists in mixin.',300:'Invalid attribute definition: "Attributes" call must take a function as its last parameter.',301:"Invalid attribute definition: No attributes were defined.",302:"Attribute error: Attributes call accepts only arrays as attribute annotations.",303:"Attribute error: First parameter must be a reference to a class that extends a5.Attribute.",304:"Attribute error: invalid parameter specified for Attribute, params must be key/value pair objects.",305:"Attribute error: no parameters passed to Attribute call.",308:'Error processing attribute "{prop}", "{method}" must return a value.',400:'Mixin "{mixinNM}" requires mixing object "{instNM}" to extend class "{clsNM}" .',401:'Mixin "{nm}" requires owner class to mix "{cls}".',402:'Mixin "{nm}" already mixed into ancestor chain.',403:'Invalid mixin: Method "{method}" defined by more than one specified mixin.',404:'Invalid mixin: Mixin "{mixin}" does not exist.',601:"Invalid implementation of Contract on interace {intNM} in class {implNM} for method {method}."})})(typeof global!=="undefined"?global:this);(function(global){a5.SetNamespace("a5.cl",true,function(){var initializer=null,inst,createCalled=false,createCallbacks=[];var Instance=function(){return inst},CreateApplication=function(props,callback){if(!createCalled){createCalled=true;if(a5.cl.CLMain._extenderRef.length===0){var str="A5 CL requires a class that extends a5.cl.CLMain.";throw str}else{if(typeof props==="function"){callback=props;props=undefined}if(props===undefined){props={}}if(callback&&typeof callback==="function"){CreateCallback(callback)}var initializeComplete=function(){inst=new a5.cl.CL(props||{},initializer);for(var i=0,l=createCallbacks.length;i<l;i++){createCallbacks[i](inst)}createCallbacks=null;if(initializer!==null){initializer.applicationInitialized(inst)}inst._cl_launch()};if(initializer!==null){initializer.initialize(props,initializeComplete)}else{initializeComplete()}return function(){return a5.cl.CL.instance()}}}else{throw"Error: a5.cl.CreateApplication can only be called once."}},RegisterInitializer=function(_initializer){if(initializer==null){initializer=_initializer}else{throw"initializer error"}},CreateCallback=function(callback){createCallbacks.push(callback)};return{Instance:Instance,CreateApplication:CreateApplication,RegisterInitializer:RegisterInitializer,CreateCallback:CreateCallback}});a5.Package("a5.cl").Extends("a5.EventDispatcher").Prototype("CLBase",function(proto){this.Properties(function(){this._cl_mvcName=null});proto.CLBase=function(){proto.superclass(this)};proto.cl=function(){return a5.cl.CL.instance()};proto.getClassInstance=function(type,className){return this.cl()._core().instantiator().getClassInstance(type,className)};proto.log=function(value){var plgn=this.plugins().getRegisteredProcess("logger");if(plgn){return plgn.log.apply(this,arguments)}else{if("console" in window){console.log.apply(console,arguments)}}};proto.warn=function(value){var plgn=this.plugins().getRegisteredProcess("logger");if(plgn){return plgn.warn.apply(this,arguments)}else{if("console" in window){console.warn.apply(console,arguments)}}};proto.plugins=function(){return this.cl().plugins()};proto.appParams=function(){return this.cl().appParams()}});a5.Package("a5.cl").Extends("a5.cl.CLBase").Prototype("CLInitializer",function(cls,im){cls.CLInitializer=function(){cls.superclass(this);a5.cl.RegisterInitializer(this)};cls.initialize=function(props,callback){throw"Classes extending CLInitializer must override initialize method without calling super."};cls.load=function(arr,complete,progress){return false};cls.applicationInitialized=function(inst){}});a5.Package("a5.cl").Extends("a5.Error").Prototype("CLError",function(proto,im){proto.CLError=function(){proto.superclass(this,arguments);this.type="CLError"}});a5.Package("a5.cl").Enum("CLLaunchState",function(cls){cls.addValue("APPLICATION_INITIALIZING");cls.addValue("DEPENDENCIES_LOADING");cls.addValue("DEPENDENCIES_LOADED");cls.addValue("AUTO_INSTANTIATION_COMPLETE");cls.addValue("PLUGINS_LOADED");cls.addValue("LAUNCH_INTERCEPTED");cls.addValue("APPLICATION_WILL_LAUNCH");cls.addValue("APPLICATION_LAUNCHED")});a5.Package("a5.cl").Extends("a5.Event").Static(function(CLEvent){CLEvent.ONLINE_STATUS_CHANGE="onlineStatusChange";CLEvent.ERROR_THROWN="errorThrown";CLEvent.APPLICATION_INITIALIZING="applicationInitializing";CLEvent.CORE_LOADED="coreLoaded";CLEvent.DEPENDENCIES_LOADING="dependenciesLoading";CLEvent.DEPENDENCIES_LOADED="dependenciesLoaded";CLEvent.AUTO_INSTANTIATION_COMPLETE="autoInstantiationComplete";CLEvent.PLUGINS_LOADED="pluginsLoaded";CLEvent.APPLICATION_PREPARED="applicationPrepared";CLEvent.LAUNCH_INTERCEPTED="launchIntercepted";CLEvent.APPLICATION_WILL_LAUNCH="applicationWillLaunch";CLEvent.APPLICATION_LAUNCHED="applicationLaunched";CLEvent.APPLICATION_WILL_CLOSE="applicationWillClose";CLEvent.APPLICATION_CLOSED="applicationClosed";CLEvent.WINDOW_RESIZED="windowResized";CLEvent.APPLICATION_WILL_RELAUNCH="applicationWillRelaunch";CLEvent.GLOBAL_UPDATE_TIMER_TICK="globalUpdateTimerTick";CLEvent.ASYNC_START="asyncStart";CLEvent.ASYNC_COMPLETE="asyncComplete";CLEvent.ORIENTATION_CHANGED="orientationChanged";CLEvent.CLIENT_ENVIRONMENT_UPDATED="clientEnvironmentUpdated";CLEvent.APPLICATION_ERROR="applicationError"}).Prototype("CLEvent",function(proto,im){proto.CLEvent=function(){proto.superclass(this,arguments)}});a5.Package("a5.cl.interfaces").Interface("IHTMLTemplate",function(cls){cls.populateTemplate=function(){}});a5.Package("a5.cl.interfaces").Interface("ILogger",function(cls){cls.log=function(){}});a5.Package("a5.cl.interfaces").Interface("IServiceURLRewriter",function(cls){cls.rewrite=function(){}});a5.Package("a5.cl.interfaces").Interface("ILaunchInterceptor",function(cls){cls.interceptLaunch=function(){}});a5.Package("a5.cl.interfaces").Interface("IDataCacheProvider",function(IDataCacheProvider){IDataCacheProvider.isAvailable=function(){};IDataCacheProvider.cacheExists=function(){};IDataCacheProvider.storeValue=function(){};IDataCacheProvider.getValue=function(){};IDataCacheProvider.clearValue=function(){};IDataCacheProvider.clearScopeValues=function(){}});a5.Package("a5.cl.interfaces").Interface("IBindableReceiver",function(cls){cls.receiveBindData=function(){}});a5.Package("a5.cl.core").Extends("a5.cl.CLBase").Class("PluginManager","singleton final",function(self){var plugins=[],addOns=[],processes={animation:null,htmlTemplate:null,serviceURLRewriter:null,logger:null,dataCacheProvider:null,launchInterceptor:null,presentationLayer:null};this.PluginManager=function(){self.superclass(this);self.plugins()["getRegisteredProcess"]=this.getRegisteredProcess};this.instantiatePlugins=function(){var classes=[],i,l,plugin,pi,cfg,obj;for(i=0,l=a5.cl.CLPlugin._extenderRef.length;i<l;i++){if(a5.cl.CLPlugin._extenderRef[i]!==a5.cl.CLAddon){classes.push(a5.cl.CLPlugin._extenderRef[i])}}for(i=0,l=a5.cl.CLAddon._extenderRef.length;i<l;i++){addOns.push(a5.cl.CLAddon._extenderRef[i]);classes.push(a5.cl.CLAddon._extenderRef[i])}for(i=0,l=classes.length;i<l;i++){plugin=classes[i];if(!plugin.isAbstract()){pi=plugin.instance(true);cfg=pi._cl_sourceConfig();obj=a5.cl.core.Utils.mergeObject(cfg||{},pi.configDefaults());pi._cl_isFinal=pi._cl_isSingleton=true;if(!a5.cl.core.Utils.testVersion(pi.requiredVersion())){throw'Error - plugin "'+plugin.className()+'" requires at least CL version '+pi.requiredVersion();return}if(pi.maxVerifiedVersion()&&!self.config().allowUntestedPlugins&&!a5.cl.core.Utils.testVersion(pi.maxVerifiedVersion(),true)){throw"Error - untested version";return}pi._cl_pluginConfig=obj;if(pi instanceof a5.cl.CLAddon){if(a5.cl.CLBase.prototype[plugin.className()]===undefined){a5.cl.CLBase.prototype[plugin.className()]=function(){var p=pi;return function(){return p}}()}}else{if(self.plugins()[plugin.className()]==undefined){self.plugins()[plugin.className()]=function(){var p=pi;return function(){return p}}()}}plugins.push(pi)}}for(var i=0,l=plugins.length;i<l;i++){var checkResult=checkRequires(plugins[i]);if(checkResult){throw'Error: plugin "'+plugins[i].className()+'" requires plugin "'+checkResult;return}plugins[i].initializePlugin()}a5.cl.PluginConfig=function(){throw new a5.cl.CLError("Invalid call to MVC pluginConfig method: method must be called prior to plugin load.")}};this.defineRegisterableProcess=function(process){processes[process]=null};this.registerForProcess=function(type,instance){var val=processes[type];if(val===null){processes[type]=instance}else{if(val===undefined){self.redirect(500,"Error registering process for type '"+type+"', type does not exist.")}else{self.warn("Multiple plugins trying to register for process '"+type+"'.")}}};this.getRegisteredProcess=function(type){return processes[type]};this.processAddons=function(callback){var count=0,processAddon=function(){if(count>=addOns.length){callback();return}else{var addOn=addOns[count].instance(),isAsync=addOn.initializeAddOn()===true;count++;if(isAsync){addOn.addOneTimeEventListener(a5.cl.CLAddon.INITIALIZE_COMPLETE,processAddon)}else{processAddon()}}};processAddon()};var checkRequires=function(plugin){var r=plugin._cl_requires;for(var i=0,l=r.length;i<l;i++){if(!a5.GetNamespace(r[i],null,true)){return r[i]}}return false}});a5.Package("a5.cl.core").Import("a5.cl.CLEvent").Extends("a5.cl.CLBase").Class("Instantiator","singleton final",function(self,im){var applicationPackage,_applicationPackageInstance,namespaceArray=[["services",[a5.cl.CLService,a5.cl.CLSocket,a5.cl.CLAjax]]];this.Instantiator=function($applicationPackage){self.superclass(this);applicationPackage=$applicationPackage;_applicationPackageInstance=a5.SetNamespace(applicationPackage)};this.applicationPackage=function(returnString){if(returnString){return applicationPackage}else{return _applicationPackageInstance}};this.registerAutoInstantiate=function(name,clsArray){namespaceArray.push([name,clsArray])};this.Override.getClassInstance=function(type,className,instantiate){var instance=null,namespace=null;if(className.indexOf(".")!==-1){namespace=a5.GetNamespace(className)}else{namespace=getClassNamespace(type,className)}if(namespace){instance=namespace.instance(!!instantiate)}return instance};this.createClassInstance=function(clsName,type){var cls=getClassNamespace(type,clsName),instance,clsPath=null;if(cls){var clsInstance;clsInstance=(cls._a5_instance===null)?new cls():cls.instance();clsInstance._cl_setMVCName(clsName);return clsInstance}else{return null}};this.beginInstantiation=function(){for(var i=0,l=namespaceArray.length;i<l;i++){var liveNamespace=a5.GetNamespace(applicationPackage+"."+namespaceArray[i][0],null,true);if(liveNamespace&&typeof liveNamespace=="object"){for(var prop in liveNamespace){if(typeof liveNamespace[prop]==="function"){var instance=new liveNamespace[prop];liveNamespace[prop]._cl_isFinal=true;if(namespaceArray[i][0]==="domains"){instance._name=prop;liveNamespace[prop]._a5_isSingleton=true}else{instance._name=prop.substr(0,prop.toLowerCase().indexOf(namespaceArray[i][0].substr(0,namespaceArray[i][0].length-1)))}var isValid=false;for(var j=0,m=namespaceArray[i][1].length;j<m;j++){if(instance instanceof namespaceArray[i][1][j]){isValid=true}}if(!isValid){self.redirect(500,"Error instantiating "+namespaceArray[i][0]+" class "+instance.namespace()+", must extend "+namespaceArray[i][1].namespace())}}}}}self.cl().dispatchEvent(im.CLEvent.AUTO_INSTANTIATION_COMPLETE)};var getClassNamespace=function(type,clsName){return a5.GetNamespace(applicationPackage+"."+type.toLowerCase()+"s."+clsName+(type=="domain"?"":(type.substr(0,1).toUpperCase()+type.substr(1))))}});a5.Package("a5.cl.core").Static("Utils",function(Utils){Utils.isAbsolutePath=function(url){return(url.indexOf("://")!==-1||url.substr(0,1)=="/")};Utils.makeAbsolutePath=function(url){return Utils.isAbsolutePath(url)?(url.substr(0,1)=="/"?a5.cl.Instance().initializer().environmentManager().appPath(true)+url:url):(a5.cl.Instance().initializer().environmentManager().appPath()+url)};Utils.trim=function(str){if(!str){return str}return str.replace(/(^\s+)|(\s+$)/g,"").replace(/\s{2,}/," ")};Utils.mergeObject=function(mergeObj,sourceObj,$setSourceObj){var setSourceObj=$setSourceObj||false,retObj,prop;if(mergeObj==null){return sourceObj}if(sourceObj==null){return mergeObj}function recursiveMerge(sourceObj,mergeObj){for(prop in mergeObj){if(prop!=="prototype"&&prop!=="constructor"){if(sourceObj[prop]!==undefined&&sourceObj[prop]!==null&&sourceObj[prop]!==sourceObj){if(typeof sourceObj[prop]==="object"){if(Object.prototype.toString.call(sourceObj[prop])==="[object Array]"){if(Object.prototype.toString.call(mergeObj[prop])==="[object Array]"){sourceObj[prop]=sourceObj[prop].concat(mergeObj[prop])}}else{sourceObj[prop]=recursiveMerge(sourceObj[prop],mergeObj[prop])}}else{sourceObj[prop]=mergeObj[prop]}}else{sourceObj[prop]=mergeObj[prop]}}}return sourceObj}retObj=recursiveMerge(sourceObj,mergeObj);if(setSourceObj){sourceObj=retObj}return retObj};Utils.deepClone=function(obj){if(typeof obj!=="object"||obj==null){return obj}var c=Utils.isArray(obj)?[]:{};for(var i in obj){var value=obj[i];if(typeof value=="object"){if(Utils.isArray(value)){c[i]=[];for(var j=0,l=value.length;j<l;j++){if(typeof value[j]!="object"){c[i].push(value[j])}else{c[i].push(Utils.deepClone(value[j]))}}}else{c[i]=Utils.deepClone(value)}}else{c[i]=value}}return c};Utils.initialCap=function(str){return str.substr(0,1).toUpperCase()+str.substr(1)};Utils.validateHexColor=function(color){return/^#(([a-fA-F0-9]){3}){1,2}$/.test(color)};Utils.expandHexColor=function(color){if(a5.cl.core.Utils.validateHexColor(color)){if(color.length===4){return"#"+color.substr(1,1)+color.substr(1,1)+color.substr(2,1)+color.substr(2,1)+color.substr(3,1)+color.substr(3,1)}else{return color}}else{return"#000000"}};Utils.arrayIndexOf=function(array,value){for(var x=0,y=array.length;x<y;x++){if(array[x]===value){return x}}return -1};Utils.arrayContains=function(array,value){return Utils.arrayIndexOf(array,value)!==-1};Utils.isArray=function(array){return Object.prototype.toString.call(array)==="[object Array]"};Utils.testVersion=function(val,isMax){var parseVersionString=function(val){val=val.split(".");return{major:parseInt(val[0])||0,minor:val.length>1&&parseInt(val[1])||0,build:val.length>2&&parseInt(val[2])||0}};isMax=isMax||false;var versionVal=parseVersionString(a5.Version()),testVal=parseVersionString(String(val));if(versionVal.major!==testVal.major){return isMax?(versionVal.major<testVal.major):(versionVal.major>testVal.major)}else{if(versionVal.minor!==testVal.minor){return isMax?(versionVal.minor<testVal.minor):(versionVal.minor>testVal.minor)}else{if(versionVal.build!==testVal.build){return isMax?(versionVal.build<testVal.build):(versionVal.build>testVal.build)}else{return true}}}};Utils.viewInStack=function(view){var appView=a5.cl.mvc.core.AppViewContainer.instance();while(view){if(view===appView){return true}view=view.parentView()}return false}});a5.Package("a5.cl.core").Import("a5.cl.CLEvent").Extends("a5.cl.CLBase").Class("RequestManager","final",function(self,im){var defaultContentType,defaultMethod,reqArray,asyncRunning=false,JSON="JSON" in global?global.JSON:a5.cl.core.JSON,reqCount;this.RequestManager=function(defMethod,defType){self.superclass(this,arguments);reqArray=[];reqCount=0;defaultContentType=defType;defaultMethod=defMethod};this.asyncRunning=function(){return asyncRunning};this.processItem=function(props,reqID){var req;var reqComplete=function($req){if(getPropsForID(reqID)){var req=this;if(req.readyState==4){var response,retData,status=req.status;if(status!==500){if(props.isJson){response=req.responseText;if(a5.cl.core.Utils.trim(response)!==""){response=JSON.parse(response);retData=(props.dataProp&&props.dataProp!==undefined)?response[props.dataProp]:response}}else{if(props.isXML&&req.responseXML){response=req.responseXML}else{response=req.responseText}}if(retData===undefined){retData=response}}if(status==200||(status==0)){self.success(reqID,retData)}else{self.onError(reqID,status,retData||req.responseText)}self.reqComplete(reqID)}}},updateProgress=function(e){self.updateProgress(reqID,e)},onError=function(e){self.onError(reqID,req.status,e)},createAppend=function(data,isGet){var retString=isGet?"?":"";for(var prop in data){retString+=prop+"="+data[prop]+"&"}return retString.substr(0,retString.length-1)},contentType=null;req=XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("MSXML2.XMLHTTP.3.0");if(req!==undefined){var method=props.method||defaultMethod,data=props.data||null,urlAppend=method=="GET"?createAppend(props.data,true):"";if(data){if(props.formData===true){contentType="multipart/form-data";var fd=new FormData();for(var prop in data){fd.append(prop,data[prop])}data=fd}else{if(props.isJson){data=JSON.stringify(data)}else{contentType="application/x-www-form-urlencoded";data=createAppend(data,false)}}}if(contentType===null){contentType=defaultContentType}if(props.contentType){contentType=props.contentType}props.isJson=props.isJson!==undefined?props.isJson:(contentType&&contentType.toLowerCase().indexOf("json")!=-1?true:false);props.isXML=(!props.isJson&&contentType.toLowerCase().indexOf("xml"))!=-1?true:false;props.charSet=props.charSet||null;if(req.addEventListener!=undefined){req.addEventListener("progress",updateProgress,false)}if(XMLHttpRequest){req.onerror=onError}req.onreadystatechange=reqComplete;req.open(method,props.url+urlAppend,true);if(props.formData!==true){req.setRequestHeader("Content-type",contentType)}if(!props.allowCache&&method=="POST"){req.setRequestHeader("cache-control","no-cache")}if(props.charSet){req.setRequestHeader("charset",props.charSet)}req.send(data)}else{if(props.error){props.error("client does not support XMLHTTPRequests")}}};this.abortRequest=function(id){for(var i=0;i<reqArray.length;i++){if(reqArray[i].id===id){reqArray[i].abort();reqArray.splice(i,1);return}}self.redirect(500,"Cannot abort request; invalid identifier sent to abortRequest method.")};this.makeRequest=function(props){if((reqArray.length===0||isSilent())&&props.silent!==true){asyncRunning=true;self.cl().dispatchEvent(im.CLEvent.ASYNC_START)}var reqID=reqCount++;props.url=a5.cl.core.Utils.makeAbsolutePath(props.url);var obj={props:props,id:reqID,abort:function(){self.abortRequest(this.id)}};reqArray.push(obj);self.processItem(props,reqID);return obj};this.success=function(id,data){var props=getPropsForID(id);if(props.success){props.success.call(self,data)}};this.reqComplete=function(id){unqueueItem(id);if(reqArray.length===0||checkSilentReq()){asyncRunning=false;self.cl().dispatchEvent(im.CLEvent.ASYNC_COMPLETE)}};this.updateProgress=function(id,e){var props=getPropsForID(id);if(props.progress){props.progress.call(self,e)}};this.onError=function(id,status,errorObj){if(status!=200&&status!=0){var props=getPropsForID(id);if(props&&props.error){props.error.call(self,status,errorObj)}else{throw errorObj}}};var checkSilentReq=function(){for(var i=0,l=reqArray.length;i<l;i++){if(reqArray[i].props.silent!==true){return false}}return true};var getPropsForID=function(id){for(var i=0,l=reqArray.length;i<l;i++){if(reqArray[i].id==id){return reqArray[i].props}}};var unqueueItem=function(value){var isNumber=typeof value=="number";for(var i=0,l=reqArray.length;i<l;i++){if((isNumber&&reqArray[i].id==value)||reqArray[i]==value){reqArray.splice(i,1);return}}};var isSilent=function(){for(var i=0,l=reqArray.length;i<l;i++){if(reqArray[i].props.silent===true){return true}}return false}});a5.cl.core.JSON=function(){var self=this;var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;var init=function(){if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}};var stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw"JSON stringify error."}return str("",{"":value})};var parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")};var f=function(n){return n<10?"0"+n:n};function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}init();return{stringify:stringify,parse:parse}}();a5.Package("a5.cl.core").Static(function(DataCache){DataCache.enabled=function(){return DataCache.instance().enabled()};DataCache.cacheExists=function(){return DataCache.instance().cacheExists()};DataCache.isAvailable=function(){return DataCache.instance().isAvailable()};DataCache.storeValue=function(key,value){return DataCache.instance().storeValue(key,value)};DataCache.getValue=function(key){return DataCache.instance().getValue(key)};DataCache.clearValue=function(key){return DataCache.instance().clearValue(key)};DataCache.clearScopeValues=function(scope,exceptions){return DataCache.instance().clearScopeValues(scope,exceptions)};DataCache.validateCacheKeyPrefix=function(key){return DataCache.instance().validateCacheKeyPrefix(key)};DataCache.removeCacheKeyPrefix=function(key){return DataCache.instance().removeCacheKeyPrefix(key)}}).Extends("a5.cl.CLBase").Class("DataCache","singleton final",function(self,im){var _enabled,cacheKeys,provider;this.DataCache=function(cacheEnabled){self.superclass(this);_enabled=cacheEnabled;cacheKeys=[]};this.enabled=function(){return _enabled};this.isAvailable=function(){getCacheProvider().isAvailable()};this.cacheExists=function(){return getCacheProvider().cacheExists()};this.storeValue=function(key,value){if(self.isAvailable()&&checkCacheKey(key)){return getCacheProvider().storeValue(key)}else{return false}};this.getValue=function(key){if(self.isAvailable()&&checkCacheKey(key)){return getCacheProvider().getValue(key)}};this.clearValue=function(key){if(self.isAvailable()&&checkCacheKey(key)){return getCacheProvider().clearValue(key)}};this.clearScopeValues=function(scope,$exceptions){return getCacheProvider().clearScopeValues(scope,$exceptions)};this.validateCacheKeyPrefix=function(key){for(var i=0,l=cacheKeys.length;i<l;i++){if(cacheKeys[i]==key){return false}}cacheKeys.push(key);return true};this.removeCacheKeyPrefix=function(key){for(var i=0,l=cacheKeys.length;i<l;i++){if(cacheKeys[i]==key){cacheKeys.splice(i,1);return}}};var checkCacheKey=function(key){var isInCache=false;for(var i=0,l=cacheKeys.length;i<l;i++){if(key.substr(cacheKeys[i])!=-1){isInCache=true;break}}return isInCache};var getCacheProvider=function(){if(!provider){provider=self.plugins().getRegisteredProcess("dataCacheProvider")}return provider}});a5.Package("a5.cl.core").Import("a5.cl.CLEvent").Extends("a5.cl.CLBase").Class("GlobalUpdateTimer","singleton final",function(self,im){var timer,clInstance,interval,evtInstance=new im.CLEvent(im.CLEvent.GLOBAL_UPDATE_TIMER_TICK);this.GlobalUpdateTimer=function(_interval){self.superclass(this);interval=_interval;clInstance=self.cl();evtInstance.shouldRetain(true)};this.startTimer=function(){if(!timer){timer=setInterval(update,interval)}};this.stopTimer=function(){this._cl_killTimer()};var update=function(){clInstance.dispatchEvent(evtInstance)};this._cl_killTimer=function(){if(timer){clearInterval(timer);timer=null}}});a5.Package("a5.cl.core").Import("a5.cl.CLEvent","a5.cl.CLLaunchState").Extends("a5.cl.CLBase").Class("Core","singleton final",function(self,im){var _cache,_params,_requestManager,_globalUpdateTimer,_instantiator,_pluginManager,_launchState;this.Core=function(params){self.superclass(this);_params=params;_instantiator=new im.Instantiator(params.applicationPackage)};this.instantiator=function(){return _instantiator};this.cache=function(){return _cache};this.requestManager=function(){return _requestManager};this.pluginManager=function(){return _pluginManager};this.globalUpdateTimer=function(){return _globalUpdateTimer};this.launchState=function(){return _launchState};this.relaunch=function(){self.cl().dispatchEvent(im.CLEvent.APPLICATION_WILL_RELAUNCH);window.location.reload()};this.config=function(){return _params};this.initializeCore=function($environment,$clientEnvironment){updateLaunchStatus("APPLICATION_INITIALIZING");_globalUpdateTimer=new im.GlobalUpdateTimer(_params.globalUpdateTimerInterval);_requestManager=new im.RequestManager(_params.requestDefaultMethod,_params.requestDefaultContentType);_pluginManager=new im.PluginManager();_cache=new im.DataCache(_params.cacheEnabled);updateLaunchStatus("CORE_LOADED");var loadPaths=self.config().dependencies;if(loadPaths.length){if(self.cl().initializer()){var implemented=self.cl().initializer().load(loadPaths,dependenciesLoaded,function(e){updateLaunchStatus("DEPENDENCIES_LOADING",e)});if(implemented==false){dependenciesLoaded()}}else{dependenciesLoaded()}}else{dependenciesLoaded()}};var dependenciesLoaded=function(){updateLaunchStatus("DEPENDENCIES_LOADED");_pluginManager.instantiatePlugins();updateLaunchStatus("PLUGINS_LOADED");updateLaunchStatus("APPLICATION_PREPARED");_instantiator.beginInstantiation();var plgn=_pluginManager.getRegisteredProcess("launchInterceptor");if(plgn){var intercept=plgn.interceptLaunch(launchApplication);if(intercept){updateLaunchStatus("LAUNCH_INTERCEPTED",{interceptor:plgn})}else{launchApplication()}}else{launchApplication()}};var launchApplication=function(){_pluginManager.processAddons(addOnsLoaded)};var addOnsLoaded=function(){updateLaunchStatus("APPLICATION_WILL_LAUNCH");updateLaunchStatus("APPLICATION_LAUNCHED")};var updateLaunchStatus=function(type,e){_launchState=im.CLLaunchState[type];self.cl().dispatchEvent(im.CLEvent[type],e)}});a5.Package("a5.cl.mixins").Import("a5.cl.core.DataCache").Mixin("DataStore",function(proto,im,DataStore){this.Properties(function(){this._cl_cacheKeyValidated=false;this._cl_prefix=null;this._cl_validatedPrefix=null});proto.DataStore=function(){};proto.cacheExists=function(){return im.DataCache.cacheExists()};proto.storeValue=function(key,value){if(im.DataCache.isAvailable()&&value!==undefined){return im.DataCache.storeValue(this._cl_createCacheKey(key),value)}else{return false}};proto.keyPrefix=function(value){if(typeof value==="string"){this._cl_prefix=value;return this}return this._cl_prefix};proto.getValue=function(key){if(im.DataCache.isAvailable()){return im.DataCache.getValue(this._cl_createCacheKey(key))}else{return false}};proto.clearValue=function(key){if(im.DataCache.isAvailable()){return im.DataCache.clearValue(this._cl_createCacheKey(key))}else{return false}};proto.clearScopeValues=function(exceptions){if(im.DataCache.isAvailable()){im.DataCache.clearScopeValues(this.instanceUID(),exceptions)}else{return false}};proto._cl_createCacheKey=function(key){if(!this._cl_cacheKeyValidated||!this._cl_validatedPrefix){var prefix=(this._cl_prefix||(this.id?this.id():false)||this.instanceUID());this._cl_cacheKeyValidated=im.DataCache.validateCacheKeyPrefix(prefix);if(!this._cl_cacheKeyValidated){a5.ThrowError("Error: Duplicate cache key prefix: "+prefix);return}this._cl_validatedPrefix=prefix}return this._cl_validatedPrefix+"_"+key};proto.dealloc=function(){im.DataCache.removeCacheKeyPrefix(this._cl_validatedPrefix)}});a5.Package("a5.cl.mixins").Mixin("BindableSource",function(mixin,im){this.Properties(function(){this._cl_receivers=null;this._cl_bindParamType=null;this._cl_bindParamRequired=false;this._cl_bindParamCallback=null});mixin.BindableSource=function(){this._cl_receivers=[]};mixin.bindParamProps=function(type,required,callback){this._cl_bindParamType=type;if(required!==undefined){this._cl_bindParamRequired=required}if(callback!==undefined){this._cl_bindParamCallback=callback}return this};mixin.bindParamType=function(){return this._cl_bindParamType};mixin.bindParamRequired=function(){return this._cl_bindParamRequired};mixin.notifyReceivers=function(data,params){for(var i=0,l=this._cl_receivers.length;i<l;i++){var r=this._cl_receivers[i];if(params===undefined||params===r.params){if(this._cl_bindParamRequired||(!data&&this._cl_bindParamCallback!==null)){data=this._cl_bindParamCallback.call(this,r.params)}if(data!==null&&data!==undefined){r.receiver.receiveBindData.call(r.scope||r.receiver,this._cl_modifyBindData(data,r.mapping))}}}};mixin._cl_attachReceiver=function(receiver,params,mapping,scope){this._cl_receivers.push({receiver:receiver,params:params,mapping:mapping,scope:scope});this.notifyReceivers()};mixin._cl_detachReceiver=function(receiver){for(var i=0,l=this._cl_receivers.length;i<l;i++){var r=this._cl_receivers[i];if(r.receiver===receiver){this._cl_receivers.splice(i,1);break}}};mixin._cl_modifyBindData=function(dataSource,mapping){var data,isQuery=false;if(dataSource instanceof a5.cl.CLQueryResult){isQuery=true}if(isQuery){data=dataSource._cl_data}else{data=dataSource}if(mapping){var dataSet=[],skipProps={};for(var i=0,l=data.length;i<l;i++){var dataRow={};for(var prop in mapping){dataRow[prop]=data[i][mapping[prop]];skipProps[mapping[prop]]=prop}for(var prop in data[i]){if(skipProps[prop]===undefined){dataRow[prop]=data[i][prop]}}dataSet.push(dataRow)}if(isQuery){dataSource._cl_data=dataSet;return dataSource}else{return dataSet}}else{return dataSource}}});a5.Package("a5.cl.mixins").Mixin("Binder",function(mixin,im){this.Properties(function(){this._cl_bindingsConnected=true;this._cl_bindings=[]});mixin.Binder=function(){this._cl_bindings=[]};mixin.setBindingEnabled=function(value){if(value!==this._cl_bindingsConnected){for(var i=0,l=this._cl_bindings.length;i<l;i++){var b=this._cl_bindings[i];if(b.persist!==true){if(value){b.source._cl_attachReceiver(b.receiver,b.params,b.mapping,b.scope)}else{b.source._cl_detachReceiver(b.receiver)}}}this._cl_bindingsConnected=value}};mixin.bindingsConnected=function(){return this._cl_bindingsConnected};mixin.bind=function(source,receiver,params,mapping,scope,persist){if(!this._cl_checkBindExists(source,receiver,params)){if(source.isA5ClassDef()){source=source.instance()}if(!source.doesMix("a5.cl.mixins.BindableSource")){return this.throwError('source "'+source.className()+'" of bind call must mix a5.cl.mixins.BindableSource.')}if(receiver.isA5ClassDef()){receiver=receiver.instance()}if(!receiver.doesImplement("a5.cl.interfaces.IBindableReceiver")){return this.throwError('receiver "'+receiver.className()+'" of call bind must implement a5.cl.interfaces.IBindableReceiver.')}var hasParams=params!==undefined&&params!==null,isNM=false,pType=null;if(source.bindParamRequired()||params){var isValid=true;if(!hasParams){isValid=false}else{if(source.bindParamType()!==null){pType=source.bindParamType();if(typeof pType==="string"&&pType.indexOf(".")!==-1){pType=a5.GetNamespace(pType)}if(pType.namespace){isNM=true;var nmObj=pType.namespace();if(!(params instanceof pType)){isValid=false}}else{if(typeof params!==source.bindParamType()){isValid=false}}}}if(!isValid){this.throwError('params required for binding source "'+source.namespace()+'"'+(pType!==null?' must be of type "'+(isNM?pType.namespace():pType)+'"':""));return}}this._cl_bindings.push({source:source,scope:scope,receiver:receiver,mapping:mapping,params:params,persist:persist});if(this.bindingsConnected()){source._cl_attachReceiver(receiver,params,mapping,scope)}}};mixin.unbind=function(source,receiver){var found=false;for(var i=0,l=this._cl_bindings.length;i<l;i++){var obj=this._cl_bindings[i];if(obj.source===source&&obj.receiver===receiver){this._cl_bindings.splice(i,1);found=true;break}}if(found){source._cl_detachReceiver(receiver)}else{this.throwError('cannot unbind source "'+source.namespace()+'" on controller "'+this.namespace()+'", binding does not exist.')}};mixin._cl_checkBindExists=function(source,receiver,params){for(var i=0,l=this._cl_bindings.length;i<l;i++){var b=this._cl_bindings[i];if(b.source===source&&b.receiver===receiver&&b.params===params){return true}}return false}});a5.Package("a5.cl").Extends("CLBase").Prototype("CLService","abstract",function(proto,im){this.Properties(function(){this._cl_url=null;this._cl_isJson=true});proto.CLService=function(url){proto.superclass(this);this._cl_url=url};proto.url=function(){var plgn=this.plugins().getRegisteredProcess("serviceURLRewriter");if(plgn){return plgn.rewrite(this._cl_url)}return this._cl_url};proto.isJson=function(value){if(value!==undefined){this._cl_isJson=value}return this._cl_isJson}});a5.Package("a5.cl").Extends("a5.Attribute").Class("SerializableAttribute","abstract",function(cls){cls.SerializableAttribute=function(){}});a5.Package("a5.cl").Import("a5.cl.core.JSON").Extends("CLService").Static(function(CLSocket){CLSocket.supportsSockets=function(){return"WebSocket" in window?true:false}}).Prototype("CLSocket","abstract",function(proto,im,CLSocket){this.Properties(function(){this._cl_socket=null;this._cl_socketOnMessage=null});proto.CLSocket=function(url){proto.superclass(this,[url]);if(CLSocket.supportsSockets()){this._cl_socket=new WebSocket(url);var self=this;this._cl_socketOnMessage=function(e){var data=self.isJson()?im.JSON.parse(e.data):e.data;self.dataReceived(data)}}};proto.send=function(m,callback){if(CLSocket.supportsSockets()){var self=this;self._cl_socket.onmessage=self._cl_socketOnMessage;var sendMsg=function(){self._cl_socket.onopen=null;if(callback){self._cl_socket.onmessage=function(e){var data=self.isJson()?a5.cl.core.JSON.parse(e.data):e.data;callback(data);self._cl_socket.onmessage=self._cl_socketOnMessage}}self._cl_socket.send(m);return null};switch(this._cl_socket.readyState){case 0:this._cl_socket.onopen=sendMsg;break;case 1:sendMsg();break;case 2:this._cl_socket.onopen=sendMsg;this._cl_socket.connect();break}}else{throw"Error sending data to socket "+this.mvcName()+", Web Sockets are not supported in this browser."}};proto.dataReceived=function(data){};proto.close=function(){if(this._cl_socket){this._cl_socket.close()}};proto.dealloc=function(){if(this._cl_socket&&this._cl_socket.readyState===2){this.close()}}});a5.Package("a5.cl").Extends("CLService").Mix("a5.cl.mixins.BindableSource").Prototype("CLAjax","abstract",function(proto,im){this.Properties(function(){this._cl_ajaxStruct=null;this._cl_silent=false});proto.CLAjax=function(url,props){proto.superclass(this,[url]);this._cl_ajaxStruct=props};proto.call=function(m,data,callback,props){var callObj=this._cl_ajaxStruct?a5.cl.core.Utils.deepClone(this._cl_ajaxStruct):{};if(props){for(var prop in callObj){if(props[prop]==undefined){props[prop]=callObj[prop]}}}else{props=callObj}if(data){if(data.isA5Class){props.data=a5.Attribute.processInstance(data)}props.data=data}props.isJson=this.isJson();props.success=callback;if(this._cl_silent){props.silent=true}if(m){if(this.url().indexOf("?")==-1&&m.charAt(0)!=="/"){m="/"+m}}else{m=""}props.url=this.url()+m;return a5.cl.core.RequestManager.instance().makeRequest(props)};proto.abort=function(id){return a5.cl.core.RequestManager.instance().abort(id)};proto.silent=function(value){if(typeof value==="boolean"){this._cl_silent=value;return this}return this._cl_silent}});a5.Package("a5.cl").Extends("a5.AspectAttribute").Static(function(AjaxCallAttribute){AjaxCallAttribute.CANCEL_CYCLE="ajaxCallAttributeCancelCycle"}).Class("AjaxCallAttribute",function(cls,im,AjaxCallAttribute){var cycledCalls={},data={};cls.AjaxCallAttribute=function(){cls.superclass(this)};cls.Override.before=function(aspectArgs){var data=null,args=aspectArgs.args()?Array.prototype.slice.call(aspectArgs.args()):[],argsCallback=null,rules=aspectArgs.rules().length?aspectArgs.rules()[0]:{},propObj=null;if(rules.takesData===true&&args.length){data=args.shift()}if(rules.props){propObj=rules.props}if(rules.hasErrorCallback){if(!propObj){propObj={}}propObj.error=args.pop()}if(rules.hasCallback===true&&args.length&&typeof args[0]==="function"){argsCallback=args.shift()}var executeCall=function(){if(rules.cacheResponse&&getData(aspectArgs.method())){setTimeout(function(){args.unshift(getData(aspectArgs.method()));if(argsCallback){argsCallback(args)}aspectArgs.callback()(args)},0)}else{aspectArgs.scope().call(aspectArgs.method().getName(),data,function(response){if(rules.cacheResponse){storeData(aspectArgs.method(),response)}args.unshift(response);if(argsCallback){argsCallback(args)}aspectArgs.callback()(args)},propObj)}};if(args[0]===AjaxCallAttribute.CANCEL_CYCLE){if(aspectArgs.method()._cl_cycleID){clearInterval(aspectArgs.method()._cl_cycleID);delete aspectArgs.method()._cl_cycleID}return a5.AspectAttribute.ASYNC}if(rules.cycle){if(!aspectArgs.method()._cl_cycleID){aspectArgs.method()._cl_cycleID=setInterval(function(){aspectArgs.method().apply(aspectArgs.scope(),args)},rules.cycle);executeCall()}else{executeCall()}}else{executeCall()}return a5.AspectAttribute.ASYNC};var getData=function(method){return data[method.getClassInstance().instanceUID()+"_"+method.getName()]};var storeData=function(method,value){data[method.getClassInstance().instanceUID()+"_"+method.getName()]=value}});a5.Package("a5.cl").Extends("a5.AspectAttribute").Class("BoundAjaxReturnAttribute",function(cls){cls.BoundAjaxReturnAttribute=function(){cls.superclass(this)};cls.Override.before=function(aspectArgs){if(aspectArgs.rules().length&&aspectArgs.rules()[0].receiverMethod!==undefined){aspectArgs.rules()[0].receiverMethod.call(null,aspectArgs.args()[0])}else{aspectArgs.scope().notifyReceivers(aspectArgs.args()[0],aspectArgs.method().getName())}return a5.AspectAttribute.SUCCESS}});a5.Package("a5.cl").Extends("CLBase").Prototype("CLPlugin","abstract",function(proto,im){this.Properties(function(){this._cl_pluginConfig=null;this._cl_configDefaults={};this._cl_requiredVersion="0";this._cl_maxVerifiedVersion=null;this._cl_requires=[]});proto.CLPlugin=function(){proto.superclass(this)};proto.pluginConfig=function(){return this._cl_pluginConfig};proto.requires=function(val){this._cl_requires.push(val)};proto.requiredVersion=function(value){if(value!==undefined){this._cl_requiredVersion=value}return this._cl_requiredVersion};proto.maxVerifiedVersion=function(value){if(value!==undefined){this._cl_maxVerifiedVersion=value}return this._cl_maxVerifiedVersion};proto.configDefaults=function(value){if(value!==undefined){this._cl_configDefaults=value}return this._cl_configDefaults};proto.initializePlugin=function(){};proto.registerForProcess=function(type){this.cl()._core().pluginManager().registerForProcess(type,this)};proto._cl_sourceConfig=function(){var cfg=a5.cl.CLMain._cl_storedCfgs.pluginConfigs;var pkg=this.classPackage();if(String(pkg[pkg.length-1]).toLowerCase()!=this.className().toLowerCase()){pkg=pkg+"."+this.constructor.className()}for(var prop in cfg){var pluginCfg=cfg[prop];if(pluginCfg.nm&&(pluginCfg.nm===pkg||pluginCfg.nm===this.constructor.className())){return pluginCfg.obj}}return{}}});a5.Package("a5.cl").Extends("CLPlugin").Prototype("CLAddon","abstract",function(proto,im,CLAddon){CLAddon.INITIALIZE_COMPLETE="clAddonInitializeComplete";proto.CLAddon=function(){proto.superclass(this)};proto.initializeAddOn=function(){return false};proto.createMainConfigMethod=function(type){a5.cl.CLMain.prototype["set"+type.substr(0,1).toUpperCase()+type.substr(1)]=function(){a5.cl.CLMain._cl_storedCfgs[type]=Array.prototype.slice.call(arguments)}};proto.getMainConfigProps=function(type){return a5.cl.CLMain._cl_storedCfgs[type]};proto.registerAutoInstantiate=function(){a5.cl.core.Instantiator.instance().registerAutoInstantiate.apply(null,arguments)};proto.defineRegisterableProcess=function(process){this.cl()._core().pluginManager().defineRegisterableProcess(process)}});a5.Package("a5.cl").Extends("CLBase").Mix("a5.cl.mixins.Binder").Class("CL","singleton",function(cls,im){var _params,_initializer,_config,core,main;cls._cl_plugins={};cls.CL=function(params,initializer){cls.superclass(this);var searching=true,clsDef=a5.cl.CLMain;do{if(clsDef.isPrototype()&&clsDef._extenderRef.length==0){searching=false;return}if(clsDef._extenderRef[0].isPrototype()){clsDef=clsDef._extenderRef[0]}else{main=new clsDef._extenderRef[0](params);searching=false}}while(searching);_params=main._cl_params();_initializer=initializer;core=new a5.cl.core.Core(_params);_config=params;if(_config.breakOnDestroyedMethods==true){a5._a5_destroyedObjFunc=Function("debugger;")}};cls._cl_launch=function(){core.initializeCore((_params.environment||null),(_params.clientEnvironment||null))};cls.main=function(){return main};cls.initializer=function(){return _initializer};cls.launchState=function(){return core.launchState()};cls.applicationBuild=function(){return _config.applicationBuild};cls.appName=function(){return _config.appName};cls.applicationPackage=function(){return core.instantiator().applicationPackage.apply(cls,arguments)};cls.Override.appParams=function(){return a5.cl.CLMain._cl_storedCfgs.appParams};cls.environment=function(){return _config.environment};cls.Override.plugins=function(){return cls._cl_plugins};cls.relaunch=function(){core.relaunch()};cls._core=function(){return core};cls.asyncRunning=function(){return core.requestManager().asyncRunning()};cls.Override.eListenersChange=function(e){var ev=a5.cl.CLEvent.GLOBAL_UPDATE_TIMER_TICK;if(e.type===ev){if(cls.getTotalListeners(ev)>0){core.globalUpdateTimer().startTimer()}else{core.globalUpdateTimer().stopTimer()}}}});a5.Package("a5.cl").Extends("CLBase").Static(function(CLMain){CLMain._cl_storedCfgs={appParams:{},pluginConfigs:[]}}).Prototype("CLMain","abstract",function(proto,im,CLMain){var configDefaults={allowUntestedPlugins:false,applicationBuild:null,appName:"",breakOnDestroyedMethods:false,cacheEnabled:true,dependencies:[],environment:"DEVELOPMENT",globalUpdateTimerInterval:10,requestDefaultContentType:"application/json",requestDefaultMethod:"POST"},_params;proto.CLMain=function(params){proto.superclass(this);if(CLMain._extenderRef.length>1){throw new a5.cl.CLError('Invalid class "'+this.namespace()+'", a5.cl.CLMain must only be extended by one subclass.')}if(this.getStatic().instanceCount()>1){throw new a5.cl.CLError('Invalid duplicate instance of a5.cl.CLMain subclass "'+this.getStatic().namespace()+'"')}for(var prop in configDefaults){if(params[prop]===undefined){params[prop]=configDefaults[prop]}}_params=params;_params.applicationPackage=this.classPackage();proto.cl().addOneTimeEventListener(im.CLEvent.APPLICATION_WILL_RELAUNCH,this.applicationWillRelaunch,false,this);proto.cl().addEventListener(im.CLEvent.ONLINE_STATUS_CHANGE,this.onlineStatusChanged,false,this);proto.cl().addOneTimeEventListener(im.CLEvent.APPLICATION_CLOSED,this.applicationClosed,false,this);proto.cl().addOneTimeEventListener(im.CLEvent.DEPENDENCIES_LOADED,this.dependenciesLoaded,false,this);proto.cl().addOneTimeEventListener(im.CLEvent.PLUGINS_LOADED,this.pluginsLoaded,false,this);proto.cl().addOneTimeEventListener(im.CLEvent.AUTO_INSTANTIATION_COMPLETE,this.autoInstantiationComplete,false,this);proto.cl().addOneTimeEventListener(im.CLEvent.APPLICATION_WILL_LAUNCH,this.applicationWillLaunch,false,this);proto.cl().addOneTimeEventListener(im.CLEvent.APPLICATION_LAUNCHED,this.applicationLaunched,false,this)};proto.allowUntestedPlugins=function(val){_params.allowUntestedPlugins=val};proto.appName=function(val){_params.appName=val};proto.applicationBuild=function(val){_params.applicationBuild=val};proto.breakOnDestroyedMethods=function(val){_params.breakOnDestroyedMethods=val};proto.cacheEnabled=function(val){_params.cacheEnabled=val};proto.dependencies=function(val){_params.dependencies=val};proto.environment=function(val){_params.environment=val};proto.globalUpdateTimerInterval=function(val){_params.globalUpdateTimerInterval=val};proto.requestDefaultContentType=function(val){_params.requestDefaultContentType=val};proto.requestDefaultMethod=function(val){_params.requestDefaultMethod=val};proto._cl_params=function(){return _params};proto.setAppParams=function(obj){CLMain._cl_storedCfgs.appParams=obj};proto.setPluginConfig=function(namespace,obj){CLMain._cl_storedCfgs.pluginConfigs.push({nm:namespace,obj:obj})};proto.dependenciesLoaded=function(){};proto.pluginsLoaded=function(){};proto.onlineStatusChanged=function(isOnline){};proto.autoInstantiationComplete=function(){};proto.applicationWillLaunch=function(){};proto.applicationLaunched=function(){};proto.applicationWillClose=function(){};proto.applicationClosed=function(){};proto.applicationWillRelaunch=function(){}})})(typeof global!=="undefined"?global:this);a5.Package("a5.cl.initializers.dom").Extends("a5.cl.CLPlugin").Implements("a5.cl.interfaces.IDataCacheProvider").Class("DataCache","singleton final",function(b,a){var d,c;this.DataCache=function(){b.superclass(this);b.registerForProcess("dataCacheProvider");d=window.localStorage!=undefined;c=(b.isAvailable()&&localStorage.length)?true:false};this.isAvailable=function(){return a5.cl.core.DataCache.enabled()&&d};this.cacheExists=function(){if(this.isAvailable()){return c}else{return false}};this.storeValue=function(f,g){var e=a5.cl.core.JSON.stringify(g);return localStorage.setItem(f,e)};this.getValue=function(f){try{var h=localStorage.getItem(f);return a5.cl.core.JSON.parse(h)}catch(g){return null}};this.clearValue=function(f){try{return localStorage.removeItem(f)}catch(g){return false}};this.clearScopeValues=function(p,n){var e=n||[],h,g;for(var h=0,f=localStorage.length;h<f;h++){var o=localStorage.key(h);if(o.indexOf(p)==0){var q=o.split(p)[1].substr(1),k=false;for(g=0,m=e.length;g<m;g++){if(q==e[g]){k=true}}if(!k){localStorage.removeItem(o);h--;f=localStorage.length}}}}});a5.Package("a5.cl.initializers.dom").Import("a5.cl.CLEvent").Extends("a5.cl.CLBase").Class("EnvManager","singleton final",function(s,o){var r,t,e,h,p,u,k,d,w,g,z,v,y,A;this.environment=function(){return w};this.clientPlatform=function(){return u};this.clientOrientation=function(){return k};this.clientEnvironment=function(){return p};this.browserVersion=function(){return d};this.isOnline=function(){return t};this.isLocal=function(){return v};this.appPath=function(B){return B?A:y};this.EnvManager=function(B,C){s.superclass(this);t=true;r=!!document.createElement("canvas").getContext;k=j();w=B;v=window.location.protocol=="file:";q()};this.initialize=function(D){var B=s.DOM().pluginConfig();g=B.trapErrors;e=B.mobileWidthThreshold;h=B.forceIE7;p=c();b();a();x();try{document.body.addEventListener("online",n);document.body.addEventListener("offline",n)}catch(C){}};var n=function(){if(navigator.onLine!==undefined){var B=navigator.onLine;if(B!=t){t=B;s.cl().dispatchEvent(o.CLEvent.ONLINE_STATUS_CHANGE,{online:s.isOnline()})}}};var c=function(){if("runtime" in window){return"AIR"}else{if("connection" in window&&"notification" in window&&"contacts" in window){return"PHONEGAP"}else{var C=f(),B=C&&screen.width>=e;z=window.blackberry!=undefined;if(z){C=true}if(B){return"TABLET"}else{if(C){return"MOBILE"}else{return"DESKTOP"}}}}};var f=function(){if(window.orientation!==undefined){return true}var C=["ontouchstart"];var E=document.createElement("div");for(var D=0,B=C.length;D<B;D++){E.setAttribute(C[D],"return;");if(typeof E[C[D]]==="function"){return true}}E=null;if(navigator.userAgent.toLowerCase().match(/mobile/i)){return true}return false};var b=function(){if(z){if(r){u="BB6"}else{u="BB"}}else{if(navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)){u="IOS"}else{if(navigator.userAgent.match(/Android/i)){u="ANDROID"}else{if(navigator.userAgent.match(/IEMobile/i)){u="WP7"}else{if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){u="FIREFOX"}else{if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){u="CHROME"}else{if(window.ActiveXObject){u="IE"}}}}}}}if(!u){u="UNKNOWN"}};var j=function(){if(typeof window.orientation!=="undefined"){return(window.orientation==0||window.orientation===180)?"PORTRAIT":"LANDSCAPE"}else{return"UNKNOWN"}};var a=function(){d=0;if(document.body.style.scrollbar3dLightColor!=undefined){if(document.body.style.opacity!=undefined||document.documentMode==9){d=9}else{if(!h&&document.body.style.msBlockProgression!=undefined||document.documentMode==8){d=8}else{if(document.body.style.msInterpolationMode!=undefined||document.documentMode==7){d=7}else{if(document.body.style.textOverflow!=undefined||document.documentMode==6){d=6}else{d=5.5}}}}}};var q=function(){var B=window.location.pathname;if(B.indexOf(".")!=-1){B=B.substr(0,B.lastIndexOf("/")+1)}A=window.location.protocol+"//"+window.location.host;y=A+B;if(y.charAt(y.length-1)!="/"){y+="/"}};var x=function(){window.onbeforeunload=function(){s.cl().dispatchEvent(o.CLEvent.APPLICATION_WILL_CLOSE)};window.onunload=function(){s.cl().dispatchEvent(o.CLEvent.APPLICATION_CLOSED)};if(g===true){window.onerror=function(F,D,C){F=F||window.error;if(F==="Script error."){F="Cannot discern error data from window.onerror - Possible cause is loading A5 from a cross domain source.\nTry disabling trapErrors to use the console or load a local copy of A5."}var E=a5._a5_getThrownError();if(E&&F!==""&&F.indexOf(E.toString())!==-1){F=E}else{F=new a5.Error(F,false)}if(D){F.url=D}if(C){F.line=C}s.cl().dispatchEvent(o.CLEvent.ERROR_THROWN,F);return false}}var B=("onorientationchange" in window)?"onorientationchange":"onresize";window[B]=function(){s.cl().dispatchEvent(o.CLEvent.WINDOW_RESIZED);var C=j();if(C!==k){k=C;if(p==="MOBILE"||p==="TABLET"){s.cl().dispatchEvent(o.CLEvent.ORIENTATION_CHANGED)}}};if(B!=="onresize"){window.onresize=function(){s.cl().dispatchEvent(o.CLEvent.WINDOW_RESIZED)}}}});a5.Package("a5.cl.initializers.dom").Import("a5.cl.CLEvent").Extends("a5.cl.CLBase").Mix("a5.cl.mixins.DataStore").Static(function(a){a.BROWSER_CACHED_ENTRY="clResourceCacheBrowserCacheEntry";a.COMBINED_DEPENDENCY="clResourceCacheCombinedDependcy";a._cl_delimiterOpen="<!--CL:";a._cl_delimiterClose=":CL-->"}).Class("ResourceCache","singleton final",function(o,j,f){var r,e,a,v,p,n,t,b,s,k=[{type:"html",extension:"html"},{type:"html",extension:"htm"},{type:"js",extension:"js"},{type:"text",extension:"txt"},{type:"image",extension:"jpg"},{type:"image",extension:"gif"},{type:"image",extension:"png"},{type:"css",extension:"css"},{type:"xml",extension:"xml"}];this.ResourceCache=function(w,x,A,z,y){this.superclass(this);k=k.concat(w);a=x;v=A;p=z;t=y;o.cl().addOneTimeEventListener(j.CLEvent.CORE_LOADED,c);r={}};var c=function(){b=a5.cl.core.RequestManager.instance();if(a&&typeof o.cl().applicationBuild()==="string"){var w=a5.cl.core.Utils.trim(o.cl().applicationBuild());if(w!==""){s=w}}};this.initStorageRules=function(){var x=this.DOM().manifestBuild(),w=this.getValue("build")||-1;n=(this.cl().isOfflineCapable()&&this.cl().environment()==="PRODUCTION");if(x&&x>w){this.clearScopeValues()}if(n){this.storeValue("build",x)}else{this.clearScopeValues()}};this.load=function(H,I,x,G,y){var B=[],F,D=0,J,C,y=y||false,z;if(typeof H=="string"){B.push(H);F=null}else{B=H;F=[]}a5._a5_delayProtoCreation(true);J=B.length;C=100/J;if(v||p||y){w(B[D])}else{for(var E=0,A=B.length;E<A;E++){w(B[E])}}function w(R){var L=null;var W=null;if(R!=undefined){if(typeof R=="string"){L=R;W=q(L)}else{L=R[0];W=R[1]}}function O(aa){a5._a5_createQueuedPrototypes();a5._a5_verifyPackageQueueEmpty();a5._a5_delayProtoCreation(false);if(I){I(aa)}}function M(ab){D++;var aa=Math.floor((D/J)*100);if(x){x({loadCount:D,totalItems:J,data:ab,itemURL:L,itemType:W,percent:aa})}if(J==1){F=ab}else{F.push(ab)}if(v||p||y){if(D==J){O(F)}else{w(B[D])}}else{if(D===B.length){O(F)}}}var Z=u(L);if(!Z){if(W){L=j.Utils.makeAbsolutePath(g(L));if(s){L=L+"?a5="+s}if(W==="css"){var V=function(){if(G){G(L)}else{throw"Error loading css resource at url "+L}},P=document.getElementsByTagName("head")[0],Q=document.createElement("link");Q.onerror=V;Q.href=L;Q.rel="stylesheet";Q.media="screen";P.appendChild(Q);h(L,W,f.BROWSER_CACHED_ENTRY);M();Q=P=null}else{if(W==="image"){var T=new Image(),Y=function(){T=null;h(L,W,f.BROWSER_CACHED_ENTRY);M()},S=function(){if(G){G(L)}else{throw"Error loading image resource at url "+L}};T.onload=Y;T.onerror=S;T.src=L}else{if(W==="js"&&p===false&&y==false){var U=function(){X.insertBefore(K,X.firstChild)};var X=document.getElementsByTagName("head")[0],K=document.createElement("script");K.type="text/javascript";K.src=L;if(K.readyState){K.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){M()}}}else{K.onload=M}U()}else{var N={url:L,method:"GET",contentType:"text/plain",success:function(aa){aa=h(L,W,aa);d(L,aa,W,function(){M(aa)})},error:function(){if(G){G(L)}else{throw"Error loading resource at url "+L}}};if(typeof x==="function"){N.progress=function(aa){x({loadCount:D,totalItems:J,itemURL:L,itemType:W,percent:Math.floor(C*D+C*Math.floor(aa.loaded/aa.total))})}}N.silent=t===true;b.makeRequest(N)}}}}else{throw'Unknown include type for included file "'+L+'".'}}else{if(Z===f.BROWSER_CACHED_ENTRY){M(null)}else{M(Z)}}}};this.getCachedHTML=function(z,y){var x=r[z];if(x&&x.isID&&x.type==="html"){var w=document.createDocumentFragment();w.innerHTML=x.data;return w}return null};this.purgeAllCaches=function(w){if(window.localStorage!==undefined){localStorage.clear()}o.cl().purgeApplicationCache(w)};this.combineMarkupResources=function(){var x="";for(var y in r){var w=r[y];if(w.type==="xml"||w.type==="html"){x+=f._cl_delimiterOpen+" ";x+=(w.isID?"id=":"url=")+y;x+=" type="+w.type;x+=" "+f._cl_delimiterClose+"\n\n";x+=w.data+"\n\n"}}return x};var u=function(w){var y=r[w],x=(typeof y==="object");if(!y&&n&&y!==f.BROWSER_CACHED_ENTRY&&y!==f.COMBINED_DEPENDENCY){y=o.getValue(w)}return(x?y.data:null)};var h=function(C,B,N,w,L){N=a5.cl.core.Utils.trim(N);var A=new RegExp(f._cl_delimiterOpen+".*?"+f._cl_delimiterClose,"g");if(A.test(N)){if(N.indexOf(f._cl_delimiterOpen)!==0){throw"Error parsing combined resource: "+C+"\n\nCombined XML and HTML resources must start with a delimiter"}var J,E=[];A.lastIndex=0;while(J=A.exec(N)){E.push({index:A.lastIndex,match:a5.cl.core.Utils.trim(J[0])})}for(var I=0,K=E.length;I<K;I++){var O=E[I],M=N.substring(O.index,(I<K-1)?E[I+1].index:N.length).replace(A,""),F=O.match.replace(f._cl_delimiterOpen,"").replace(f._cl_delimiterClose,""),z=a5.cl.core.Utils.trim(F).split(" "),P={};for(var H=0,Q=z.length;H<Q;H++){var R=z[H].split("="),D=R.length>1?R[0]:"url",G=R.pop();P[D]=G}if(P.url){P.url=a5.cl.core.Utils.makeAbsolutePath(P.url)}h(P.url||P.id,P.type||B,M,false,!P.url)}h(C,B,f.COMBINED_DEPENDENCY);return null}else{r[C]={type:B,data:N,isID:L===true};if(n&&!w){o.storeValue(C,N)}return N}};var q=function(y){var x=y.replace(/\?.*$/,"").split("."),A=x[x.length-1];for(var z=0,w=k.length;z<w;z++){if(typeof k[z]!="object"||k[z].extension==undefined||k[z].type==undefined){throw"Improper config cacheType specified: "+k[z].toString()}else{if(A==k[z].extension){return k[z].type}}}return null};var d=function(x,B,A,D){switch(A){case"js":var z=function(){y.insertBefore(w,y.firstChild)};var y=document.getElementsByTagName("head")[0],w=document.createElement("script");w.type="text/javascript";try{w.appendChild(document.createTextNode(B))}catch(C){w.text=B}finally{z();D()}break;case"html":case"xml":default:D()}};var g=function(w){var x=o.cl().initializer().environmentManager();return w.replace("{CLIENT_ENVIRONMENT}",x.clientEnvironment()).replace("{ENVIRONMENT}",x.environment())}});a5.Package("a5.cl.initializers.dom").Extends("a5.cl.CLBase").Class("ManifestManager","singleton final",function(d){var f,c,g=null,e;this.ManifestManager=function(){d.superclass(this);e=document.getElementsByTagName("html")[0].getAttribute("manifest");c=window.applicationCache;f=c&&e?true:false;if(f){b()}};this.manifestBuild=function(){return g};this.isOfflineCapable=function(){return f};this.purgeApplicationCache=function(k){var j=(k==false?false:true);var n=function(){c.swapCache();if(j){d.cl().relaunch(true)}};if(c.status==1){c.addEventListener("updateready",n,false);c.update()}else{throw"Cannot purge application cache, appCache status is "+c.status}};var b=function(){h(e);c.addEventListener("error",a,false)};var h=function(k){var n=a5.cl.core.ResourceCache.instance(),j;d.cl().include(k,function(o){j=o.match(/#build\b.[0-9]*/);if(j){j=j[0];j=j.split("#build")[1];j=parseInt(a5.cl.core.Utils.trim(j));if(!isNaN(j)){g=j}}})};var a=function(j){d.redirect(500,"Error loading manifest")}});a5.Package("a5.cl.initializers.dom").Import("a5.cl.CLEvent").Extends("a5.cl.CLInitializer").Class("DOMInitializer",function(b,a){var d,c,f;b.DOMInitializer=function(){b.superclass(this)};b.environmentManager=function(){return f};b.resourceCache=function(){return d};b.Override.load=function(g,h,j){return d.load(g,h,j)};b.Override.initialize=function(g,n){c=g;var j=false,h=function(){if(!j){j=true;n()}},k=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",k,false);h()}else{if(document.attachEvent){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",k);h()}}}};if(document.readyState==="complete"){h()}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",k,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",k)}}}};b.Override.applicationInitialized=function(g){g.addOneTimeEventListener(a.CLEvent.PLUGINS_LOADED,e);d=new a.ResourceCache(c.cacheTypes||[],c.cacheBreak||false,c.staggerDependencies||true,c.xhrDependencies||false,c.silentIncludes||false);f=new a.EnvManager(g.environment())};var e=function(){f.initialize(c.trapErrors)}});a5.Package("a5.cl.initializers.dom").Static("Utils",function(a){a.vendorPrefixes=["-webkit-","-moz-","-ms-","-o-"];a.jsVendorPrefixes=["Webkit","Moz","ms","o"];a.jsVendorMethodPrefixes=["webkit","moz","ms","o"];a.getParameterByName=function(c){var b=RegExp("[?&]"+c+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))};a.isAbsolutePath=function(b){return(b.indexOf("://")!==-1||b.substr(0,1)=="/")};a.makeAbsolutePath=function(b){return a.isAbsolutePath(b)?(b.substr(0,1)=="/"?a5.cl.Instance().initializer().environmentManager().appPath(true)+b:b):(a5.cl.Instance().initializer().environmentManager().appPath()+b)};a.addEventListener=function(e,c,d,b){var c=c.indexOf("on")===0?c.substr(2):c,b=b||false;if(typeof e.addEventListener==="function"){e.addEventListener(c,d,b)}else{e.attachEvent("on"+c,d)}};a.removeEventListener=function(e,c,d,b){var c=c.indexOf("on")===0?c.substr(2):c;if(typeof e.addEventListener==="function"){e.removeEventListener(c,d,b)}else{e.detachEvent("on"+c,d)}};a.getVendorWindowMethod=function(d){var g=null,c,b,f,e=/-/g;while(e.test(d)){d=d.substring(0,e.lastIndex-1)+d.substr(e.lastIndex,1).toUpperCase()+d.substr(e.lastIndex+1);e.lastIndex=0}for(c=0,b=a.jsVendorMethodPrefixes.length;c<=b;c++){f=c===b?d:(a.jsVendorMethodPrefixes[c]+d.substr(0,1).toUpperCase()+d.substr(1));if(typeof window[f]==="function"){g=window[f];break}}return g};a.getCSSProp=function(d){var f=document.createElement("div"),h=null,c,b,g,e=/-/g;while(e.test(d)){d=d.substring(0,e.lastIndex-1)+d.substr(e.lastIndex,1).toUpperCase()+d.substr(e.lastIndex+1);e.lastIndex=0}for(c=0,b=a.jsVendorPrefixes.length;c<=b;c++){g=c===b?d:(a.jsVendorPrefixes[c]+d.substr(0,1).toUpperCase()+d.substr(1));if(h===null&&typeof f.style[g]==="string"){h=g;break}}f=null;return h};a.getVendorCSSValue=function(h,e){var d=document.createElement("div"),c=e,b,g,f;for(b=0,g=a.vendorPrefixes.length;b<=g;b++){f=(b===0?"":a.vendorPrefixes[b-1])+e;d.style[h]=f;if(d.style[h]===f){c=f;break}}d=null;return c};a.setVendorCSS=function(d,g,e,c){c=c===true;d.style.setProperty(g,e,null);for(var b=0,f=a.vendorPrefixes.length;b<f;b++){d.style.setProperty((c?"":a.vendorPrefixes[b])+g,(c?a.vendorPrefixes[b]:"")+e,null)}};a.elementInDocument=function(b){while(b){if(b===document){return true}b=b.parentNode}return false}});a5.Package("a5.cl.initializers.dom").Extends("a5.cl.CLAddon").Class("DOM","singleton",function(c,b,d){var a;c.DOM=function(){c.superclass(this);c.configDefaults({clientEnvironment:null,forceIE7:true,clientEnvironmentOverrides:false,mobileWidthThreshold:768,titleDelimiter:": ",trapErrors:false})};c.Override.initializePlugin=function(){a=new b.ManifestManager()};c.manifestManager=function(){return c.cl().initializer().manifestManager()};c.environmentManager=function(){return c.cl().initializer().environmentManager()};c.appPath=function(e){return c.environmentManager().appPath(e)};c.browserVersion=function(){return c.environmentManager().browserVersion()};c.clientEnvironment=function(){return c.environmentManager().clientEnvironment.apply(null,arguments)};c.clientPlatform=function(){return c.environmentManager().clientPlatform()};c.clientOrientation=function(){return c.environmentManager().clientOrientation()};c.environment=function(){return c.environmentManager().environment()};c.isOfflineCapable=function(){return a.isOfflineCapable()};c.isLocal=function(){return c.environmentManager().isLocal()};c.isOnline=function(){return c.environmentManager().isOnline()}});new a5.cl.initializers.dom.DOMInitializer();